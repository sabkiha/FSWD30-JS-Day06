define('core/first', ["jquery"],function(a){a(document).bind("ajaxStart",function(){M.util.js_pending("jq")}).bind("ajaxStop",function(){M.util.js_complete("jq")})});
!function(a,b){"use strict";"object"==typeof module&&module.exports&&"function"==typeof require?module.exports=b():"function"==typeof define&&"object"==typeof define.amd?define('core/loglevel', b):a.log=b()}(this,function(){"use strict";function a(a){return typeof console!==h&&(void 0!==console[a]?b(console,a):void 0!==console.log?b(console,"log"):g)}function b(a,b){var c=a[b];if("function"==typeof c.bind)return c.bind(a);try{return Function.prototype.bind.call(c,a)}catch(d){return function(){return Function.prototype.apply.apply(c,[a,arguments])}}}function c(a,b,c){return function(){typeof console!==h&&(d.call(this,b,c),this[a].apply(this,arguments))}}function d(a,b){for(var c=0;c<i.length;c++){var d=i[c];this[d]=c<a?g:this.methodFactory(d,a,b)}}function e(b,d,e){return a(b)||c.apply(this,arguments)}function f(a,b,c){function f(a){var b=(i[a]||"silent").toUpperCase();try{return void(window.localStorage[l]=b)}catch(c){}try{window.document.cookie=encodeURIComponent(l)+"="+b+";"}catch(c){}}function g(){var a;try{a=window.localStorage[l]}catch(b){}if(typeof a===h)try{var c=window.document.cookie,d=c.indexOf(encodeURIComponent(l)+"=");d&&(a=/^([^;]+)/.exec(c.slice(d))[1])}catch(b){}return void 0===k.levels[a]&&(a=void 0),a}var j,k=this,l="loglevel";a&&(l+=":"+a),k.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},k.methodFactory=c||e,k.getLevel=function(){return j},k.setLevel=function(b,c){if("string"==typeof b&&void 0!==k.levels[b.toUpperCase()]&&(b=k.levels[b.toUpperCase()]),!("number"==typeof b&&b>=0&&b<=k.levels.SILENT))throw"log.setLevel() called with invalid level: "+b;if(j=b,c!==!1&&f(b),d.call(k,b,a),typeof console===h&&b<k.levels.SILENT)return"No console available for logging"},k.setDefaultLevel=function(a){g()||k.setLevel(a,!1)},k.enableAll=function(a){k.setLevel(k.levels.TRACE,a)},k.disableAll=function(a){k.setLevel(k.levels.SILENT,a)};var m=g();null==m&&(m=null==b?"WARN":b),k.setLevel(m,!1)}var g=function(){},h="undefined",i=["trace","debug","info","warn","error"],j=new f,k={};j.getLogger=function(a){if("string"!=typeof a||""===a)throw new TypeError("You must supply a name when creating a logger.");var b=k[a];return b||(b=k[a]=new f(a,j.getLevel(),j.methodFactory)),b};var l=typeof window!==h?window.log:void 0;return j.noConflict=function(){return typeof window!==h&&window.log===j&&(window.log=l),j},j});
define('core/yui', function(){return Y});
define('core/config', function(){return M.cfg});
define('core/form-autocomplete', ["jquery","core/log","core/str","core/templates","core/notification"],function(a,b,c,d,e){var f={DOWN:40,ENTER:13,SPACE:32,ESCAPE:27,COMMA:188,UP:38},g=function(b,c){var d=a(document.getElementById(c.selectionId)),e=d.children("[aria-selected=true]").length;for(b%=e;b<0;)b+=e;var f=a(d.children("[aria-selected=true]").get(b)),g=c.selectionId+"-"+b;d.children().attr("data-active-selection",!1).attr("id",""),f.attr("data-active-selection",!0).attr("id",g),d.attr("aria-activedescendant",g)},h=function(b,c,d,e){var f=a(d).attr("data-value");b.multiple&&e.children("option").each(function(b,c){a(c).attr("value")==f&&(a(c).prop("selected",!1),a(c).attr("data-iscustom")&&a(c).remove())}),q(b,c,e)},i=function(b,c){var d=a(document.getElementById(c.inputId)),e=a(document.getElementById(c.suggestionsId)),f=e.children("[aria-hidden=false]").length;for(b%=f;b<0;)b+=f;var g=a(e.children("[aria-hidden=false]").get(b)),h=a(e.children("[role=option]")).index(g),i=c.suggestionsId+"-"+h;e.children().attr("aria-selected",!1).attr("id",""),g.attr("aria-selected",!0).attr("id",i),d.attr("aria-activedescendant",i);var j=g.offset().top-e.offset().top+e.scrollTop()-e.height()/2;e.animate({scrollTop:j},100)},j=function(b){var c=a(document.getElementById(b.suggestionsId)),d=c.children("[aria-selected=true]"),e=c.children("[aria-hidden=false]").index(d);i(e+1,b)},k=function(b){var c=a(document.getElementById(b.selectionId)),d=c.children("[data-active-selection=true]");if(!d)return void g(0,b);var e=c.children("[aria-selected=true]").index(d);g(e-1,b)},l=function(b){var c=a(document.getElementById(b.selectionId)),d=c.children("[data-active-selection=true]");if(!d)return void g(0,b);var e=c.children("[aria-selected=true]").index(d);g(e+1,b)},m=function(b){var c=a(document.getElementById(b.suggestionsId)),d=c.children("[aria-selected=true]"),e=c.children("[aria-hidden=false]").index(d);i(e-1,b)},n=function(b){var c=a(document.getElementById(b.inputId)),d=a(document.getElementById(b.suggestionsId));c.attr("aria-expanded",!1).attr("aria-activedescendant",b.selectionId),d.hide().attr("aria-hidden",!0)},o=function(b,f,g,h){var j=a(document.getElementById(f.inputId)),k=a(document.getElementById(f.suggestionsId)),l=!1,m=[];h.children("option").each(function(b,c){a(c).prop("selected")!==!0&&(m[m.length]={label:c.innerHTML,value:a(c).attr("value")})});var n=f.caseSensitive?g:g.toLocaleLowerCase(),o=a.extend({options:m},b,f);d.render("core/form_autocomplete_suggestions",o).done(function(d){k.replaceWith(d),k=a(document.getElementById(f.suggestionsId)),k.show().attr("aria-hidden",!1),k.children().each(function(c,d){d=a(d),b.caseSensitive&&d.text().indexOf(n)>-1||!b.caseSensitive&&d.text().toLocaleLowerCase().indexOf(n)>-1?(d.show().attr("aria-hidden",!1),l=!0):d.hide().attr("aria-hidden",!0)}),j.attr("aria-expanded",!0),l?b.tags||i(0,f):c.get_string("nosuggestions","form").done(function(a){k.html(a)})}).fail(e.exception)},p=function(b,c,d){var e=a(document.getElementById(c.inputId)),f=e.val(),g=f.split(","),h=!1;a.each(g,function(c,e){if(e=e.trim(),""!==e&&(b.multiple||d.children("option").prop("selected",!1),d.children("option").each(function(b,c){a(c).attr("value")==e&&(h=!0,a(c).prop("selected",!0))}),!h)){var f=a("<option>");f.append(e),f.attr("value",e),d.append(f),f.prop("selected",!0),f.attr("data-iscustom",!0)}}),q(b,c,d),e.val(""),n(c)},q=function(b,c,f){var h=[],i=a(document.getElementById(c.selectionId)),j=i.attr("aria-activedescendant"),k=!1;j&&(k=a(document.getElementById(j)).attr("data-value")),f.children("option").each(function(b,c){a(c).prop("selected")&&h.push({label:a(c).html(),value:a(c).attr("value")})});var l=a.extend({items:h},b,c);d.render("core/form_autocomplete_selection",l).done(function(b){i.empty().append(a(b).html()),k!==!1&&i.children("[aria-selected=true]").each(function(b,d){a(d).attr("data-value")===k&&g(b,c)})}).fail(e.exception),"undefined"!=typeof M.core_formchangechecker&&M.core_formchangechecker.set_form_changed(),f.change()},r=function(b,c,d){var e=a(document.getElementById(c.inputId)),f=a(document.getElementById(c.suggestionsId)),g=f.children("[aria-selected=true]").attr("data-value");b.multiple||d.children("option").prop("selected",!1),d.children("option").each(function(b,c){a(c).attr("value")==g&&a(c).prop("selected",!0)}),q(b,c,d),e.val(""),n(c)},s=function(b,c,d,f,g){var h=a(b.currentTarget).val();g.transport(c.selector,h,function(b){var e=g.processResults(c.selector,b),h=[];f.children("option").each(function(b,c){c=a(c),c.prop("selected")?h.push(c.attr("value")):c.remove()}),a.each(e,function(b,c){if(h.indexOf(c.value)===-1){var d=a("<option>");d.append(c.label),d.attr("value",c.value),f.append(d)}}),o(c,d,"",f)},e.exception)},t=function(b,c,d){var e=a(document.getElementById(c.inputId));if(e.on("keydown",function(g){switch(g.keyCode){case f.DOWN:return!b.showSuggestions||("true"===e.attr("aria-expanded")?j(c):!e.val()&&b.ajax?require([b.ajax],function(a){s(g,b,c,d,a)}):o(b,c,e.val(),d),g.preventDefault(),!1);case f.COMMA:return b.tags&&p(b,c,d),g.preventDefault(),!1;case f.UP:return m(c),g.preventDefault(),!1;case f.ENTER:var h=a(document.getElementById(c.suggestionsId));return"true"===e.attr("aria-expanded")&&h.children("[aria-selected=true]").length>0?r(b,c,d):b.tags&&p(b,c,d),g.preventDefault(),!1;case f.ESCAPE:return"true"===e.attr("aria-expanded")&&n(c),g.preventDefault(),!1}return!0}),e.on("behat:set-value",function(){b.tags&&p(b,c,d)}),e.on("blur",function(){window.setTimeout(function(){var f=a(document.activeElement);f.attr("id")!=e.attr("id")&&(b.tags&&p(b,c,d),n(c))},500)}),b.showSuggestions){var g=a(document.getElementById(c.downArrowId));g.on("click",function(){e.focus(),o(b,c,e.val(),d)})}var q=a(document.getElementById(c.suggestionsId));q.parent().on("click","[role=option]",function(e){var f=a(e.currentTarget).closest("[role=option]"),g=a(document.getElementById(c.suggestionsId)),h=g.children("[aria-hidden=false]").index(f);i(h,c),r(b,c,d)});var t=a(document.getElementById(c.selectionId));t.on("click","[role=listitem]",function(e){var f=a(e.currentTarget);h(b,c,f,d)}),t.on("keydown",function(e){switch(e.keyCode){case f.DOWN:return l(c),e.preventDefault(),!1;case f.UP:return k(c),e.preventDefault(),!1;case f.SPACE:case f.ENTER:var g=a(document.getElementById(c.selectionId)).children("[data-active-selection=true]");return g&&(h(b,c,g,d),e.preventDefault()),!1}return!0}),b.showSuggestions&&e.on("input",function(e){var f=a(e.currentTarget).val(),g=a(e.currentTarget).data("last-value");g!==f&&o(b,c,f,d),a(e.currentTarget).data("last-value",f)})};return{enhance:function(c,e,f,g,h,i){var j={selector:c,tags:!1,ajax:!1,placeholder:g,caseSensitive:!1,showSuggestions:!0};"undefined"!=typeof e&&(j.tags=e),"undefined"!=typeof f&&(j.ajax=f),"undefined"!=typeof h&&(j.caseSensitive=h),"undefined"!=typeof i&&(j.showSuggestions=i);var k=a(c);if(!k)return b.debug("Selector not found: "+c),!1;k.hide().attr("aria-hidden",!0);var l={selectId:k.attr("id"),inputId:"form_autocomplete_input-"+a.now(),suggestionsId:"form_autocomplete_suggestions-"+a.now(),selectionId:"form_autocomplete_selection-"+a.now(),downArrowId:"form_autocomplete_downarrow-"+a.now()};j.multiple=k.attr("multiple");var m=a("[for="+l.selectId+"]"),n=[];k.children("option").each(function(b,c){n[b]={label:c.innerHTML,value:a(c).attr("value")}});var o=a.extend({},j,l);o.options=n,o.items=[];var p=d.render("core/form_autocomplete_input",o),r=d.render("core/form_autocomplete_suggestions",o),u=d.render("core/form_autocomplete_selection",o);a.when(p,r,u).done(function(b,c,d){k.after(c),k.after(b),k.after(d),m.attr("for",l.inputId),t(j,l,k);var e=a(document.getElementById(l.inputId)),f=a(document.getElementById(l.suggestionsId));f.hide().attr("aria-hidden",!0),j.ajax&&require([j.ajax],function(b){var c=function(a){s(a,j,l,k,b)};e.on("input keypress",c);var d=a(document.getElementById(l.downArrowId));d.on("click",c)}),q(j,l,k)})}}});
define('core/url', ["core/config"],function(a){return{fileUrl:function(b,c){var d=a.wwwroot+b;return"/"!=c.charAt(0)&&(c="/"+c),d+=a.slasharguments?c:"?file="+encodeURIComponent(c)},relativeUrl:function(b){if(0===b.indexOf("http:")||0===b.indexOf("https:")||b.indexOf("://")>=0)throw new Error("relativeUrl function does not accept absolute urls");return"/"!=b.charAt(0)&&(b="/"+b),"admin"!==a.admin&&(b=b.replace(/^\/admin\//,"/"+a.admin+"/")),a.wwwroot+b},imageUrl:function(a,b){return M.util.image_url(a,b)}}});
define('core/tag', ["jquery","core/ajax","core/templates","core/notification","core/str","core/config"],function(a,b,c,d,e,f){return{init_manage_page:function(){var g=function(b){var c=b.closest("tr").get(0);if(c){var d=a(c).find("td.col-timemodified").get(0);e.get_string("now").done(function(b){a(d).html(b)})}};a(".tag-management-table").delegate(".tagtype","click",function(d){d.preventDefault();var e=a(this),f=e.attr("data-id"),h=e.attr("data-value"),i="1"===h?0:1,j=b.call([{methodname:"core_tag_update_tags",args:{tags:[{id:f,official:i}]}},{methodname:"core_tag_get_tags",args:{tags:[{id:f}]}}],!0);a.when.apply(a,j).done(function(a,b){void 0===a.warnings[0]&&void 0!==b.tags[0]&&c.render("core_tag/tagtype",b.tags[0]).done(function(a){g(e);var b=e.parent();e.replaceWith(a),b.find(".tagtype").get(0).focus()})})}),a(".tag-management-table").delegate(".tagflag","click",function(d){d.preventDefault();var e=a(this),f=e.attr("data-id"),h=e.attr("data-value"),i="0"===h?1:0,j=b.call([{methodname:"core_tag_update_tags",args:{tags:[{id:f,flag:i}]}},{methodname:"core_tag_get_tags",args:{tags:[{id:f}]}}],!0);a.when.apply(a,j).done(function(b,d){if(void 0===b.warnings[0]&&void 0!==d.tags[0]){var f=e.closest("tr").get(0);f&&(d.tags[0].flag?a(f).addClass("flagged-tag"):a(f).removeClass("flagged-tag")),c.render("core_tag/tagflag",d.tags[0]).done(function(a){g(e);var b=e.parent();e.replaceWith(a),b.find(".tagflag").get(0).focus()})}})}),a(".tag-management-table").delegate("a.tagdelete","click",function(b){b.preventDefault();var c=a(this).attr("href");e.get_strings([{key:"delete"},{key:"confirmdeletetag",component:"tag"},{key:"yes"},{key:"no"}]).done(function(a){d.confirm(a[0],a[1],a[2],a[3],function(){window.location.href=c})})}),a("#tag-management-delete").click(function(b){var c=a(this).closest("form").get(0),f=a(c).find("input[type=checkbox]:checked").length;return!!f&&(b.preventDefault(),void e.get_strings([{key:"delete"},{key:"confirmdeletetags",component:"tag"},{key:"yes"},{key:"no"}]).done(function(a){d.confirm(a[0],a[1],a[2],a[3],function(){c.submit()})}))}),a(".tag-management-table").delegate(".tagnameedit","click keypress",function(h){if("keypress"!==h.type||13===h.keyCode){h.stopImmediatePropagation(),h.preventDefault();var i=a(this),j=a(i.closest("td").get(0)),k=a(j.find("input").get(0)),l=i.attr("data-id"),m=function(f,h){var i=b.call([{methodname:"core_tag_update_tags",args:{tags:[{id:f,rawname:h}]}},{methodname:"core_tag_get_tags",args:{tags:[{id:f}]}}],!0);a.when.apply(a,i).done(function(b,f){void 0!==b.warnings[0]?e.get_string("error").done(function(a){d.alert(a,b.warnings[0].message)}):void 0!==f.tags[0]&&c.render("core_tag/tagname",f.tags[0]).done(function(b){g(j),j.html(b),a(j.find(".tagnameedit").get(0)).focus()})})},n=function(){a(".tag-management-table td.tageditingon").each(function(){var b=a(this),c=a(b.find("input").get(0));c.off(),b.removeClass("tageditingon"),c.val(b.attr("data-value"))})};n(),j.addClass("tageditingon"),j.attr("data-value",k.val()),k.select(),k.on("keypress focusout",function(a){f.behatsiterunning&&"focusout"===a.type||("keypress"===a.type&&13===a.keyCode&&(m(l,k.val()),n()),("keypress"===a.type&&27===a.keyCode||"focusout"===a.type)&&n())})}})}}});
define('core/localstorage', ["core/config"],function(a){var b=!1,c="",d="",e=null,f=function(){if(a.jsrev==-1)return!1;if("undefined"==typeof window.localStorage)return!1;var b="test";try{return e=window.localStorage,null!==e&&(e.setItem(b,"1"),e.removeItem(b),!0)}catch(c){return!1}},g=function(a){return c+a},h=function(){var b=e.getItem(d);if(null===b)return void e.setItem(d,a.jsrev);var c=a.jsrev;c!=b&&(e.clear(),e.setItem(d,a.jsrev))},i=function(a){var b,c,d,e=0;if(0===a.length)return e;for(b=0,d=a.length;b<d;b++)c=a.charCodeAt(b),e=(e<<5)-e+c,e|=0;return e},j=function(){b=f();var e=a.wwwroot+"/"+a.jsrev,g=i(e);c=g+"/",e=a.wwwroot+"/",g=i(e),d=g+"/jsrev"};return j(),{get:function(a){return!!b&&(h(),a=g(a),e.getItem(a))},set:function(a,c){if(!b)return!1;h(),a=g(a);try{e.setItem(a,c)}catch(d){return!1}return!0}}});
define('core/templates', ["core/mustache","jquery","core/ajax","core/str","core/notification","core/url","core/config","core/localstorage","core/event","core/flex_icon"],function(a,b,c,d,e,f,g,h,i,j){String.prototype.startsWith||(String.prototype.startsWith=function(a,b){return b=b||0,this.substr(b,a.length)===a});var k={},l=function(c,f,h){var i=b.Deferred(),j=[],k=[],l=[],n="",o=[],q=!0,r=!0,s=function(a){var b="",c=m(a);return c.done(function(a){b=a}).fail(e.exception),""===b&&(l.push(c),q=!1),b},t=function(a,b){var c=a.split(","),d="",e="",f="";c.length>0&&(d=c.shift().trim()),c.length>0&&(e=c.shift().trim()),c.length>0&&(f=c.join(",").trim()),""!==f&&(f=b(f,this)),0===f.indexOf("{")&&0!==f.indexOf("{{")&&(f=JSON.parse(f));var g=o.length;return o.push({key:d,component:e,param:f}),"{{_s"+g+"}}"},u=function(a,b){var c="",d="",e={},f=a.split(",").map(function(a){return a.trim()});f.length>0&&(c=f.shift().trim()),f.length>0&&(d=f.join(",").trim()),c.indexOf("{{")!==-1&&(c=b(c,this)),""!==d&&(d.indexOf("{{")!==-1&&(d=b(d,this)),e=JSON.parse(d));var g="",h="",i=k.length;return"undefined"!=typeof e.alt&&(g=e.alt),e.classes&&(h=e.classes),k.push(p(c,g,h)),"<_p"+i+">"},v=function(a,b){var c=a.split(","),d="",e="",f="";c.length>0&&(d=c.shift().trim()),c.length>0&&(e=c.shift().trim()),c.length>0&&(f=c.join(",").trim());var g=e+"|"+d+',{"alt":"'+f+'"}';return u.apply(this,[g,b])},w=function(a,b){return j.push(b(a,this)),""},x=function(a,b){var c=b(a.trim(),this);return c=c.replace('"','\\"').replace(/([\{\}]{2,3})/g,"{{=<% %>=}}$1<%={{ }}=%>"),'"'+c+'"'};f.str=function(){return t},f.pix=function(){return v},f.flex_icon=function(){return u},f.js=function(){return w},f.quote=function(){return x},f.globals={config:g};var y=b.Deferred(),z=function(){b.when.apply(b,l).done(function(){if(q&&!r)y.resolve();else{r=!1,j=[],k=[],l=[],n="",o=[],q=!0;try{n=a.render(c,f,s),z()}catch(b){i.reject(b)}}})};return z(),y.done(function(){for(var a=0;a<k.length;a++)k[a].done(function(a){return function(b,c){j.push(c),n=n.replace("<_p"+a+">",b)}}(a));b.when.apply(b,k).then(function(){var a=b.Deferred();return j=j.join(";\n"),o.length>0?d.get_strings(o).done(function(b){var c;for(c=0;c<b.length;c++){for(;n.indexOf("{{_s"+c+"}}")!==-1;)n=n.replace("{{_s"+c+"}}",b[c]);for(;j.indexOf("{{_s"+c+"}}")!==-1;)j=j.replace("{{_s"+c+"}}",b[c])}a.resolve()}):a.resolve(),a}).then(function(){i.resolve(n.trim(),j)},function(a){i.reject(a)})}),i.promise()},m=function(a,d){var e=b.Deferred(),f=a.split("/"),i=f.shift(),j=f.shift(),l=g.theme+"/"+a;if(l in k)return e.resolve(k[l]),e.promise();var m=h.get("core_template/"+l);if(m)return e.resolve(m),k[l]=m,e.promise();var n=c.call([{methodname:"core_output_load_template",args:{component:i,template:j,themename:g.theme}}],d,!1);return n[0].done(function(a){h.set("core_template/"+l,a),k[l]=a,e.resolve(a)}).fail(function(a){e.reject(a)}),e.promise()},n=function(a){if(""!==a.trim()){var c=b("<script>").attr("type","text/javascript").html(a);b("head").append(c)}},o=function(a,c,d,e){var f=b(a);if(f.length){var g=b(c);e?(f.empty(),f.append(g)):f.replaceWith(g),n(d),i.notifyFilterContentUpdated(g)}},p=function(a,c,d){var e=b.Deferred();return j.getFlexTemplateData(a).done(function(a){void 0===a.data?a.data={}:a.data.customdata={alt:c},void 0!==d&&""!==d&&(a.data.customdata.classes=d),q.render(a.template,a.data).done(function(a){e.resolve(a)})}).fail(function(){var b=a.split("|");1===b.length&&b.unshift("core");var g=f.imageUrl(b[1],b[0]),h=[{name:"src",value:g},{name:"alt",value:c},{name:"title",value:c},{name:"class",value:"smallicon "+d}];q.render("core/pix_icon",{attributes:h}).done(e.resolve)}),e.promise()},q={render:function(a,c,d){var e=b.Deferred(),f=b.extend({},c),g=m(a,!0);return g.done(function(a){var b=l(a,f);b.done(function(a,b){e.resolve(a,b)}).fail(function(a){e.reject(a)})}).fail(function(a){e.reject(a)}),e},runTemplateJS:n,replaceNodeContents:function(a,b,c){return o(a,b,c,!0)},replaceNode:function(a,b,c){return o(a,b,c,!1)},renderIcon:p};return q});
define('core/str', ["jquery","core/ajax","core/localstorage"],function(a,b,c){return{get_string:function(a,b,c,d){var e=this.get_strings([{key:a,component:b,param:c,lang:d}]);return e.then(function(a){return a[0]})},get_strings:function(d){var e,f=a.Deferred(),g=[],h=0,i=!1;for(h=0;h<d.length;h++)if(e=d[h],"undefined"==typeof e.lang&&(e.lang=a("html").prop("lang").replace("-","_")),"undefined"==typeof M.str[e.component]||"undefined"==typeof M.str[e.component][e.key]){var j=c.get("core_str/"+e.key+"/"+e.component+"/"+e.lang);j?("undefined"==typeof M.str[e.component]&&(M.str[e.component]=[]),M.str[e.component][e.key]=j):i=!0}if(i){var k=[];for(h=0;h<d.length;h++)e=d[h],k.push({methodname:"core_get_string",args:{stringid:e.key,component:e.component,lang:e.lang,stringparams:[]}});var l=b.call(k,!0,!1);a.when.apply(null,l).done(function(){var a=0;for(a=0;a<arguments.length;a++)e=d[a],"undefined"==typeof M.str[e.component]&&(M.str[e.component]=[]),M.str[e.component][e.key]=arguments[a],c.set("core_str/"+e.key+"/"+e.component+"/"+e.lang,arguments[a]),g[a]=M.util.get_string(e.key,e.component,e.param).trim();f.resolve(g)}).fail(function(a){f.reject(a)})}else{for(h=0;h<d.length;h++)e=d[h],g[h]=M.util.get_string(e.key,e.component,e.param);f.resolve(g)}return f.promise()}}});
define('core/permissionmanager', ["jquery","core/config","core/notification","core/templates"],function(a,b,c,d){var e,f,g,h,i={ADDROLE:"a.allowlink, a.prohibitlink",REMOVEROLE:"a.preventlink, a.unprohibitlink",UNPROHIBIT:"a.unprohibitlink"},j=a.Event("rolesloaded"),k=null,l=function(){var d={contextid:e,getroles:1,sesskey:b.sesskey};a.post(g+"roles/ajax.php",d,function(){},"json").done(function(b){try{h=b,l=function(){a("body").trigger(j)},l()}catch(d){c.exception(d)}}).fail(function(a,b,d){c.exception(d)})},m=function(b,f,i){var j={contextid:e,roleid:f,sesskey:M.cfg.sesskey,action:i,capability:b.data("name")};a.post(g+"roles/ajax.php",j,function(){},"json").done(function(e){var i=e;try{var j={rolename:h[f],roleid:f,adminurl:g,imageurl:"delete-ns"};switch(i){case"allow":j.spanclass="label label-success allowed",j.linkclass="preventlink",j.action="prevent";break;case"prohibit":j.spanclass="label label-danger forbidden",j.linkclass="unprohibitlink",j.action="unprohibit";break;case"prevent":return void b.find('a[data-role-id="'+f+'"]').first().closest(".allowed").remove();case"unprohibit":return void b.find('a[data-role-id="'+f+'"]').first().closest(".forbidden").remove();default:return}d.render("core/permissionmanager_role",j).done(function(c){if("allow"==i)a(c).insertBefore(b.find(".allowmore:first"));else if("prohibit"==i){a(c).insertBefore(b.find(".prohibitmore:first"));var d=b.find(".allowedroles").first().find('a[data-role-id="'+f+'"]');d&&d.first().closest(".allowed").remove()}k.hide()}).fail(c.exception)}catch(l){c.exception(l)}}).fail(function(a,b,d){c.exception(d)})},n=function(b){b.preventDefault(),a("body").one("rolesloaded",function(){var e=a(b.currentTarget),g=e.data("action"),j=e.closest("tr.rolecap"),l={cap:j.data("humanname"),context:f},n=M.util.get_string("role"+g+"info","core_role",l);null===k&&(k=new M.core.dialogue({draggable:!0,modal:!0,closeButton:!0,width:"450px"})),k.set("headerContent",M.util.get_string("role"+g+"header","core_role"));var o,p,q=[];switch(g){case"allow":p=j.find(i.REMOVEROLE);break;case"prohibit":p=j.find(i.UNPROHIBIT)}for(o in h){var r="",s=p.filter("[data-role-id='"+o+"']").length;s&&(r="disabled");var t={roleid:o,rolename:h[o],disabled:r};q.push(t)}d.render("core/permissionmanager_panelcontent",{message:n,roles:q}).done(function(b){k.set("bodyContent",b),k.show(),a("div.role_buttons").delegate("input","click",function(b){var c=a(b.currentTarget).data("role-id");m(j,c,g)})}).fail(c.exception)}),l()},o=function(b){b.preventDefault(),a("body").one("rolesloaded",function(){var d=a(b.currentTarget),e=d.data("action"),g=d.data("role-id"),i=d.closest("tr.rolecap"),j={role:h[g],cap:i.data("humanname"),context:f};c.confirm(M.util.get_string("confirmunassigntitle","core_role"),M.util.get_string("confirmrole"+e,"core_role",j),M.util.get_string("confirmunassignyes","core_role"),M.util.get_string("confirmunassignno","core_role"),function(){m(i,g,e)})}),l()};return{initialize:function(b){e=b.contextid,f=b.contextname,g=b.adminurl;var c=a("body");c.delegate(i.ADDROLE,"click",n),c.delegate(i.REMOVEROLE,"click",o)}}});
define('core/event', ["jquery","core/yui"],function(a,b){return{notifyFilterContentUpdated:function(c){c=a(c),b.use("event","moodle-core-event",function(b){a("document").trigger(M.core.event.FILTER_CONTENT_UPDATED,c);var d=new b.NodeList(c.get());b.fire(M.core.event.FILTER_CONTENT_UPDATED,{nodes:d})})}}});
define('core/jqueryajaxhandler', ["core/str"],function(a){var b={success:function(a){a.responseJSON&&a.responseJSON.error&&YUI().use("moodle-core-notification-ajaxexception",function(){return new M.core.ajaxException(a.responseJSON).show()})},error:function(b,c){if("abort"!==b.statusText){var d=[];d.push({key:"accessdenied",component:"admin"}),d.push({key:"resourcenotfound",component:"admin"}),d.push({key:"unknownerror",component:"core"}),a.get_strings(d).done(function(a){for(var e=[],f=0;f<d.length;f++)e[d[f].key]=a[f];var g={debugginginfo:"",error:"",reproductionlink:"",stacktrace:""};b.hasOwnProperty("status")&&403===b.status?g.error=e.accessdenied:b.hasOwnProperty("status")&&404===b.status?g.error=e.resourcenotfound:g.error=e.unknownerror,c.hasOwnProperty("url")&&"string"==typeof c.url&&(g.reproductionlink=c.url),b.hasOwnProperty("stacktrace")&&"string"==typeof b.stacktrace&&(g.stacktrace=c.stacktrace),YUI().use("moodle-core-notification-ajaxexception",function(){return new M.core.ajaxException(g).show()})})}}};return b});
define('core/ajax', ["jquery","core/config"],function(a,b){var c=function(a){var b,c,d=this,e=null,f=0;for(f=0;f<d.length;f++){if(b=d[f],c=a[f],"undefined"==typeof c){e=new Error("missing response");break}if(c.error!==!1){e=c.exception;break}b.deferred.resolve(c.data)}if(null!==e)for(;f<d.length;f++)b=d[f],b.deferred.reject(e)},d=function(a,b){var c=this,d=0;for(d=0;d<c.length;d++){var e=c[d];"undefined"!=typeof e.fail&&e.deferred.reject(b)}};return{call:function(e,f,g){var h,i=[],j=[];for("undefined"==typeof g&&(g=!0),"undefined"==typeof f&&(f=!0),h=0;h<e.length;h++){var k=e[h];i.push({index:h,methodname:k.methodname,args:k.args}),k.deferred=a.Deferred(),j.push(k.deferred.promise()),"undefined"!=typeof k.done&&k.deferred.done(k.done),"undefined"!=typeof k.fail&&k.deferred.fail(k.fail),k.index=h}i=JSON.stringify(i);var l={type:"POST",data:i,context:e,dataType:"json",processData:!1,async:f,contentType:"application/json"},m=b.wwwroot+"/lib/ajax/service.php?sesskey="+b.sesskey;return g||(m=b.wwwroot+"/lib/ajax/service-nologin.php?sesskey="+b.sesskey),f?a.ajax(m,l).done(c).fail(d):(l.success=c,l.error=d,a.ajax(m,l)),j}}});
define('core/notification', ["core/yui"],function(a){return{alert:function(b,c,d){a.use("moodle-core-notification-alert",function(){var a=new M.core.alert({title:b,message:c,yesLabel:d});a.show()})},confirm:function(b,c,d,e,f){a.use("moodle-core-notification-confirm",function(){var a=new M.core.confirm({title:b,question:c,yesLabel:d,noLabel:e});a.on("complete-yes",function(){f()}),a.show()})},exception:function(b){b.backtrace&&(b.lineNumber=b.backtrace[0].line,b.fileName=b.backtrace[0].file,b.fileName="..."+b.fileName.substr(b.fileName.length-20),b.stack=b.debuginfo,b.name=b.errorcode),a.use("moodle-core-notification-exception",function(){var a=new M.core.exception(b);a.show()})}}});
!function(a,b){"object"==typeof exports&&exports&&"string"!=typeof exports.nodeName?b(exports):"function"==typeof define&&define.amd?define('core/mustache', ["exports"],b):(a.Mustache={},b(Mustache))}(this,function(a){function b(a){return"function"==typeof a}function c(a){return p(a)?"array":typeof a}function d(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function e(a,b){return null!=a&&"object"==typeof a&&b in a}function f(a,b){return q.call(a,b)}function g(a){return!f(r,a)}function h(a){return String(a).replace(/[&<>"'\/]/g,function(a){return s[a]})}function i(b,c){function e(){if(r&&!s)for(;q.length;)delete o[q.pop()];else q=[];r=!1,s=!1}function f(a){if("string"==typeof a&&(a=a.split(u,2)),!p(a)||2!==a.length)throw new Error("Invalid tags: "+a);h=new RegExp(d(a[0])+"\\s*"),i=new RegExp("\\s*"+d(a[1])),m=new RegExp("\\s*"+d("}"+a[1]))}if(!b)return[];var h,i,m,n=[],o=[],q=[],r=!1,s=!1;f(c||a.tags);for(var y,z,A,B,C,D,E=new l(b);!E.eos();){if(y=E.pos,A=E.scanUntil(h))for(var F=0,G=A.length;F<G;++F)B=A.charAt(F),g(B)?q.push(o.length):s=!0,o.push(["text",B,y,y+1]),y+=1,"\n"===B&&e();if(!E.scan(h))break;if(r=!0,z=E.scan(x)||"name",E.scan(t),"="===z?(A=E.scanUntil(v),E.scan(v),E.scanUntil(i)):"{"===z?(A=E.scanUntil(m),E.scan(w),E.scanUntil(i),z="&"):A=E.scanUntil(i),!E.scan(i))throw new Error("Unclosed tag at "+E.pos);if(C=[z,A,y,E.pos],o.push(C),"#"===z||"^"===z||"$"===z||"<"===z)n.push(C);else if("/"===z){if(D=n.pop(),!D)throw new Error('Unopened section "'+A+'" at '+y);if(D[1]!==A)throw new Error('Unclosed section "'+D[1]+'" at '+y)}else"name"===z||"{"===z||"&"===z?s=!0:"="===z&&f(A)}if(D=n.pop())throw new Error('Unclosed section "'+D[1]+'" at '+E.pos);return k(j(o))}function j(a){for(var b,c,d=[],e=0,f=a.length;e<f;++e)b=a[e],b&&("text"===b[0]&&c&&"text"===c[0]?(c[1]+=b[1],c[3]=b[3]):(d.push(b),c=b));return d}function k(a){for(var b,c,d=[],e=d,f=[],g=0,h=a.length;g<h;++g)switch(b=a[g],b[0]){case"$":case"<":case"#":case"^":e.push(b),f.push(b),e=b[4]=[];break;case"/":c=f.pop(),c[5]=b[2],e=f.length>0?f[f.length-1][4]:d;break;default:e.push(b)}return d}function l(a){this.string=a,this.tail=a,this.pos=0}function m(a,b){this.view=a,this.blocks={},this.cache={".":this.view},this.parent=b}function n(){this.cache={}}var o=Object.prototype.toString,p=Array.isArray||function(a){return"[object Array]"===o.call(a)},q=RegExp.prototype.test,r=/\S/,s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},t=/\s*/,u=/\s+/,v=/\s*=/,w=/\s*\}/,x=/#|\^|\/|>|\{|&|=|!|\$|</;l.prototype.eos=function(){return""===this.tail},l.prototype.scan=function(a){var b=this.tail.match(a);if(!b||0!==b.index)return"";var c=b[0];return this.tail=this.tail.substring(c.length),this.pos+=c.length,c},l.prototype.scanUntil=function(a){var b,c=this.tail.search(a);switch(c){case-1:b=this.tail,this.tail="";break;case 0:b="";break;default:b=this.tail.substring(0,c),this.tail=this.tail.substring(c)}return this.pos+=b.length,b},m.prototype.push=function(a){return new m(a,this)},m.prototype.setBlockVar=function(a,b){var c=this.blocks;return c[a]=b,b},m.prototype.clearBlockVars=function(){this.blocks={}},m.prototype.getBlockVar=function(a){var b,c=this.blocks;return c.hasOwnProperty(a)?b=c[a]:this.parent&&(b=this.parent.getBlockVar(a)),b},m.prototype.lookup=function(a){var c,d=this.cache;if(d.hasOwnProperty(a))c=d[a];else{for(var f,g,h=this,i=!1;h;){if(a.indexOf(".")>0)for(c=h.view,f=a.split("."),g=0;null!=c&&g<f.length;)g===f.length-1&&(i=e(c,f[g])),c=c[f[g++]];else c=h.view[a],i=e(h.view,a);if(i)break;h=h.parent}d[a]=c}return b(c)&&(c=c.call(this.view)),c},n.prototype.clearCache=function(){this.cache={}},n.prototype.parse=function(a,b){var c=this.cache,d=c[a];return null==d&&(d=c[a]=i(a,b)),d},n.prototype.render=function(a,b,c){var d=this.parse(a),e=b instanceof m?b:new m(b);return this.renderTokens(d,e,c,a)},n.prototype.renderTokens=function(a,b,c,d){for(var e,f,g,h="",i=0,j=a.length;i<j;++i)g=void 0,e=a[i],f=e[0],"#"===f?g=this.renderSection(e,b,c,d):"^"===f?g=this.renderInverted(e,b,c,d):">"===f?g=this.renderPartial(e,b,c,d):"<"===f?g=this.renderBlock(e,b,c,d):"$"===f?g=this.renderBlockVariable(e,b,c,d):"&"===f?g=this.unescapedValue(e,b):"name"===f?g=this.escapedValue(e,b):"text"===f&&(g=this.rawValue(e)),void 0!==g&&(h+=g);return h},n.prototype.renderSection=function(a,c,d,e){function f(a){return g.render(a,c,d)}var g=this,h="",i=c.lookup(a[1]);if(i){if(p(i))for(var j=0,k=i.length;j<k;++j)h+=this.renderTokens(a[4],c.push(i[j]),d,e);else if("object"==typeof i||"string"==typeof i||"number"==typeof i)h+=this.renderTokens(a[4],c.push(i),d,e);else if(b(i)){if("string"!=typeof e)throw new Error("Cannot use higher-order sections without the original template");i=i.call(c.view,e.slice(a[3],a[5]),f),null!=i&&(h+=i)}else h+=this.renderTokens(a[4],c,d,e);return h}},n.prototype.renderInverted=function(a,b,c,d){var e=b.lookup(a[1]);if(!e||p(e)&&0===e.length)return this.renderTokens(a[4],b,c,d)},n.prototype.renderPartial=function(a,c,d){if(d){if(a[1].startsWith("&&"))var e=c.lookup(a[1].substr(2)),f=b(d)?d(e):d[e];else var f=b(d)?d(a[1]):d[a[1]];return null!=f?this.renderTokens(this.parse(f),c,d,f):void 0}},n.prototype.renderBlock=function(a,c,d,e){if(d){var f=b(d)?d(a[1]):d[a[1]];null!=f&&c.clearBlockVars(),this.renderTokens(a[4],c,d,e);var g=this.renderTokens(this.parse(f),c,d,f);return c.clearBlockVars(),g}},n.prototype.renderBlockVariable=function(a,b,c,d){var e=a[1],f=b.getBlockVar(e);return f?this.renderTokens(this.parse(f),b,c,f):(b.setBlockVar(e,d.slice(a[3],a[5])),this.renderTokens(a[4],b,c,d))},n.prototype.unescapedValue=function(a,b){var c=b.lookup(a[1]);if(null!=c)return c},n.prototype.escapedValue=function(b,c){var d=c.lookup(b[1]);if(null!=d)return a.escape(d)},n.prototype.rawValue=function(a){return a[1]},a.name="mustache.js",a.version="2.1.3",a.tags=["{{","}}"];var y=new n;a.clearCache=function(){return y.clearCache()},a.parse=function(a,b){return y.parse(a,b)},a.render=function(a,b,d){if("string"!=typeof a)throw new TypeError('Invalid template! Template should be a "string" but "'+c(a)+'" was given as the first argument for mustache#render(template, view, partials)');return y.render(a,b,d)},a.to_html=function(c,d,e,f){var g=a.render(c,d,e);return b(f)?void f(g):g},a.escape=h,a.Scanner=l,a.Context=m,a.Writer=n});
define('core/log', ["core/loglevel"],function(a){var b=a.methodFactory;return a.methodFactory=function(a,c){var d=b(a,c);return function(a,b){d(b?b+": "+a:a)}},a.setConfig=function(b){"undefined"!=typeof b.level&&a.setLevel(b.level)},a});
define('core/flex_icon', ["jquery","core/config","core/localstorage","core/ajax"],function(a,b,c,d){var e=!1,f=!1,g=[],h=function(){var a="core_flex_icon/"+b.theme+"/cache";e=!0;var h=c.get(a);if(h)f=JSON.parse(h);else{var i=d.call([{methodname:"core_output_get_flex_icons",args:{themename:b.theme}}],!0,!1);i[0].done(function(b){c.set(a,JSON.stringify(b)),f=b;for(var d=0;d<g.length;d++)g[d].resolve()})}},i={loadingflex:[],loadingtranslation:[],getFlexTemplateData:function(c){var d=a.Deferred();if(this.loadingflex.length>0){for(var e in this.loadingflex)if(this.loadingflex[e].theme===b.theme&&this.loadingflex[e].identifier===c)return this.loadingflex[e].promise}else this.loadingflex.push({theme:b.theme,identifier:c,promise:d.promise()});var h=function(){if("undefined"==typeof f.icons[c])return void d.reject();var a=f.icons[c],b={data:f.datas[a[1]],template:f.templates[a[0]]};b.data.identifier=c,d.resolve(b)};if(f)h();else{var i=a.Deferred();i.done(function(){h()}),g.push(i)}return d.promise()}};return e||h(),i});
define('core/blocks', ["jquery","core/templates"],function(a,b){var c={init:function(c){function d(){var a=!f.hasClass("hidden");M.util.set_user_preference(c.preference,a),a?(f.addClass("hidden"),f.find(".block-hider-show").focus()):(f.removeClass("hidden"),f.find(".block-hider-hide").focus())}function e(a){a.preventDefault(),13==a.keyCode&&d(this)}var f=a("#"+c.id),g=f.find(".title"),h=f.find(".block_action");g&&h&&(b.renderIcon("block-hide",c.tooltipVisible).done(function(b){var f=a('<a href="#" title="'+c.tooltipVisible+'" class="block-hider-hide">'+b+"</a>");f.click(d),f.keypress(e),h.append(f)}),b.renderIcon("block-show",c.tooltipHidden).done(function(b){var f=a('<a href="#" title="'+c.tooltipHidden+'" class="block-hider-show">'+b+"</a>");f.click(d),f.keypress(e),h.append(f)}))}};return c});
define('core_elementlibrary/animate_scroll', ["jquery","core/log"],function(a,b){a.fn.animateScroll=function(c){c=a.extend({},a.fn.animateScroll.defaults,c);var d=a("html, body"),e=this.filter('a[href^="#"][href!="#"]');return e.on("click.animateScroll",function(e){e.preventDefault();var f=e.target.getAttribute("href"),g=a(f);if(g.length<1)return void b.debug("elementlibrary/pattern_library: Scroll target '"+f+"' not found in document");var h=g.first().offset().top+"px";d.stop().animate({"scroll-top":h},c.duration,c.easing)}),this},a.fn.animateScroll.defaults={duration:500,easing:"swing"}});
define('core_elementlibrary/competency_item', ["core/config","core/str"],function(a,b){var c={id:0,init:function(){var d=a.wwwroot+"/totara/hierarchy/prefix/competency/related/",e=[];e.push({key:"save",component:"totara_core"}),e.push({key:"cancel",component:"moodle"}),e.push({key:"assignrelatedcompetencies",component:"totara_hierarchy"}),b.get_strings(e).done(function(a){for(var b=[],f=0;f<e.length;f++)b[e[f].key]=a[f];var g=new totaraDialog_handler_treeview_multiselect,h={};h[b.save]=function(){g._dialog.hide()},h[b.cancel]=function(){g._cancel()},totaraDialogs[name]=new totaraDialog("related","show-related-dialog",{buttons:h,title:"<h2>"+b.assignrelatedcompetencies+"</h2>"},d+"find.php?id="+c.id,g)})}};return c});
define('core_elementlibrary/pattern_library', ["jquery","core_elementlibrary/animate_scroll"],function(a){return{init:function(){a('.pattern-library__nav a, a[href^="#"]').animateScroll(),a(".nav-tabs li a").on("click",function(a){a.preventDefault()})}}});
define('mod_facetoface/attendees_addremove', ["jquery","core/str","core/config"],function(a,b,c){var d={init:function(b){var c=a("a.viewbulkresults:first");c.length>0&&d.setupResultsDialog(c,b.s,b.listid),a("#add").click(function(b){b.preventDefault();var c=a("#addselect").find("option:selected");c.each(function(b,c){var d=0;a("#removeselect option").size()&&a("#removeselect option").each(function(b,e){a(e).data("idx")<a(c).data("idx")&&(d=a(e).data("idx"))}),d>0?a(c).insertAfter(a("#removeselect option[data-idx="+d+"]")):a("#removeselect").append(c)})}),a("#remove").click(function(b){b.preventDefault();var c=a("#removeselect").find("option:selected");c.each(function(b,c){var d=0;a("#addselect option").size()&&a("#addselect option").each(function(b,e){a(e).data("idx")<a(c).data("idx")&&(d=a(e).data("idx"))}),d>0?a(c).insertAfter(a("#addselect option[data-idx="+d+"]")):a("#addselect").append(c)})}),a("#interested").click(function(){a("form#assignform").submit()}),a("#searchtext, #searchtoremovetext").focus(function(){a("#add").attr("disabled","disabled"),a("#remove").attr("disabled","disabled")}),a("#removeselect").focus(function(){a("#add").attr("disabled","disabled"),a("#remove").removeAttr("disabled")}),a("#addselect").focus(function(){a("#add").removeAttr("disabled"),a("#remove").attr("disabled","disabled")}),a("#assignform").submit(function(){a("#removeselect option").prop("selected",!0)}),a("#searchtoremovetext").on("keyup keypress blur change",function(){var b=a("#searchtoremovetext").val();b.length>0?(a("#searchtoremovereset").show(),a("#removeselect option").each(function(c,d){var e=a(d);e.text().search(b)!==-1?e.show():e.hide()})):(a("#searchtoremovereset").hide(),a("#removeselect option").show())}),a("#searchtoremovereset").click(function(b){b.preventDefault(),a("#searchtoremovetext").val(""),a("#searchtoremovetext").trigger("change")})},setupResultsDialog:function(a,d,e){a.attr("id","viewbulkresults");var f=[];f.push({key:"bulkaddattendeesresults",component:"facetoface"}),f.push({key:"closebuttontitle",component:"moodle"}),b.get_strings(f).done(function(a){for(var b=new totaraDialog_handler,g=[],h=0;h<f.length;h++)g[f[h].key]=a[h];var i="bulkaddvalidation",j={};j[g.closebuttontitle]=function(){b._cancel()},totaraDialogs[i]=new totaraDialog(i,"viewbulkresults",{title:"<h2>"+g.bulkaddattendeesresults+"</h2>",buttons:j},c.wwwroot+"/mod/facetoface/attendees/bulkadd_results.php?s="+d+"&listid="+e,b)})}};return d});
define('mod_facetoface/attendees_addconfirm', ["jquery","core/yui","core/str","core/config"],function(a,b,c,d){var e={init:function(b){this.attachCustomClickEvents=function(){a("a.attendee-edit-job-assignment").on("click",function(){return a.get(a(this).attr("href"),function(a){e.editJobAssignmentModalForm(a)}),!1})},this.attachCustomClickEvents()},editJobAssignmentModalForm:function(c){b.use("panel",function(b){var d=new b.Panel({headerContent:null,bodyContent:c,width:600,zIndex:5,centered:!0,modal:!0,render:!0}),e=a("#"+d.get("id"));e.find('input[type="text"]').eq(0).focus(),e.find("#id_submitbutton").on("click",function(){var b=e.find("form.mform"),c=b.serialize();return c+="&submitbutton="+a(this).attr("value"),a.post(b.attr("action"),c).done(function(b){if("success"==b.result){var c="#jobassign"+b.id;a(c).html(b.jobassignmentdisplayname),d.destroy(!0)}else a("#attendee_job_assignment_err").text(b.error)}),!1}),e.find("#id_cancel").on("click",function(){return d.destroy(!0),!1}),d.show()})}};return e});
define('block_current_learning/current_learning', ["jquery","core/templates","core/notification","core/str","core/log"],function(a,b,c,d,e){var f,g=null,h=10,i=function(b,c){var e=parseInt(a(f+" .pagination li.active a").attr("data-page")),g=null;g="next"==c?e+1:"prev"==c?e-1:c;var i=b.learningitems.length,j=Math.ceil(i/h),k={},l=(g-1)*h+1;k.learningitems=b.learningitems.slice(l-1,l-1+h);var m=b.pagination;g>1?m.previousclass="":m.previousclass="disabled",g>=j?m.nextclass="disabled":m.nextclass="",m.pages.forEach(function(a){a.page==g?a.active="active":a.active=""});var n={},o=a.Deferred();n.start=(g-1)*h+1;var p=null;return p=b.pagination.totalitems<g*h?b.pagination.totalitems:g*h,n.end=p,n.total=b.pagination.totalitems,d.get_string("displayingxofx","block_current_learning",n).done(function(a){m.text=a,k.pagination=m,k.haslearningitems=!0,o.resolve(k)}).fail(function(a){o.reject(a)}),o.promise()},j=function(){a(f+" .pagination").on("click","a",function(d){d.preventDefault();var e=a(this),h=e.parent();if(h.hasClass("disabled"))return!1;var k=e.attr("data-page");i(g,k).done(function(d){b.render("block_current_learning/main_content",d).done(function(b){a(f+" .current-learning-content").html(b).trigger("block_current_learning:content_updated")}).fail(function(a){c.exception(a)}),b.render("block_current_learning/paging",d).done(function(b){a(f+" .panel-footer").replaceWith(b),j()}).fail(function(a){c.exception(a)})})})},k=function(){var b=f+' [data-toggle="tooltip"]';a(b).tooltip(),a(f+" .current-learning-content").on("block_current_learning:content_updated",function(c){a(b).tooltip()})},l=function(b){if(b.pagination.pages.length>1){var c=a(f+" .current-learning-content");c.css("min-height",c.outerHeight())}},m=function(c){f="#inst"+c.instanceid.toString(),c.pagination&&c.pagination.itemsperpage&&(h=c.pagination.itemsperpage);var i=!0;a.fn.collapse&&a.fn.tooltip||(e.debug("Current learning block requires Bootstrap 3 JavaScript, please include it or find your own solution."),i=!1),g=c;var m=["block_current_learning/main_content","block_current_learning/course_row","block_current_learning/program_row"];if(m.forEach(function(a){b.render(a,{})}),c.pagination){var n={pagination:{onepage:!1,previousclass:"disabled",nextclass:""}};b.render("block_current_learning/paging",n),d.get_string("displayingxofx","block_current_learning",{start:1,end:2,total:2}),j(),l(c)}i&&k()};return{init:m}});
define('block_totara_program_completion/block', ["jquery","core/str"],function(a,b){var c={init:function(c){var d=[];d.push({key:"more",component:"block_totara_program_completion"}),d.push({key:"less",component:"block_totara_program_completion"}),b.get_strings(d).done(function(b){for(var e=[],f=0;f<d.length;f++)e[d[f].key]=b[f];a(".block-totara-prog-completion-morelink"+c).on("click",function(b){b.preventDefault(),a(".block-prog-completions-list .more"+c).toggle(),a(this).text()==e.more?a(this).text(e.less):a(this).text(e.more)})})}};return c});
define('block_totara_program_completion/edit', ["jquery","core/config","core/str"],function(a,b,c){var d={blockid:null,programsselected:null,init:function(a,f){d.blockid=a,d.programsselected=f;var g=[];g.push({key:"save",component:"totara_core"}),g.push({key:"cancel",component:"moodle"}),g.push({key:"addprograms",component:"block_totara_program_completion"}),c.get_strings(g).done(function(a){for(var c=[],f=0;f<g.length;f++)c[g[f].key]=a[f];var h=b.wwwroot+"/blocks/totara_program_completion/",i=new e;i.baseurl=h;var j={};j[c.save]=function(){i._update()},j[c.cancel]=function(){i._cancel()},totaraDialogs.addblockprograms=new totaraDialog("addblockprograms","add-block-programs-dialog",{buttons:j,title:"<h2>"+c.addprograms+"</h2>"},h+"findprograms.php?selected="+d.programsselected+"&blockid="+d.blockid+"&sesskey="+b.sesskey,i)})}},e=function(){this.baseurl="",this.program_items=a('input:hidden[name="config_programids"]').val(),this.program_items=this.program_items&&this.program_items.length>0?this.program_items.split(","):[],this.program_table=a("#block-programs-table"),this.add_program_delete_event_handlers(),this.check_table_hidden_status()};return e.prototype=new totaraDialog_handler_treeview_multiselect,e.prototype._update=function(c){var d=this,e=a(".selected > div > span",this._container),f=this._get_ids(e),g=f.join(","),h=this._dialog.default_url.split("selected="),i=h[1].slice(h[1].indexOf("&"));this._dialog.default_url=h[0]+"selected="+g+i;var j=[];if(a(f).each(function(a,b){d.program_item_exists(b)||(j.push(b),d.add_program_item(b))}),j.length>0){this._dialog.showLoading();var k=b.wwwroot+"/blocks/totara_program_completion/program_item.php?itemid="+j.join(",")+i;a.getJSON(k,function(b){return b.error?(d._dialog.hide(),void alert(b.error)):(a.each(b.items,function(a,b){d.create_item(b)}),void d._dialog.hide())})}else this._dialog.hide()},e.prototype.program_item_exists=function(a){for(var b in this.program_items)if(this.program_items[b]==a)return!0;return!1},e.prototype.check_table_hidden_status=function(){0==this.program_items.length?a(this.program_table).hide():a(this.program_table).show()},e.prototype.add_program_delete_event_handlers=function(){a(".blockprogramdeletelink",this.program_table).unbind("click");var b=this;this.program_table.on("click",".blockprogramdeletelink",function(a){a.preventDefault(),b.remove_program_item(this)})},e.prototype.add_program_item=function(b){this.program_items.push(b),a('input:hidden[name="config_programids"]').val(this.program_items.join(",")),this.check_table_hidden_status()},e.prototype.create_item=function(b){var c=a(b);this.program_table.append(c)},e.prototype.remove_program_item=function(b){var c=a(b).closest("li"),d=c.data("progid");this.program_items=a.grep(this.program_items,function(a,b){return a==d},!0),c.remove(),this.check_table_hidden_status(),a('input:hidden[name="config_programids"]').val(this.program_items.join(","));var e=this._dialog.default_url.split("selected="),f=e[1].slice(e[1].indexOf("&"));this._dialog.default_url=e[0]+"selected="+this.program_items.join(",")+f},d});
define('block_totara_report_table/module', ["jquery","core/config","core/templates"],function(a,b,c){var d={change_links:function(e,f){var g=null;a(".block_totara_report_table."+e+" .content .rb-display-table-container").find("div.paging a, th.header a").each(function(){a(this).click(function(h){h.preventDefault();var i=a(this),j=i.attr("href"),k=j.slice(j.indexOf("?")+1);k+="&sesskey="+b.sesskey+"&blockid="+f,g&&g.abort(),0===a(h.target).siblings(".instantreportwait").length&&c.renderIcon("loading","","ft-size-600").done(function(b){var c=a('<div class="instantreportwait">'+b+"</div>"),d=a(".block_totara_report_table."+e+" .content .rb-display-table-container"),f=d.offset();a(h.target).closest(".rb-display-table-container").append(c),f.left+=d.width()/2-c.width()/2,f.top+=d.height()/2-c.height()/2,c.css(f)}),g=d.refresh_results(e,k,function(){d.change_links(e,f)})})})},refresh_results:function(c,d,e){return a.get(b.wwwroot+"/blocks/totara_report_table/ajax_instantreport.php?"+d).done(function(b){var d=a(".block_totara_report_table."+c+" .content");d.find(".instantreportwait").remove(),d.find(".rb-display-table-container").remove(),d.prepend(a(b).find(".rb-display-table-container")),d.find("form").remove(),e&&e()})},populatelist:function(){var c=a("#id_config_savedsearch");a("#id_config_reportid").change(function(){var d=a(this).val();""!==d&&(c.attr("disabled","disabled"),a.ajax({type:"POST",url:b.wwwroot+"/blocks/totara_report_table/ajax_list_saved.php",data:{reportid:d,sesskey:M.cfg.sesskey},success:function(a){c.find("option").remove(),c.append('<option value="">'+M.util.get_string("allavailabledata","block_totara_report_table")+"</option>");for(var b in a)c.append('<option value="'+b+'">'+a[b]+"</option>");c.removeAttr("disabled")}}))})}};return d});
define('totara_appraisal/myappraisal', ["jquery","core/str","core/config"],function(a,b,c){var d={config:{},init:function(b){b&&(d.config=a.parseJSON(b));var c=a("input#id_submitbutton").closest("form"),e=a("<input>").attr({type:"hidden",name:"submitaction"}).val("saveprogress"),f=a("<input>").attr({type:"hidden",name:"submitaction"}).val("completestage");a("#saveprogress").on("submit",function(a){window.onbeforeunload=null,a.preventDefault(),c.append(e),c.submit()}),a("#completestage").on("submit",function(a){window.onbeforeunload=null,a.preventDefault(),c.append(f),c.submit()}),window.dialogsInited?(d.stagesSelectDialog(),d.savePdfDialog()):(a.isArray(window.dialoginits)||(window.dialoginits=[]),window.dialoginits.push(this.stagesSelectDialog),window.dialoginits.push(this.savePdfDialog)),setInterval(d.keepAlive,1e3*d.config.keepalivetime)},stagesSelectDialog:function(){var e=new totaraDialog_handler;e._print=function(b,d){var f=a("#printform").serialize();M.util.help_popups.setup(Y);var g={name:"printpopup",url:c.wwwroot+"/totara/appraisal/snapshot.php?"+f,options:"height=500,width=600,top=100,left=100,menubar=0,location=0,scrollbars,resizable,toolbar,status,directories=0,dependent"};openpopup(b,g),e._cancel()};var f={appraisalid:d.config.appraisalid,role:d.config.role,subjectid:d.config.subjectid,action:"stages"},g=a.param(f),h=[];h.push({key:"printnow",component:"totara_appraisal"}),h.push({key:"cancel",component:"moodle"}),h.push({key:"printyourappraisal",component:"totara_appraisal"}),b.get_strings(h).done(function(a){for(var b=[],d=0;d<h.length;d++)b[h[d].key]=a[d];var f={};f[b.printnow]=function(a){e._print(a,c.wwwroot+"/totara/appraisal/snapshot.php?"+g)},f[b.cancel]=function(){e._cancel()},totaraDialogs.print=new totaraDialog("print","show-print-dialog",{buttons:f,title:"<h2>"+b.printyourappraisal+"</h2>"},c.wwwroot+"/totara/appraisal/snapshot.php?"+g,e)})},savePdfDialog:function(){var e=new totaraDialog_handler;e._download=function(){var b=a("#downloadurl").val();b&&(window.location.href=b,e._cancel())},e._open=function(){e._dialog.dialog.html(b.get_string("snapshotgeneration","totara_appraisal"))};var f={appraisalid:d.config.appraisalid,role:d.config.role,subjectid:d.config.subjectid,action:"snapshot",sesskey:c.sesskey},g=a.param(f),h=[];h.push({key:"downloadnow",component:"totara_appraisal"}),h.push({key:"cancel",component:"moodle"}),h.push({key:"snapshotdialogtitle",component:"totara_appraisal"}),b.get_strings(h).done(function(a){for(var b=[],d=0;d<h.length;d++)b[h[d].key]=a[d];var f={};f[b.downloadnow]=function(){e._download()},f[b.cancel]=function(){e._cancel()},totaraDialogs.savepdf=new totaraDialog("savepdf","show-savepdf-dialog",{buttons:f,title:"<h2>"+b.snapshotdialogtitle+"</h2>",height:"200"},c.wwwroot+"/totara/appraisal/snapshot.php?"+g,e)})},keepAlive:function(){a.get(c.wwwroot+"/totara/appraisal/keepalive.php")}};return d});
define('totara_cohort/assignroles', ["jquery"],function(a){var b={init:function(){a("#selectallnoneroles").click(function(){a(".selectedroles").prop("checked",!a(".selectedroles").prop("checked"))})}};return b});
define('totara_core/datatable', ["jquery","core/str","core/config","totara_core/jquery.dataTables-lazy"],function(a,b,c){var d={init:function(d,e,f){var g=[];g.push({key:"datatable:sEmptyTable",component:"totara_core"}),g.push({key:"datatable:sInfo",component:"totara_core"}),g.push({key:"datatable:sInfoEmpty",component:"totara_core"}),g.push({key:"datatable:sInfoFiltered",component:"totara_core"}),g.push({key:"datatable:sInfoPostFix",component:"totara_core"}),g.push({key:"datatable:sInfoThousands",component:"totara_core"}),g.push({key:"datatable:sLengthMenu",component:"totara_core"}),g.push({key:"datatable:sLoadingRecords",component:"totara_core"}),g.push({key:"datatable:sProcessing",component:"totara_core"}),g.push({key:"datatable:sSearch",component:"totara_core"}),g.push({key:"datatable:sZeroRecords",component:"totara_core"}),g.push({key:"datatable:oPaginate:sFirst",component:"totara_core"}),g.push({key:"datatable:oPaginate:sLast",component:"totara_core"}),g.push({key:"datatable:oPaginate:sNext",component:"totara_core"}),g.push({key:"datatable:oPaginate:sPrevious",component:"totara_core"}),b.get_strings(g).done(function(b){for(var h=[],i=0;i<g.length;i++)h[g[i].key]=b[i];a(document).ready(function(){a("#datatable").dataTable({searchDelay:500,bProcessing:!0,bServerSide:!0,sPaginationType:"full_numbers",sAjaxSource:c.wwwroot+"/totara/"+d+"/lib/assign/ajax.php",fnServerParams:function(a){a.push({name:"module",value:d}),a.push({name:"suffix",value:e}),a.push({name:"itemid",value:f}),a.push({name:"sesskey",value:c.sesskey})},oLanguage:{sEmptyTable:h["datatable:sEmptyTable"],sInfo:h["datatable:sInfo"],sInfoEmpty:h["datatable:sInfoEmpty"],sInfoFiltered:h["datatable:sInfoFiltered"],sInfoPostFix:h["datatable:sInfoPostFix"],sInfoThousands:h["datatable:sInfoThousands"],sLengthMenu:h["datatable:sLengthMenu"],sLoadingRecords:h["datatable:sLoadingRecords"],sProcessing:h["datatable:sProcessing"],sSearch:h["datatable:sSearch"],sZeroRecords:h["datatable:sZeroRecords"],oPaginate:{sFirst:h["datatable:oPaginate:sFirst"],sLast:h["datatable:oPaginate:sLast"],sNext:h["datatable:oPaginate:sNext"],sPrevious:h["datatable:oPaginate:sPrevious"]}}})})})}};return d});
define('totara_core/totaramenu', ["jquery"],function(a){var b=function(b){"string"==typeof b&&(b=a(b)),b.on("focus","> ul > li > a",function(){var b=a(this);b.closest("ul").find("ul").removeAttr("style"),b.siblings("ul").show()})};return{setFocus:b}});
define('totara_customfield/field_location_loader', function(){function a(){return b+=1}var b=0;return{load:function(b,c,d,e){var f,g,h;e.isBuild?d():(f="___location_callback"+a(),window[f]=d,g=document.createElement("script"),g.setAttribute("type","text/javascript"),g.setAttribute("async",!0),g.setAttribute("src","https://maps.google.com/maps/api/js?"+b+"&callback="+f),h=document.getElementsByTagName("script")[0],h.parentNode.insertBefore(g,h))}}});
define('totara_customfield/field_location', ["jquery"],function(a){function b(b,c){function d(a,b){return c[a]&&"undefined"!==c[a]&&""!==c[a]?c[a]:b}this.google=b,this.clientid=d("clientid",!1),this.apikey=d("apikey",!1),this.fieldprefix=d("fieldprefix",""),this.fordisplay=d("fordisplay",!1),this.regionbias=d("regionbias",""),this.defaultzoomlevel=d("defaultzoomlevel",12),this.address="",this.location={lat:null,lng:null},this.view=null,this.map=null,this.marker=null,this.input_address=a("#id_"+this.fieldprefix+"address"),this.input_latitude=a("#"+this.fieldprefix+"latitude"),this.input_longitude=a("#"+this.fieldprefix+"longitude"),this.input_zoom=a("#"+this.fieldprefix+"zoom"),this.fieldset=null,this.fordisplay||this.wireDefinitionControls();var e=a("#"+this.fieldprefix+"room-location-view"),f=a("#"+this.fieldprefix+"location_map");if(f.length){if(!this.input_latitude.length)return void f.hide();if(this.location.lat=parseFloat(this.input_latitude.val()),!this.input_longitude.length)return void f.hide();this.location.lng=parseFloat(this.input_longitude.val()),this.fieldset=f.closest("fieldset.collapsible.collapsed"),this.fieldset.length&&(window.form_fieldset_expand=window.form_fieldset_expand||[],window.form_fieldset_expand.push({context:this,callback:this.fieldSetRefreshMap}),this.fieldset.attr("data-location-refresh-"+this.fieldprefix,"true")),this.input_zoom.length?this.location.zoom=parseInt(this.input_zoom.val()):this.location.zoom=this.defaultzoomlevel,this.input_address.length&&(this.address=this.input_address.val().trim()),e.length?"map"==e.val()?this.view=this.google.maps.MapTypeId.ROADMAP:"satellite"==e.val()?this.view=this.google.maps.MapTypeId.SATELLITE:this.view=this.google.maps.MapTypeId.HYBRID:this.view=this.google.maps.MapTypeId.ROADMAP,this.load_map()}}return b.prototype.fieldSetRefreshMap=function(b){this.map&&"true"===a(b).attr("data-location-refresh-"+this.fieldprefix)&&(a(b).attr("data-location-refresh-"+this.fieldprefix,"false"),this.google.maps.event.trigger(this.map,"resize"),this.location.lat=parseFloat(this.input_latitude.val()),this.location.lng=parseFloat(this.input_longitude.val()),this.map.panTo(this.location))},b.prototype.wireDefinitionControls=function(){var b=this,c=this.fordisplay,d=this.input_address,e=a("#id_"+this.fieldprefix+"addresslookup"),f=a('.radio_view[name="'+this.fieldprefix+'view"]'),g=a("#id_"+this.fieldprefix+"searchaddress_btn"),h=a("#id_"+this.fieldprefix+"useaddress_btn");g&&g.on("click",function(){b.address=e.val().trim(),b.geocode_address()}),e&&g&&(b.address=e.keydown(function(a){if(13===a.keyCode)return a.preventDefault(),g.click(),!1})),h&&h.on("click",function(){b.address=d.val().trim(),b.geocode_address()}),f&&f.on("change",function(){this.id.indexOf(b.fieldprefix)>-1&&(b.defaultzoomlevel=b.map.getZoom(),b.set_map_view(),b.load_map(c))})},b.prototype.set_map_view=function(){var b=this,c=a('.radio_view[name="'+this.fieldprefix+'view"]:checked');c.each(function(a,c){if(c.id.indexOf(b.fieldprefix)>-1)switch(c.value){case"hybrid":b.map.setMapTypeId(b.google.maps.MapTypeId.HYBRID),b.view=b.google.maps.MapTypeId.HYBRID;break;case"satellite":b.map.setMapTypeId(b.google.maps.MapTypeId.SATELLITE),b.view=b.google.maps.MapTypeId.SATELLITE;break;default:b.map.setMapTypeId(b.google.maps.MapTypeId.ROADMAP),b.view=b.google.maps.MapTypeId.ROADMAP}})},b.prototype.geocode_address=function(){var b=this,c=this.url_encode_address(this.address),d="https://maps.googleapis.com/maps/api/geocode/json?address="+c+"&region="+this.regionbias;""!==c&&(this.clientid?d+="&client="+this.clientid:this.apikey&&(d+="&key="+this.apikey),a.ajax({url:d,type:"GET",success:function(c,d){"success"==d&&c.results.length>0?(b.address=c.results[0].formatted_address,b.location=c.results[0].geometry.location,b.load_map(),a("#fgroup_id_"+b.fieldprefix+"mapelements .felement .alert").hide()):0===a("#fgroup_id_"+b.fieldprefix+"mapelements .felement .alert").length?require(["core/templates","core/str"],function(c,d){d.get_string("locationnotfound","totara_customfield").done(function(d){c.render("core/notification_problem",{message:d}).done(function(c){a("#fgroup_id_"+b.fieldprefix+"mapelements .felement").prepend(c)})})}):a("#fgroup_id_"+b.fieldprefix+"mapelements .felement .alert").show()},error:function(){window.console&&window.console.log&&window.console.log("Failed to load Google maps API.")}}))},b.prototype.get_zoom_level=function(){return parseInt(this.input_zoom.val())},b.prototype.load_map=function(a){if(a="undefined"!=typeof a?a:this.fordisplay,null!==this.location.lat){var b,c=this,d={center:this.location,zoomControl:!0,mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,rotateControl:!1,mapTypeId:this.view,zoom:this.get_zoom_level()},e="";if(this.map=new this.google.maps.Map(document.getElementById(this.fieldprefix+"location_map"),d),a||this.set_map_view(),this.marker=new this.google.maps.Marker({position:this.location,map:this.map,draggable:!a}),this.input_latitude.val(this.location.lat),this.input_longitude.val(this.location.lng),a){if(!(null!==this.address&&this.address.length>0))return;e=this.address,b=new this.google.maps.InfoWindow({content:e}),this.marker.addListener("click",function(){b.open(c.map,c.marker)})}else this.marker.addListener("drag",function(a){c.input_latitude.val(a.latLng.lat()),c.input_longitude.val(a.latLng.lng())}),this.map.addListener("zoom_changed",function(a){c.input_zoom.val(c.map.getZoom())})}},b.prototype.url_encode_address=function(a){return a.replace(/\s+/g,"+")},{init:function(a){require(["totara_customfield/field_location_loader!"+a.mapparams],function(){new b(google,a)})}}});
define('totara_form/form_element_url', ["totara_form/form_element_text"],function(a){function b(c,d,e,f){return this instanceof b?void a.apply(this,arguments):new b(c,d,e,f)}return b.prototype=Object.create(a.prototype),b.prototype.constructor=b,b.prototype.toString=function(){return"[object URLElement]"},b.prototype.Name="URL",b});
define('totara_form/form_element_yesno', ["totara_form/form_element_radios"],function(a){function b(c,d,e,f){return this instanceof b?void a.apply(this,arguments):new b(c,d,e,f)}return b.prototype=Object.create(a.prototype),b.prototype.constructor=b,b.prototype.toString=function(){return"[object YesNoElement]"},b.prototype.Name="YesNo",b});
define('totara_form/form_clientaction_hidden_if', ["totara_form/form","totara_form/clientaction_base"],function(a,b){var c=function(){this.comparisons=[],b.apply(this,arguments)};return c=a.extend(b,c,{init:function(){var b,d;if(this.actionconfig.comparisons)for(b in this.actionconfig.comparisons)this.actionconfig.comparisons.hasOwnProperty(b)&&(d=this.actionconfig.comparisons[b],this.watchedIds.push(d.element),d.element=this.form.getElementById(d.element),this.comparisons.push(d));a.debug("Registered HiddenIf with "+this.comparisons.length+" comparisons",c,a.LOGLEVEL.debug)},enforce:function(){a.debug("Enforcing HiddenIf rule on #"+this.target.getId(),this,a.LOGLEVEL.info),this.target.setHidden(!0)},cease:function(){a.debug("Ceasing enforcement of HiddenIf rule on #"+this.target.getId(),this,a.LOGLEVEL.info),this.target.setHidden(!1)},checkState:function(){var a,b,c,d,e=this.getCurrentState(),f=!1;for(a in this.comparisons)if(this.comparisons.hasOwnProperty(a)&&(b=this.comparisons[a],c=[b.operator].concat(b.options),d=b.element.compare.apply(b.element,c),d===!0)){f=!0;break}f?e||this.enforce():e&&this.cease()},getCurrentState:function(){return this.target.isHidden()}}),{init:function(a,b,d){var e=new c(a,b);e.init(),d(e)}}});
define('totara_form/element_generic', ["totara_form/form"],function(a){function b(c,d,e,f){return this instanceof b?void a.Element.apply(this,arguments):new b(c,d,e,f)}return b.prototype=Object.create(a.Element.prototype),b.prototype.constructor=b,b.prototype.toString=function(){return"[object GenericElement]"},b.prototype.init=function(a){a()},b.prototype.getValue=function(){return null},b});
define('totara_form/form_element_textarea', ["jquery","totara_form/form_element_text"],function(a,b){function c(a,d,e,f){return this instanceof c?void b.apply(this,arguments):new c(a,d,e,f)}return c.prototype=Object.create(b.prototype),c.prototype.constructor=c,c.prototype.toString=function(){return"[object TextAreaElement]"},c.prototype.Name="Textarea",c});
define('totara_form/element_filepicker', ["core/yui"],function(a){return M.totara_form=M.totara_form||{},M.totara_form.element_filepicker=M.totara_form.element_filepicker||{},M.totara_form.element_filepicker.instances=M.totara_form.element_filepicker.instances||[],M.totara_form.element_filepicker.callback=function(a){var b='<div class="filepicker-container"><a href="'+a.url+'">'+a.file+"</a></div>";b+='<div class="dndupload-progressbars"></div>',M.totara_form.element_filepicker.Y.one("#file_info_"+a.client_id+" .filepicker-filename").setContent(b);var c=M.core_filepicker.instances[a.client_id].options.elementname;M.totara_form.element_filepicker.instances[c].fileadded=!0},M.totara_form.element_filepicker.init=function(a,b){M.totara_form.element_filepicker.Y=a,M.totara_form.element_filepicker.instances[b.elementname]={},M.totara_form.element_filepicker.instances[b.elementname].fileadded=!1,b.formcallback=M.totara_form.element_filepicker.callback,M.core_filepicker.instances[b.client_id]||M.core_filepicker.init(a,b),a.on("click",function(a,b){a.preventDefault(),null===this.ancestor(".fitem.disabled")&&M.core_filepicker.instances[b].show()},"#filepicker-button-"+b.client_id,null,b.client_id);var c=document.getElementById("filepicker-wrapper-"+b.client_id);c&&(c.style.display="");var d={clientid:b.client_id,acceptedtypes:b.accepted_types,author:b.author,maxfiles:-1,maxbytes:b.maxbytes,itemid:b.itemid,repositories:b.repositories,formcallback:b.formcallback,containerprefix:"#file_info_",containerid:"file_info_"+b.client_id,contextid:b.context.id};M.form_dndupload.init(a,d)},{init_filepicker:function(b){a.use(["core_filepicker","node","node-event-simulate","core_dndupload"],function(a){M.core_filepicker.set_templates(a,b.fptemplates),b.fptemplates=null,M.totara_form.element_filepicker.init(a,b)})}}});
define('totara_form/form_element_filepicker', ["jquery","core/yui","totara_form/form"],function(a,b,c){function d(a,b,e,f){return this instanceof d?(c.Element.apply(this,arguments),void(this.input=null)):new d(a,b,e,f)}return d.prototype=Object.create(c.Element.prototype),d.prototype.constructor=d,d.prototype.toString=function(){return"[object FilePickerElement]"},d.prototype.init=function(b){this.input=a("#"+this.id);var d={};try{d=this.input.data("fpoptions")}catch(e){throw c.debug("Failed to pick up FilePicker options from data attribute.",this,c.LOGLEVEL.error),e}return""===d?(c.debug("FilePicker initialisation skipped as it was frozen.",this,c.LOGLEVEL.error),void b()):void require(["totara_form/element_filepicker"],function(a){a.init_filepicker(d),b()})},d});
define('totara_form/form', ["jquery","core/config","core/templates","core/notification"],function(a,b,c,d){function e(a,b,c,d){return this instanceof e?(this.parent=a,this.type=b,this.id=c,void(this.node=d)):new e(a,b,c,d)}function f(){this.elements={}}function g(a,b,c){return this instanceof g?(e.call(this,a,"totara_form\\form\\group",b,c),void f.call(this)):new g(a,b,c)}function h(c){return this instanceof h?(["el"].forEach(function(a){if(!c.hasOwnProperty(a)){var b='Missing required config property "'+a+'"';throw new Error(b)}}),this.node=c.el,this.id=c.el.getAttribute("id"),this.clientActions=[],this.actionListeners=[],this.form=a(this.node),this.form.data("TotaraForm",this),this.form.attr("action")===b.wwwroot+"/totara/form/ajax.php"&&(j.debug("Form submission for "+this.id+" is being directed via ajaxSubmit",this,j.LOGLEVEL.info),this.form.on("submit.ajaxSubmit",a.proxy(function(a){a.preventDefault(),this.ajaxSubmit(this.form.find("input[type=submit]:focus"))},this))),void f.call(this)):new h(c)}var i=!(!window.console||!b.hasOwnProperty("developerdebug"))&&b.developerdebug;e.prototype={toString:function(){return"[object Element]"},init:function(a){a()},getId:function(){return this.id},getType:function(){return this.type},getNode:function(){return this.node},getValue:function(){return null},compare:function(a){var b=this.getValue(),c=[b].concat(Array.prototype.slice.call(arguments));return h.prototype.compare.apply(null,c)},isEmpty:function(){var a=this.getValue();return null===a||""===a||0===a||a===[]||a===[]||!!a.hasOwnProperty("isEmpty")&&a.isEmpty()},isHidden:function(){return null!==this.node.getAttribute("data-hidden")},setHidden:function(a){a?(j.debug("#"+this.id+" is now hidden",this,j.LOGLEVEL.debug),this.node.setAttribute("data-hidden","")):(j.debug("#"+this.id+" is no longer hidden",this,j.LOGLEVEL.debug),this.node.removeAttribute("data-hidden"))},changed:function(a){this.getForm().valueChanged(this.getId(),this.getValue())},disable:function(){return!!this.input&&(this.input.setAttribute("disabled",""),!0)},enable:function(){return!!this.input&&(this.input.removeAttribute("disabled"),!0)},isDisabled:function(){return this.input?null!==this.input.getAttribute("disabled"):null},isEnabled:function(){return this.input?null===this.input.getAttribute("disabled"):null},getForm:function(){var a=0,b=function(c){if(a++,a>10)throw"Coding error: element nesting is too deep!";return c.hasOwnProperty("parent")?b(c.parent):c};return b(this.parent)}},f.prototype={registerItem:function(a){i&&this.elements[a.getId()]&&j.debug("Item being registered already exists #"+a.getId(),f,j.LOGLEVEL.error),this.elements[a.getId()]=a},registerGroup:function(a,b){this.registerItem(a);var c=!0;if(i){var d=3e3;window.setTimeout(function(){c===!0&&j.debug("Element #"+a.getId()+" failed to call done() in "+d+"ms",a,j.LOGLEVEL.error)},d)}j.debug("Registered group #"+a.getId()+" of type "+a.getType(),a,j.LOGLEVEL.debug),a.init(function(){j.debug("Completed initialisation of #"+a.getId(),a,j.LOGLEVEL.debug),c=!1,b.resolve(a)})},registerElement:function(a,b){this.registerItem(a);var c=!0;if(i){var d=3e3;window.setTimeout(function(){c===!0&&j.debug("Element #"+a.getId()+" failed to call done() in "+d+"ms",a,j.LOGLEVEL.error)},d)}j.debug("Registered element #"+a.getId()+" of type "+a.getType(),a,j.LOGLEVEL.debug),a.init(function(){j.debug("Completed initialisation of #"+a.getId(),a,j.LOGLEVEL.debug),c=!1,b.resolve(a)})},filterItems:function(b,c,d){var e=[],f=[];if(void 0===d&&(d=0),d++,d>6)return j.debug("Filtering depth exceeds known limits, coding error!",this,j.LOGLEVEL.error),e;if(d>4&&j.debug("Filtering depth nearing limit, check you need this level of depth!",this,j.LOGLEVEL.warn),"function"!=typeof b)throw new Error("You must provide a filter function for filterItems()");for(var h in this.elements)if(this.elements.hasOwnProperty(h)){var i=this.elements[h];b(i)===!0&&(e[h]=i),c===!0&&i instanceof g&&(f=i.filterItems(b,!0,d),e=a.extend(e,f))}return e},getElements:function(a){return this.filterItems(function(a){return!(a instanceof g)&&a instanceof e},a)},getGroups:function(a){return this.filterItems(function(a){return a instanceof g},a)},getElementById:function(a){var b=this.getElements(!0);return b[a]},getGroupById:function(a){var b=this.getGroups(!0);return b[a]},getItemById:function(b){var c=a.extend(this.getElements(!0),this.getGroups(!0));return c[b]},map:function(a){var b=this.elements,c=[];for(var d in b)b.hasOwnProperty(d)&&c.push(a(b[d]));return c},disable:function(){return this.map(function(a){a.disable()}),this},enable:function(){return this.map(function(a){a.enable()}),this},isDisabled:function(){var a=this.map(function(a){return a.isDisabled()});return a.indexOf(!1)===-1},isEnabled:function(){var a=this.map(function(a){return a.isEnabled()});return a.indexOf(!1)===-1},isValid:function(){return this.getElements(!0).every(function(a){if("function"!=typeof a.isValid)return!0;var b=a.isValid();return b||"function"!=typeof a.displayError||a.displayError(),b})},toString:function(){return"[object ElementCollection]"},findItemNodes:function(b){var c=j.attributeIdentifiers.CLASSIFICATION+'="'+j.itemIdentifiers.ELEMENT+'"',d=j.getDataAttributeSelector(c),e=j.attributeIdentifiers.CLASSIFICATION+'="'+j.itemIdentifiers.GROUP+'"',f=j.getDataAttributeSelector(e),g=a(b),h=g.find([d,f].join(", ")).get();return h=Array.prototype.filter.call(h,function(b){return 0===a(b).parentsUntil(g,f).length})},getItemNodes:function(){return this.findItemNodes(this.node)},initGroup:function(b){var c,d,e=this,f={},h=j.attributeIdentifiers,i=a.Deferred();if([h.TYPE,h.ID,h.MODULE].forEach(function(a){f[a.split("-").pop()]=b.getAttribute(a)}),f.module)require([f.module],function(c){var d=new c(e,f.id,b),g=d.getItemNodes(),h=a.Deferred();e.registerGroup(d,h),h.done(function(){d.initItems(g).then(function(){i.resolve()},function(a){j.debug("Failed to initialise the items within a group of type "+f.module,e,j.LOGLEVEL.error),i.reject()})})});else{c=new g(this,f.id,b),d=c.getItemNodes();var k=a.Deferred();this.registerGroup(c,k),k.done(function(){c.initItems(d).done(function(){i.resolve()})})}return i.promise()},initElement:function(b){var c=this,d=a.Deferred(),e={},f=j.attributeIdentifiers;return[f.TYPE,f.ID,f.MODULE].forEach(function(a){e[a.split("-").pop()]=b.getAttribute(a)}),e.module||(e.module="totara_form/element_generic"),require([e.module],function(a){var f=new a(c,e.type,e.id,b);c.registerElement(f,d)}),d.promise()},initItems:function(b){var c=Array.prototype.map.call(b,function(a){return a.getAttribute(j.attributeIdentifiers.CLASSIFICATION)===j.itemIdentifiers.GROUP?this.initGroup(a):a.getAttribute(j.attributeIdentifiers.CLASSIFICATION)===j.itemIdentifiers.ELEMENT?this.initElement(a):void 0},this);return a.when.apply(a,c)}},g.prototype=Object.create(e.prototype),a.extend(g.prototype,f.prototype),g.prototype.constructor=g,g.prototype.toString=function(){return"[object Group]"},g.prototype.init=function(a){a()},h.prototype=Object.create(f.prototype),h.prototype.constructor=h,a.extend(h.prototype,{toString:function(){return"[object Form]"},initClientActions:function(b){var c=this,d=b.map(function(a){return c.initClientAction(a).done(function(a){c.clientActions.push(a)})});return a.when.apply(a,d).done(function(){c.checkAllClientActionStates()})},initClientAction:function(b){var c=this,d=a.Deferred(),e=this.convertTypeToModule(b.actionType);if(!e)throw new Error("Unknown action of type ["+b.actionType+"]");return require([e],function(a){a.init(b,c,function(a){d.resolve(a)})}),d.promise()},convertTypeToModule:function(a){var b=a.split("\\"),c=b[0],d=b.slice(1).join("_"),e=c+"/"+d;return j.debug("Found module to be ["+e+"] from type ["+a+"] by split.",h,j.LOGLEVEL.debug),e},checkModuleExists:function(a){return require.specified(a)},valueChanged:function(a){j.debug("Value of #"+a+" changed",this,j.LOGLEVEL.info),this.checkClientActionState(a)},checkClientActionState:function(a){var b=this.setFormWorking("checkaction");j.debug("Checking ClientActions on #"+a,this,j.LOGLEVEL.debug),this.clientActions.forEach(function(b){b.getWatchedIds().indexOf(a)!==-1&&b.checkState()}),b.resolve()},checkAllClientActionStates:function(){var a=this.setFormWorking("checkallactions");j.debug("Checking the state of all ClientActions",this,j.LOGLEVEL.debug);for(var b in this.clientActions)this.clientActions.hasOwnProperty(b)&&this.clientActions[b].checkState();a.resolve()},addActionListener:function(a){this.actionListeners.push(a)},callActionListener:function(a,b){for(var c in this.actionListeners)this.actionListeners.hasOwnProperty(c)&&this.actionListeners[c].hasOwnProperty(a)&&this.actionListeners[c][a].apply(this,b)},reload:function(a){this.ajaxSubmit(a,!0)},ajaxSubmit:function(c,d){d=d||!1,d?j.debug("Reloading form #"+this.id,this,j.LOGLEVEL.info):j.debug("Submitting form #"+this.id+" by AJAX",this,j.LOGLEVEL.info);var e=this.form.serializeArray(),f=a.Deferred(),g=this.setFormWorking("ajaxsubmit");return f.done(function(){g.resolve()}),void 0!==c&&e.push({name:c.attr("name"),value:c.val()}),d&&(e.push({name:"___tf_reload",value:1}),e.push({name:"___tf_original_action",value:this.form.attr("action")})),a.ajax({type:"POST",url:b.wwwroot+"/totara/form/ajax.php",data:e,context:this,success:function(a){this.ajaxSubmitHandler(f,a)},complete:function(a,b){"success"!==b&&f.resolve(b,{},a)},dataType:"json"}),f},ajaxSubmitHandler:function(b,e){var f=this;b.done(function(a,b){f.callActionListener(a,[f,b])}),"display"===e.formstatus?(j.debug("Displaying the form after an AJAX reload.",h,j.LOGLEVEL.info),c.render(e.templatename,e.templatedata).done(a.proxy(this.replaceFormContents,this),b.resolve(e.formstatus,e.templatedata.formid)).fail(d.exception)):"cancelled"===e.formstatus?(b.done(function(){j.debug("The form has been cancelled, the calling JS needs to do something.",h,j.LOGLEVEL.success)}),b.resolve(e.formstatus,e)):"submitted"===e.formstatus?(b.done(function(){j.debug("The form has been successfully submit, the calling JS needs to do something.",h,j.LOGLEVEL.success)}),b.resolve(e.formstatus,e.data)):(b.done(function(){j.debug("Unexpected reload result.",h,j.LOGLEVEL.error)}),b.resolve("unknown",e))},replaceFormContents:function(a,b){c.replaceNode(this.form,a,b)},compare:function(b,c){if(null!==b&&!Array.isArray(b)&&("function"==typeof b||"object"==typeof b))return!1;var d,e,f,g=h.prototype.compare,i=Array.isArray(b),k=null;switch(c){case h.Operators.Equals:if(3!==arguments.length)return e=arguments.length,j.debug("Compare NotEquals expects 3 arguments, "+e+" given.",h,j.LOGLEVEL.error),k;if(d=arguments[2],Array.isArray(d))if(!i||b.length<d.length)k=!1;else{k=!0;for(f in d)if(d.hasOwnProperty(f)&&!a.inArray(d[f],b)){k=!1;break}}else if(i){for(f in b)if(b.hasOwnProperty(f)&&b[f].toString()===d.toString()){k=!0;break}}else null===b&&(b=""),k=b.toString()===d.toString();break;case h.Operators.Empty:k=null===b||b===!1||""===b.toString()||"0"===b.toString()||i&&0===b.length;break;case h.Operators.Filled:i?k=b.length>0:(null===b&&(b=""),b=b.toString().trim(),k=""!==b&&"false"!==b.toLowerCase()&&!/^[0]*$/.test(b));break;case h.Operators.NotEquals:if(3!==arguments.length)return e=arguments.length,j.debug("Compare NotEquals expects 3 arguments, "+e+" given.",h,j.LOGLEVEL.error),k;d=arguments[2],k=!g(b,h.Operators.Equals,d);break;case h.Operators.NotEmpty:k=!g(b,h.Operators.Empty);break;case h.Operators.NotFilled:k=!g(b,h.Operators.Filled);break;default:j.debug('Unknown comparison operator given: "'+c+'"',h,j.LOGLEVEL.error)}return k},submitHandler:function(b){var c=b.data.form;if(b.preventDefault(),c.isValid()){var d=a(b.target);d.unbind("submit",c.submitHandler),d.submit()}else j.debug("Failed validation, the responsible element should identify itself.",h,j.LOGLEVEL.warn)},setCustomValidation:function(){var b=a(this.node),c=this;c.node.setAttribute("novalidate",""),b.on("submit.working",{form:c},c.submitHandler)},setFormWorking:function(b){j.debug("Form working on "+b+' "'+this.id+'"',h,j.LOGLEVEL.debug);var c=a.Deferred(),d=this;return c.done(function(){d.setFormReady(b)}),M.util.js_pending("totaraForm_"+this.id+"_"+b),this.form&&this.form.on("submit.working",this.preventSubmissionOnSubmit),c},setFormReady:function(a){j.debug("Form ready after "+a+' "'+this.id+'"',h,j.LOGLEVEL.debug),this.form&&this.form.off("submit.working",this.preventSubmissionOnSubmit),M.util.js_complete("totaraForm_"+this.id+"_"+a)},preventSubmissionOnSubmit:function(a){a.preventDefault()}}),h.Operators={Equals:"equals",Empty:"empty",Filled:"filled",NotEquals:"notequals",NotEmpty:"notempty",NotFilled:"notfilled"};var j={Operators:h.Operators,Element:e,Group:g,forms:{},listenerQueue:{},itemIdentifiers:{FORM:"data-totara-form",ELEMENT:"element",GROUP:"group",INPUT:"data-totara-form-element-input"},attributeIdentifiers:{ID:"data-element-id",TYPE:"data-element-type",MODULE:"data-element-amd-module",CLASSIFICATION:"data-item-classification"},LOGLEVEL:{none:"none",debug:"debug",info:"info",success:"success",warn:"warn",error:"error"},getDataAttributeSelector:function(a){return"["+a+"]"},init:function(b){j.debug("Initialising form #"+b.id,h,j.LOGLEVEL.info);var c=a("#"+b.id);if(0===c.length)throw new Error("Unable to find form #"+b.id);c=c[0],j.debug("Preventing form #"+b.id+" submission during bootstrapping",h,j.LOGLEVEL.debug);var d,e=new h({el:c}),f=b.actionsConfig,g=a.Deferred();this.forms[e.id]=e,this.listenerQueue.hasOwnProperty(e.id)&&e.addActionListener(this.listenerQueue[e.id]);var i=e.setFormWorking("init");if(d=e.getItemNodes(),0===d.length)throw new Error("Form [#"+this.id+"] must contain at least one element or group.");return e.initItems(d).then(function(){e.initClientActions(f).done(function(){g.resolve(e)})},function(a){j.debug("Failed to initialise items in form #"+b.id,h,j.LOGLEVEL.info)}),g.promise().done(function(a){var c=a.node;j.debug("Re-enabling submission of form #"+c.getAttribute("id"),h,j.LOGLEVEL.debug);var d=a.getElements(!0).some(function(a){return"function"==typeof a.isValid});d&&a.setCustomValidation(),i.resolve(),j.debug("Initialised form #"+b.id+".",h,j.LOGLEVEL.success)})},extend:function(b,c,d){return c&&"undefined"!==c||(c=function(){b.apply(this,arguments)}),c.prototype=Object.create(b.prototype),c.prototype.constructor=c,a.extend(c.prototype,d),c},load:function(e,f,g,i){var k=a.extend(g,{sesskey:b.sesskey,___tf_formclass:e,___tf_idsuffix:f}),l=a("#"+i),m=a.Deferred();return a.ajax({url:b.wwwroot+"/totara/form/ajax.php",data:k,context:this,success:function(b){"display"===b.formstatus?(j.debug("Displaying the form for the first time.",h,j.LOGLEVEL.debug),l.empty(),c.render(b.templatename,b.templatedata).done(function(d,e){c.replaceNodeContents(a("#"+i),d,e),m.resolve("display",b.templatedata.formid)}).fail(d.exception)):(j.debug("Unexpected form response",h,j.LOGLEVEL.warn),m.reject())},complete:function(a,b){"success"!==b&&m.resolve(b)},dataType:"json"}),m.promise()},getFormInstance:function(a){return this.forms.hasOwnProperty(a)?this.forms[a]:null},addActionListeners:function(a,b){var c=this.getFormInstance(a);null===c?this.listenerQueue[a]=b:c.addActionListener(b)},debug:function(a,b,c){if(i){if(!window.console.log.apply)return void(window.console.log&&window.console.log(a));c||(c=j.LOGLEVEL.none),a=b?b.prototype&&b.prototype.constructor&&b.prototype.constructor.name?"%cForm."+b.prototype.constructor.name+": %c"+a:b.constructor&&b.constructor.name?"%cForm."+b.constructor.name+": %c"+a:"%cForm: %c"+a:"%cForm: %c"+a;var d="#cb8bbe",e="#ae45a3";switch(c){case j.LOGLEVEL.debug:window.console.log.apply(window.console,[a,"color: "+d+"; font-style: italic; padding-left:2em;","color: #454545; font-style: italic;"]);break;case j.LOGLEVEL.error:window.console.log.apply(window.console,[a,"color: "+e+"; font-weight: bold;","color: #c74939;"]);break;case j.LOGLEVEL.warn:window.console.log.apply(window.console,[a,"color: "+e+"; font-weight: bold;","color: #c68c25;"]);break;case j.LOGLEVEL.success:window.console.log.apply(window.console,[a,"color: "+e+"; font-weight: bold;","color: #2da833;"]);break;case j.LOGLEVEL.info:window.console.log.apply(window.console,[a,"color: "+e+"; font-weight: bold;","color: #235aac;"]);break;default:window.console.log.apply(window.console,[a,"",""])}}}};return j});
define('totara_form/modernizr', [],function(){function a(a,b){return typeof a===b}function b(){var b,c,e,h,i,j,k;for(var l in d)if(d.hasOwnProperty(l)){if(b=[],c=d[l],c.name&&(b.push(c.name.toLowerCase()),c.options&&c.options.aliases&&c.options.aliases.length))for(e=0;e<c.options.aliases.length;e++)b.push(c.options.aliases[e].toLowerCase());for(h=a(c.fn,"function")?c.fn():c.fn,i=0;i<b.length;i++)j=b[i],k=j.split("."),1===k.length?f[k[0]]=h:(!f[k[0]]||f[k[0]]instanceof Boolean||(f[k[0]]=new Boolean(f[k[0]])),f[k[0]][k[1]]=h),g.push((h?"":"no-")+k.join("-"))}}function c(){return"function"!=typeof document.createElement?document.createElement(arguments[0]):i?document.createElementNS.call(document,"http://www.w3.org/2000/svg",arguments[0]):document.createElement.apply(document,arguments)}var d=[],e={_version:"3.3.1",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(a,b){var c=this;setTimeout(function(){b(c[a])},0)},addTest:function(a,b,c){d.push({name:a,fn:b,options:c})},addAsyncTest:function(a){d.push({name:null,fn:a})}},f=function(){};f.prototype=e,f=new f;var g=[],h=document.documentElement,i="svg"===h.nodeName.toLowerCase(),j=c("input"),k="autocomplete autofocus list placeholder max min multiple pattern required step".split(" "),l={};f.input=function(a){for(var b=0,d=a.length;b<d;b++)l[a[b]]=!!(a[b]in j);return l.list&&(l.list=!(!c("datalist")||!window.HTMLDataListElement)),l}(k);var m="search tel url email datetime date month week time datetime-local number range color".split(" "),n={};f.inputtypes=function(a){for(var b,c,d,e=a.length,f="1)",g=0;g<e;g++)j.setAttribute("type",b=a[g]),d="text"!==j.type&&"style"in j,d&&(j.value=f,j.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(b)&&void 0!==j.style.WebkitAppearance?(h.appendChild(j),c=document.defaultView,d=c.getComputedStyle&&"textfield"!==c.getComputedStyle(j,null).WebkitAppearance&&0!==j.offsetHeight,h.removeChild(j)):/^(search|tel)$/.test(b)||(d=/^(url|email)$/.test(b)?j.checkValidity&&j.checkValidity()===!1:j.value!=f)),n[a[g]]=!!d;return n}(m),b(),delete e.addTest,delete e.addAsyncTest;for(var o=0;o<f._q.length;o++)f._q[o]();return f});
define('totara_form/form_element_editor', ["jquery","totara_form/form"],function(a,b){function c(a,d,e,f){return this instanceof c?(b.Element.apply(this,arguments),void(this.input=null)):new c(a,d,e,f)}return c.prototype=Object.create(b.Element.prototype),c.constructor=c,c.prototype.toString=function(){return"[object Editor]"},c.prototype.init=function(b){var c=this.id,d=a.Deferred();this.input=a("#"+c),this.input.change(a.proxy(this.changed,this)),window.totara_form_editors=window.totara_form_editors||{},window.totara_form_editors[this.id]=this,this.input.attr("required")?require(["totara_form/modernizr"],function(a){a.input.required?d.resolve():require(["totara_form/polyfill_required-lazy"],function(a){a.init(c),d.resolve()})}):d.resolve(),d.done(b)},c.prototype.setValue=function(a){this.input.val(a),this.changed({})},c.prototype.getValue=function(){return this.input.val()},c});
define('totara_form/form_element_text', ["jquery","totara_form/form"],function(a,b){function c(a,d,e,f){return this instanceof c?(b.Element.apply(this,arguments),void(this.input=null)):new c(a,d,e,f)}return c.prototype=Object.create(b.Element.prototype),c.prototype.constructor=c,c.prototype.toString=function(){return"[object TextElement]"},c.prototype.init=function(b){var c=this.id,d=[];if(this.input=a("#"+c),this.input.change(a.proxy(this.changed,this)),this.input.attr("required")){var e=a.Deferred();d.push(e),require(["totara_form/modernizr"],function(a){a.input.required?e.resolve():require(["totara_form/polyfill_required-lazy"],function(a){a.init(c),e.resolve()})})}if(this.input.attr("placeholder")){var f=a.Deferred();d.push(f),require(["totara_form/modernizr"],function(a){a.input.placeholder?f.resolve():require(["totara_form/polyfill_placeholder-lazy"],function(a){a.init(c),f.resolve()})})}a.when.apply(a,d).done(b)},c.prototype.getValue=function(){return this.input.val()},c.prototype.isEmpty=function(){var a=this.getValue();return""===a.toString().trim()||!!a.hasOwnProperty("isEmpty")&&a.isEmpty()},c.prototype.compare=function(a){var c,d=this.getValue();switch(a){case b.Operators.Equals:return 2!==arguments.length?(b.debug("Compare Equals expects 2 arguments, "+arguments.length+" given.",this,b.LOGLEVEL.warn),null):(c=arguments[1],!Array.isArray(c)&&d.toString().trim()===c.toString().trim());case b.Operators.Empty:return this.isEmpty();case b.Operators.Filled:return d=d.toString().trim(),""!==d&&"false"!==d.toLowerCase()&&!/^[0]*$/.test(d);case b.Operators.NotEquals:return 2!==arguments.length?(b.debug("Compare NotEquals expects 2 arguments, "+arguments.length+" given.",this,b.LOGLEVEL.warn),null):(c=arguments[1],!this.compare(b.Operators.Equals,c));case b.Operators.NotEmpty:return!this.isEmpty();case b.Operators.NotFilled:return!this.compare(b.Operators.Filled);default:b.debug('Element does not implement all comparisons: "'+a+'", asking the Form',this,b.LOGLEVEL.warn);var e=[d].concat(arguments);return b.Element.prototype.compare.apply(this,e)}},c});
define('totara_form/form_element_filemanager', ["jquery","core/yui","totara_form/form"],function(a,b,c){function d(a,b,e,f){return this instanceof d?(c.Element.apply(this,arguments),void(this.input=null)):new d(a,b,e,f)}return d.prototype=Object.create(c.Element.prototype),d.prototype.constructor=d,d.prototype.toString=function(){return"[object FileManagerElement]"},d.prototype.init=function(b){this.input=a("#"+this.id);var d={};try{d=this.input.data("fmoptions")}catch(e){throw c.debug("Failed to pick up FileManager options from data attribute.",this,c.LOGLEVEL.error),e}return""===d?(c.debug("FileManager could not initialise, no options present.",this,c.LOGLEVEL.error),void b()):void require(["totara_form/element_filemanager"],function(a){a.init_filemanager(d),b()})},d});
define('totara_form/form_element_static_html', ["jquery","totara_form/element_generic"],function(a,b){function c(a,d,e,f){return this instanceof c?void b.apply(this,arguments):new c(a,d,e,f)}return c.prototype=Object.create(b.prototype),c.prototype.constructor=c,c.prototype.toString=function(){return"[object StaticHTML]"},c.prototype.Name="StaticHTML",c});
define('totara_form/form_element_checkbox', ["jquery","totara_form/form"],function(a,b){function c(a,d,e,f){return this instanceof c?(b.Element.apply(this,arguments),void(this.input=null)):new c(a,d,e,f)}var d="totara_form-error-container",e="."+d;return c.prototype=Object.create(b.Element.prototype),c.prototype.constructor=c,c.prototype.toString=function(){return"[object CheckboxElement]"},c.prototype.init=function(b){var c=a("#"+this.id),d=this,e=a.Deferred(),f='input[type="submit"]:not([formnovalidate])';this.input=c,this.input.change(a.proxy(this.changed,this)),c.attr("required")?require(["totara_form/modernizr"],function(b){b.input.required||(c.change(a.proxy(d.polyFillValidate,d)),c.closest("form").find(f).click(a.proxy(d.polyFillValidate,d))),e.resolve()}):e.resolve(),e.done(b)},c.prototype.getValue=function(){return this.input.is(":checked")?this.input.val():this.input.data("value-unchecked")},c.prototype.polyFillValidate=function(a){var b=this.input;b.prop("checked")?""!==b.val().trim()&&b.closest(".tf_element").find(e).remove():(a.preventDefault(),0===b.closest(".tf_element").find(e).length&&require(["core/templates","core/str","core/config"],function(a,c,d){c.get_string("required","core").done(function(c){var e={errors_has_items:!0,errors:[{message:c}]};a.render("totara_form/validation_errors",e,d.theme).done(function(a){b.parent().prepend(a)})})}))},c});
define('totara_form/form_element_passwordunmask', ["jquery","totara_form/form"],function(a,b){function c(a,d,e,f){return this instanceof c?(this.input=null,this.unmaskinput=null,void b.Element.apply(this,arguments)):new c(a,d,e,f)}return String.prototype.repeat||(String.prototype.repeat=function(a){"use strict";if(null==this)throw new TypeError("can't convert "+this+" to object");var b=""+this;if(a=+a,a!=a&&(a=0),a<0)throw new RangeError("repeat count must be non-negative");if(a==1/0)throw new RangeError("repeat count must be less than infinity");if(a=Math.floor(a),0==b.length||0==a)return"";if(b.length*a>=1<<28)throw new RangeError("repeat count must not overflow maximum string size");for(var c="";1==(1&a)&&(c+=b),a>>>=1,0!=a;)b+=b;return c}),c.prototype=Object.create(b.Element.prototype),c.prototype.constructor=c,c.prototype.toString=function(){return"[object PasswordUnmaskElement]"},c.prototype.init=function(b){var c,d=this.id,e=a("#"+d),f=[];this.input=e,this.unmaskinput=a("#"+d+"unmask"),this.wrap=this.input.parent(".wrap");var c=a('<input type="text" value="" class="inputmask" />');if(this.input.attr("readonly")&&c.attr("readonly","readonly"),c.insertBefore("#"+d),this.mask=this.wrap.find(".inputmask"),this.updateMask(),this.mask.focus(function(a){e.focus()}),this.unmaskinput.change(a.proxy(this.unmask,this)),this.input.keyup(a.proxy(this.updateMask,this)),this.input.mouseup(),this.input.change(a.proxy(this.changed,this)),this.input.attr("required")){var g=a.Deferred();f.push(g),require(["totara_form/modernizr"],function(a){a.input.required?g.resolve():require(["totara_form/polyfill_required-lazy"],function(a){a.init(d),g.resolve()})})}if(this.input.attr("placeholder")){var h=a.Deferred();f.push(h),require(["totara_form/modernizr"],function(a){a.input.placeholder?h.resolve():require(["totara_form/polyfill_placeholder-lazy"],function(a){a.init(d),h.resolve()})})}a.when.apply(a,f).done(b)},c.prototype.updateMask=function(){this.mask.val("".repeat(this.input.val().length))},c.prototype.unmask=function(){this.unmaskinput.is(":checked")?this.input.parents(".totara_form_element_passwordunmask").addClass("unmask-password"):this.input.parents(".totara_form_element_passwordunmask").removeClass("unmask-password")},c.prototype.getValue=function(){return this.input?this.input.val():null},c});
define('totara_form/form_element_multiselect', ["jquery","totara_form/form"],function(a,b){function c(a,d,e,f){return this instanceof c?(b.Element.apply(this,arguments),this.input=null,void(this.validationerroradded=!1)):new c(a,d,e,f)}var d="totara_form-error-container",e="."+d;return c.prototype=Object.create(b.Element.prototype),c.prototype.constructor=c,c.prototype.toString=function(){return"[object MultiSelect]"},c.prototype.init=function(b){var c=this.id,d=a("#"+c),e=this,f=a.Deferred(),g='input[type="submit"]:not([formnovalidate])';this.input=d,this.input.change(a.proxy(this.changed,this)),d.attr("required")?require(["totara_form/modernizr"],function(b){b.input.required||(d.change(a.proxy(e.polyFillValidate,e)),d.closest("form").find(g).click(a.proxy(e.polyFillValidate,e))),f.resolve()}):f.resolve(),f.done(b)},c.prototype.polyFillValidate=function(b){var c=!1,d=this.input;this.input.find("option").each(function(b,d){a(d).prop("selected")&&(c=!0)}),c?(this.validationerroradded=!1,d.closest(".tf_element").find(e).remove()):(b.preventDefault(),this.validationerroradded||(this.validationerroradded=!0,require(["core/templates","core/str","core/config"],function(a,b,c){b.get_string("required","core").done(function(b){var e={errors_has_items:!0,errors:[{message:b}]};a.render("totara_form/validation_errors",e,c.theme).done(function(a){d.parent().prepend(a)})})})))},c.prototype.getValue=function(){return this.input.val()},c});
define('totara_form/form_element_tel', ["jquery","totara_form/form_element_text"],function(a,b){function c(a,d,e,f){return this instanceof c?void b.apply(this,arguments):new c(a,d,e,f)}return c.prototype=Object.create(b.prototype),c.prototype.constructor=c,c.prototype.toString=function(){return"[object TelElement]"},c.prototype.Name="Tel",c.prototype.isValid=function(){return this.getValue().match(/d+/)},c});
define('totara_form/form_element_hidden', ["totara_form/form_element_text"],function(a){function b(c,d,e,f){return this instanceof b?void a.apply(this,arguments):new b(c,d,e,f)}return b.prototype=Object.create(a.prototype),b.prototype.constructor=b,b.prototype.toString=function(){return"[object HiddenInput]"},b.prototype.Name="Hidden",b});
define('totara_form/clientaction_base', ["totara_form/form"],function(a){function b(c,d){this.form=d,this.target=d.getItemById(c.target),this.watchedIds=[],this.actionconfig=c,this.target||a.debug("Unable to find the target element #"+c.target,b,a.LOGLEVEL.error)}return b.prototype={checkState:function(){a.debug("A ClientAction does not override the checkState method.",this,a.LOGLEVEL.error)},getTarget:function(){return this.target},init:function(){},getCurrentState:function(){return null},getWatchedIds:function(){return this.watchedIds}},b});
define('totara_form/form_group_section', ["jquery","totara_form/form","core/str","core/templates"],function(a,b,c,d){function e(a,c,d){return this instanceof e?(b.Group.call(this,a,c,d),this.fieldset=null,this.legend=null,this.input=null,void(this.link=null)):new e(a,c,d)}return e.prototype=Object.create(b.Group.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return"[object SectionGroup]"},e.prototype.init=function(b){if(this.fieldset=a("#"+this.id),this.legend=a("#"+this.id+" legend.tf_section_legend"),this.input=a("#"+this.id+" input.tf_section_collapsible"),!this.fieldset.hasClass("collapsed")&&!this.fieldset.hasClass("collapsible"))return void b();var c=this;this.fieldset.hasClass("collapsed")?(this.legend.html('<a href="#" role="button" aria-expanded="false">'+this.legend.html()+"</a>"),d.renderIcon("collapsed").done(function(a){c.fieldset.hasClass("collapsed")&&(c.legend.find(".flex-icon").remove(),c.legend.prepend(a))})):(this.legend.html('<a href="#" role="button" aria-expanded="true">'+this.legend.html()+"</a>"),d.renderIcon("expanded").done(function(a){c.fieldset.hasClass("collapsible")&&(c.legend.find(".flex-icon").remove(),c.legend.prepend(a))})),this.link=a("#"+this.id+" legend.tf_section_legend a"),this.link.click(a.proxy(this.toggleCollapsed,this)),e.instances.push(this),e.instancecount++,2===e.instancecount&&e.addExpandAll(this.getForm()),b()},e.prototype.toggleCollapsed=function(a){a.preventDefault(),this.fieldset.hasClass("collapsed")?this.expand():this.collapse()},e.prototype.expand=function(){b.debug("Expanding section "+this.legend.text(),this,b.LOGLEVEL.debug),this.fieldset.removeClass("collapsed"),this.fieldset.addClass("collapsible"),this.link.attr("aria-expanded","true"),this.input.val(1);var a=this;d.renderIcon("expanded").done(function(b){a.fieldset.hasClass("collapsible")&&(a.legend.find(".flex-icon").remove(),a.legend.prepend(b))})},e.prototype.collapse=function(){b.debug("Collapsing section "+this.legend.text(),this,b.LOGLEVEL.debug),this.fieldset.addClass("collapsed"),this.fieldset.removeClass("collapsible"),this.link.attr("aria-expanded","false"),this.input.val(0);var a=this;d.renderIcon("collapsed").done(function(b){a.fieldset.hasClass("collapsed")&&(a.legend.find(".flex-icon").remove(),a.legend.prepend(b))})},e.getValue=function(){return null},e.instancecount=0,e.instances=[],e.expandallcontrol=null,e.addExpandAll=function(f){b.debug("Adding expand/collapse all for sections",this,b.LOGLEVEL.info);var g='<div class="collapsible-actions form-section-expandall-control">';g+='<a href="#" class="collapseexpand" role="button" aria-controls="">&nbsp;-&nbsp;</a>',g+="</div>",f.form.prepend(g),e.expandallcontrol=a(".form-section-expandall-control"),a.when(c.get_string("expandall"),d.renderIcon("collapsed")).done(function(a,b){e.expandallcontrol.find("a").html(b+a)}),e.expandallcontrol.click(a.proxy(this.toggleAll,this)),e.expandallcontrol.data("state","expand")},e.toggleAll=function(b){b.preventDefault();var f,g,h=e.expandallcontrol,i=h.data("state"),j=h.find("a"),k="expand"===i;for(f=0;f<e.instances.length;f++)g=e.instances[f],k?g.expand():g.collapse();k?(h.data("state","collapse"),j.addClass("collapse-all"),a.when(c.get_string("collapseall","core"),d.renderIcon("expanded")).done(function(a,b){j.hasClass("collapse-all")&&j.html(b+a)})):(h.data("state","expand"),j.removeClass("collapse-all"),a.when(c.get_string("expandall","core"),d.renderIcon("collapsed")).done(function(a,b){j.hasClass("collapse-all")||j.html(b+a)}))},e});
define('totara_form/form_element_editor_atto', ["jquery","core/yui","core/str","totara_form/form"],function($,Y,core_strings,Form){function AttoElement(a,b,c,d){return this instanceof AttoElement?(Form.Element.apply(this,arguments),this.input=null,void(this.editor=null)):new AttoElement(a,b,c,d)}return AttoElement.prototype=Object.create(Form.Element.prototype),AttoElement.constructor=AttoElement,AttoElement.prototype.toString=function(){return"[object AttoElement]"},AttoElement.prototype.init=function(a){var b=this;this.input=$("#"+this.id),window.totara_form_editors=window.totara_form_editors||{},window.totara_form_editors[this.id]=this;var c=this.input.data("fptemplates"),d=this.input.data("jsmodules"),e=this.input.data("requiredstrings"),f=this.input.data("yuimodules");Y.use(["core_filepicker","node","node-event-simulate","core_dndupload"],function(a){M.core_filepicker.set_templates(a,c)}),M.yui.add_module(d),Y.applyConfig(YUI_config),core_strings.get_strings(e).done(function(){for(var a=0;a<f.length;a++)b.initYUIModules(f[a])}),a()},AttoElement.prototype.initYUIModules=function(yuimodule){var self=this;Y.use(yuimodule.modules,function(){var result=eval(yuimodule.functionstr);result&&self.setEditor(result)})},AttoElement.prototype.setEditor=function(a){this.editor=a,a.on("change",$.proxy(this.changed,this))},AttoElement.prototype.getValue=function(){return this.editor&&this.editor.updateOriginal(),this.input.val().toString()},AttoElement.prototype.setValue=function(a){this.input.val(a),this.editor&&this.editor.updateFromTextArea(),Form.debug("Atto editor value changed programmatically",this,Form.LOGLEVEL.info),this.changed({})},AttoElement.prototype.compare=function(a){var b,c=this.getValue(),d=null;switch(a){case Form.Operators.Equals:if(2!==arguments.length)return Form.debug("Compare Equals expects 2 arguments, "+arguments.length+" given.",this,Form.LOGLEVEL.warn),null;if(b=arguments[1],Array.isArray(b))return!1;d=c.toString()===b.toString()||this.stripValue(c)===b.toString();break;case Form.Operators.Empty:d=null===c||c===!1||""===c.toString()||"0"===c.toString()||""===this.stripValue(c);break;case Form.Operators.Filled:d=null!==c&&""!==c&&""!==this.stripValue(c);break;case Form.Operators.NotEquals:if(2!==arguments.length)return Form.debug("Compare NotEquals expects 2 arguments, "+arguments.length+" given.",this,Form.LOGLEVEL.warn),null;b=arguments[1],d=!this.compare(Form.Operators.Equals,b);break;case Form.Operators.NotEmpty:d=!this.compare(Form.Operators.Empty);break;case Form.Operators.NotFilled:d=!this.compare(Form.Operators.Filled);break;default:Form.debug('Element does not implement all comparisons: "'+a+'", asking the Form',this,Form.LOGLEVEL.warn);var e=[c].concat(Array.prototype.slice.call(arguments));d=Form.prototype.compare.apply(null,e)}return d},AttoElement.prototype.stripValue=function(a){return a.trim().replace(/^<p[^>]*>(.*)<\/p>$/g,"$1").replace(/<br ?\/?>/g,"").replace("&nbsp;","").trim()},AttoElement.prototype.isEmpty=function(){var a=this.getValue();return""===a||"<p></p>"===a},AttoElement.prototype.getObjectClass=function(a){if(a&&a.constructor){if(a.constructor.name)return a.constructor.name;if(a.constructor.toString){var b=a.constructor.toString().match(/function\s*(\w + )/);if(b&&2==b.length)return b[1]}}},AttoElement});
define('totara_form/form_element_datetime', ["jquery","totara_form/form","totara_form/modernizr"],function(a,b,c){function d(a,c,e,f){return this instanceof d?(b.Element.apply(this,arguments),void(this.input=null)):new d(a,c,e,f)}return d.prototype=Object.create(b.Element.prototype),d.prototype.constructor=d,d.prototype.toString=function(){return"[object DateTimeElement]"},d.prototype.init=function(b){var d=this.id,e=[];if(this.input=a("#"+d),this.input.change(a.proxy(this.changed,this)),this.input.attr("required")&&!c.input.required){var f=a.Deferred();e.push(f),require(["totara_form/polyfill_required-lazy"],function(a){a.init(d),f.resolve()})}if(!c.inputtypes["datetime-local"]){var g=a.Deferred();e.push(g),require(["totara_form/polyfill_date-lazy"],function(a){a.init(d),g.resolve()})}if(this.input.attr("placeholder")&&!c.input.placeholder){var h=a.Deferred();e.push(h),require(["totara_form/polyfill_placeholder-lazy"],function(a){a.init(d),h.resolve()})}a.when.apply(a,e).done(b)},d.prototype.getValue=function(){return this.input.val()},d});
define('totara_form/form_element_radios', ["jquery","totara_form/form"],function(a,b){function c(a,d,e,f){return this instanceof c?(b.Element.apply(this,arguments),this.container=null,this.inputs=null,void(this.validationerroradded=!1)):new c(a,d,e,f)}var d="totara_form-error-container",e="."+d;return c.prototype=Object.create(b.Element.prototype),c.prototype.constructor=c,c.prototype.toString=function(){return"[object RadiosElement]"},c.prototype.init=function(b){var c=this.id,d=a("#"+c),e=a("#"+c+" input[type=radio]"),f=a(e[0]),g=this,h=a.Deferred(),i='input[type="submit"]:not([formnovalidate])';this.container=d,this.inputs=e,this.inputs.change(a.proxy(this.changed,this)),f.attr("required")?require(["totara_form/modernizr"],function(b){b.input.required||(e.change(a.proxy(g.polyFillValidate,g)),d.closest("form").find(i).click(a.proxy(g.polyFillValidate,g))),h.resolve()}):h.resolve(),h.done(b)},c.prototype.polyFillValidate=function(b){var c=!1,d=this.container;this.inputs.each(function(b,d){a(d).prop("checked")&&(c=!0)}),c?(this.validationerroradded=!1,d.closest(".tf_element").find(e).remove()):(b.preventDefault(),this.validationerroradded||(this.validationerroradded=!0,require(["core/templates","core/str","core/config"],function(a,b,c){b.get_string("required","core").done(function(b){var e={errors_has_items:!0,errors:[{message:b}]};a.render("totara_form/validation_errors",e,c.theme).done(function(a){d.prepend(a)})})})))},c.prototype.getValue=function(){for(var b=0;b<this.inputs.length;b++){var c=a(this.inputs[b]);if(c.is(":checked"))return c.val()}return!1},c});
define('totara_form/form_element_email', ["jquery","totara_form/form_element_text"],function(a,b){function c(a,d,e,f){return this instanceof c?(b.apply(this,arguments),void(this.Name="Email")):new c(a,d,e,f)}return c.prototype=Object.create(b.prototype),c.prototype.constructor=c,c.prototype.toString=function(){return"[object EmailElement]"},c});
define('totara_form/form_element_checkboxes', ["jquery","totara_form/form"],function(a,b){function c(a,d,e,f){return this instanceof c?(b.Element.apply(this,arguments),this.container=null,void(this.inputs=null)):new c(a,d,e,f)}var d="totara_form-error-container",e="."+d;return c.prototype=Object.create(b.Element.prototype),c.prototype.constructor=c,c.prototype.toString=function(){return"[object CheckboxesElement]"},c.prototype.init=function(c){var d=a("#"+this.id+" input[type=checkbox]"),e=a(d[0]),f=a.Deferred();this.container=a("#"+this.id),this.inputs=d,this.inputs.change(a.proxy(this.changed,this)),e.attr("required")?(b.debug("Required checkboxes are only processed on the server.",this,b.LOGLEVEL.warn),f.resolve()):f.resolve(),f.done(c)},c.prototype.getValue=function(){for(var b=[],c=0;c<this.inputs.length;c++){var d=a(this.inputs[c]);d.is(":checked")&&b.push(d.val())}return 0!==b.length&&b},c.prototype.polyFillValidate=function(b){var c=!1,d=this.container;this.inputs.each(function(b,d){a(d).prop("checked")&&(c=!0)}),c?(this.validationerroradded=!1,d.closest(".tf_element").find(e).remove()):(b.preventDefault(),this.validationerroradded||(this.validationerroradded=!0,require(["core/templates","core/str","core/config"],function(a,b,c){b.get_string("required","core").done(function(b){var e={errors_has_items:!0,errors:[{message:b}]};a.render("totara_form/validation_errors",e,c.theme).done(function(a){d.prepend(a)})})})))},c});
define('totara_form/form_element_number', ["jquery","totara_form/form","totara_form/modernizr"],function(a,b,c){function d(a,c,e,f){return this instanceof d?(this.input=null,void b.Element.apply(this,arguments)):new d(a,c,e,f)}return d.prototype=Object.create(b.Element.prototype),d.prototype.constructor=d,d.prototype.toString=function(){return"[object NumberInputElement]"},d.prototype.init=function(b){var d=this.id,e=[];if(this.input=a("#"+d),this.input.change(a.proxy(this.changed,this)),!c.inputtypes.number){var f=a.Deferred();e.push(f),require(["totara_form/polyfill_number-lazy"],function(a){a.init(d),f.resolve()})}if(this.input.attr("required")&&!c.input.required){var g=a.Deferred();e.push(g),require(["totara_form/polyfill_required-lazy"],function(a){a.init(d),g.resolve()})}if(this.input.attr("placeholder")&&!c.input.placeholder){var h=a.Deferred();e.push(h),require(["totara_form/polyfill_placeholder-lazy"],function(a){a.init(d),h.resolve()})}a.when.apply(a,e).done(b)},d.prototype.getValue=function(){return this.input.val()},d});
define('totara_form/element_filemanager', ["core/yui","core/templates","core/str"],function(a,b,c){return M.totara_form=M.totara_form||{},M.totara_form.element_filemanager=M.totara_form.element_filemanager||{},M.totara_form.element_filemanager.templates=M.totara_form.element_filemanager.templates||{},M.totara_form.element_filemanager.init=function(a,b){var c=function(a){c.superclass.constructor.apply(this,arguments)};c.NAME="FileManager",c.ATTRS={options:{},lang:{}},a.extend(c,a.Base,{api:M.cfg.wwwroot+"/repository/draftfiles_ajax.php",menus:{},initializer:function(b){this.options=b,b.mainfile&&(this.enablemainfile=b.mainfile),this.client_id=b.client_id,this.currentpath="/",this.maxfiles=b.maxfiles,this.maxbytes=b.maxbytes,this.areamaxbytes=b.areamaxbytes,this.emptycallback=null,this.filepicker_options=b.filepicker?b.filepicker:{},this.filepicker_options.client_id=this.client_id,this.filepicker_options.context=b.context,this.filepicker_options.maxfiles=this.maxfiles,this.filepicker_options.maxbytes=this.maxbytes,this.filepicker_options.areamaxbytes=this.areamaxbytes,this.filepicker_options.env="filemanager",this.filepicker_options.itemid=b.itemid,b.filecount?this.filecount=b.filecount:this.filecount=0,this.filemanager=a.one("#filemanager-"+b.client_id),this.filemanager.hasClass("filemanager-container")||!this.filemanager.one(".filemanager-container")?this.dndcontainer=this.filemanager:(this.dndcontainer=this.filemanager.one(".filemanager-container"),this.dndcontainer.get("id")||this.dndcontainer.generateID()),this.filemanager.one(".fp-path-folder")&&(this.pathnode=this.filemanager.one(".fp-path-folder"),this.pathbar=this.pathnode.get("parentNode"),this.pathbar.removeChild(this.pathnode)),this.selectnode=a.Node.createWithFilesSkin(M.totara_form.element_filemanager.templates.fileselectlayout),this.selectnode.setAttribute("aria-live","assertive"),this.selectnode.setAttribute("role","dialog"),this.selectnode.generateID();var c="fm-dialog-label_"+this.selectnode.get("id");this.selectui=new M.core.dialogue({draggable:!0,headerContent:'<h3 id="'+c+'">'+M.util.get_string("edit","moodle")+"</h3>",bodyContent:this.selectnode,centered:!0,width:"480px",modal:!0,visible:!1}),a.one("#"+this.selectnode.get("id")).setAttribute("aria-labelledby",c),this.selectui.hide(),this.setup_select_file(),this.setup_buttons(),this.filemanager.one(".fp-content").on(["scroll","resize"],this.content_scrolled,this),this.viewmode=1,this.filemanager.all(".fp-vb-icons,.fp-vb-tree,.fp-vb-details").removeClass("checked"),this.filemanager.all(".fp-vb-icons").addClass("checked"),this.refresh(this.currentpath)},wait:function(){this.filemanager.addClass("fm-updating")},request:function(b,c){var d,e=this.api+"?action="+b.action,f={},g=this;if(b.scope&&(g=b.scope),f.sesskey=M.cfg.sesskey,f.client_id=this.client_id,f.filepath=this.currentpath,f.itemid=this.options.itemid?this.options.itemid:0,b.params)for(d in b.params)f[d]=b.params[d];var h={method:"POST",on:{complete:function(c,d,e){if(!d)return void(window.console.log&&window.console.log("IO FATAL"));var f=null;try{f=a.JSON.parse(d.responseText)}catch(h){return g.print_msg(M.util.get_string("invalidjson","repository"),"error"),void a.error(M.util.get_string("invalidjson","repository")+":\n"+d.responseText)}f&&f.tree&&g.set_current_tree&&g.set_current_tree(f.tree),b.callback(c,f,e)}},arguments:{scope:g},headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:build_querystring(f)};b.form&&(h.form=b.form),a.io(e,h),c&&this.wait()},filepicker_callback:function(a){this.filecount++,this.check_buttons(),this.refresh(this.currentpath),"undefined"!=typeof M.core_formchangechecker&&M.core_formchangechecker.set_form_changed()},check_buttons:function(){this.filecount>0?this.filemanager.removeClass("fm-nofiles"):this.filemanager.addClass("fm-nofiles"),this.filecount>=this.maxfiles&&this.maxfiles!=-1?this.filemanager.addClass("fm-maxfiles"):this.filemanager.removeClass("fm-maxfiles")},refresh:function(a){var b=this;this.currentpath=a,a?this.currentpath=a:a=this.currentpath,this.request({action:"list",scope:b,params:{filepath:a},callback:function(a,c,d){b.filecount=c.filecount,b.options=c,b.lazyloading={},b.check_buttons(),b.render(c)}},!0)},print_msg:function(b,c){var d=M.util.get_string("error","moodle");if("error"!=c&&(c="info",d=M.util.get_string("info","moodle")),!this.msg_dlg){this.msg_dlg_node=a.Node.createWithFilesSkin(M.totara_form.element_filemanager.templates.message);this.msg_dlg_node.generateID();this.msg_dlg=new M.core.dialogue({draggable:!0,bodyContent:this.msg_dlg_node,centered:!0,modal:!0,visible:!1}),this.msg_dlg_node.one(".fp-msg-butok").on("click",function(a){a.preventDefault(),this.msg_dlg.hide()},this)}this.msg_dlg.set("headerContent",d),this.msg_dlg_node.removeClass("fp-msg-info").removeClass("fp-msg-error").addClass("fp-msg-"+c),this.msg_dlg_node.one(".fp-msg-text").setContent(a.Escape.html(b)),this.msg_dlg.show()},is_disabled:function(){return null!==this.filemanager.ancestor(".fitem.disabled")},is_frozen:function(){return this.options.frozen||null!==this.filemanager.ancestor('[data-element-frozen="1"]')},setup_buttons:function(){var b=this.filemanager.one(".fp-btn-download"),c=this.filemanager.one(".fp-btn-mkdir"),d=this.filemanager.one(".fp-btn-add");this.is_frozen()?d&&d.hide():d.on("click",this.show_filepicker,this);var e=this.filemanager.one(".dndupload-arrow");e&&(this.is_frozen()?e.hide():e.on("click",this.show_filepicker,this)),this.options.subdirs&&!this.is_frozen()?c.on("click",function(b){if(b.preventDefault(),!this.is_disabled()&&!this.is_frozen()){var c=this,d=function(b){b.preventDefault();var d=a.one("#fm-newname-"+c.client_id).get("value");return d?void c.request({action:"mkdir",params:{filepath:c.currentpath,newdirname:d},callback:function(b,d,e){var f=d.filepath;c.mkdir_dialog.hide(),c.refresh(f),a.one("#fm-newname-"+c.client_id).set("value",""),"undefined"!=typeof M.core_formchangechecker&&M.core_formchangechecker.set_form_changed()}}):void c.mkdir_dialog.hide()},e=function(){var b=!1,d=a.one("#fm-newname-"+c.client_id).get("value");d.length>0&&(b=!0);var e=a.one("#fm-mkdir-butcreate-"+c.client_id);return e&&e.set("disabled",!b),b};if(!this.mkdir_dialog){var f=a.Node.createWithFilesSkin(M.totara_form.element_filemanager.templates.mkdir);this.mkdir_dialog=new M.core.dialogue({draggable:!0,bodyContent:f,centered:!0,modal:!0,visible:!1}),f.one(".fp-dlg-butcreate").set("id","fm-mkdir-butcreate-"+this.client_id).on("click",d,this),f.one("input").set("id","fm-newname-"+this.client_id).on("keydown",function(b){var c=a.bind(e,this)();c&&13===b.keyCode&&a.bind(d,this)(b)},this),f.one("#fm-newname-"+this.client_id).on(["keyup","change"],function(b){a.bind(e,this)()},this),f.one("label").set("for","fm-newname-"+this.client_id),f.all(".fp-dlg-butcancel").on("click",function(a){a.preventDefault(),this.mkdir_dialog.hide()},this),f.all(".fp-dlg-curpath").set("id","fm-curpath-"+this.client_id)}this.mkdir_dialog.show();for(var g=M.util.get_string("newfolder","repository");this.has_folder(g);)g=increment_filename(g,!0);a.one("#fm-newname-"+c.client_id).set("value",g),a.bind(e,this)(),a.one("#fm-newname-"+c.client_id).focus().select(),a.all("#fm-curpath-"+c.client_id).setContent(this.currentpath)}},this):(this.filemanager.addClass("fm-nomkdir"),c&&c.hide()),b.on("click",function(b){if(b.preventDefault(),!this.is_disabled()){var c=this,d=this.filemanager.one(".fp-img-downloading");"inline"!=d.getStyle("display")&&(d.setStyle("display","inline"),this.request({action:"downloaddir",scope:c,callback:function(b,d,e){var f=c.filemanager.one(".fp-img-downloading");if(f.setStyle("display","none"),d){c.refresh(d.filepath);var g=a.Node.create("<iframe></iframe>").setStyles({visibility:"hidden",width:"1px",height:"1px"});g.set("src",d.fileurl),a.one("body").appendChild(g)}else c.print_msg(M.util.get_string("draftareanofiles","repository"),"error")}}))}},this),this.filemanager.all(".fp-vb-icons,.fp-vb-tree,.fp-vb-details").on("click",function(a){a.preventDefault();var b=this.filemanager.one(".fp-viewbar");this.is_disabled()||b&&b.hasClass("disabled")||(this.filemanager.all(".fp-vb-icons,.fp-vb-tree,.fp-vb-details").removeClass("checked"),a.currentTarget.hasClass("fp-vb-tree")?this.viewmode=2:a.currentTarget.hasClass("fp-vb-details")?this.viewmode=3:this.viewmode=1,a.currentTarget.addClass("checked"),this.render(),this.filemanager.one(".fp-content").setAttribute("tabIndex","0"),this.filemanager.one(".fp-content").focus())},this)},show_filepicker:function(b){if(b.preventDefault(),!this.is_disabled()&&!this.is_frozen()){var c=this.filepicker_options;c.formcallback=this.filepicker_callback,c.magicscope=this,c.savepath=this.currentpath,M.core_filepicker.show(a,c)}},print_path:function(){var b=this.options.path;if(this.pathbar.setContent("").addClass("empty"),b&&0!==b.length&&2!=this.viewmode){for(var c=0;c<b.length;c++){var d=this.pathnode.cloneNode(!0);this.pathbar.appendChild(d),0===c&&d.addClass("first"),c===b.length-1&&d.addClass("last"),c%2?d.addClass("even"):d.addClass("odd"),d.one(".fp-path-folder-name").setContent(a.Escape.html(b[c].name)).on("click",function(a,b){a.preventDefault(),this.is_disabled()||this.refresh(b)},this,b[c].path)}this.pathbar.removeClass("empty")}},get_filepath:function(a){return a.path&&a.path.length?a.path[a.path.length-1].path:""},treeview_dynload:function(a,b){var c={};if(a.children)for(var d in a.children)c[a.children[d].path]=a.children[d];a.path&&"/"!=a.path||(a.fileinfo.filepath="/",a.fileinfo.type="folder",a.fileinfo.fullname=a.fileinfo.title,a.fileinfo.filename="."),this.request({action:"list",params:{filepath:a.path?a.path:""},scope:this,callback:function(d,e,f){var g,h=e.list,i=f.scope;if(2==i.viewmode&&a&&a.getChildrenEl()){null!==b&&(i.options=e,i.currentpath=a.path?a.path:"/"),a.highlight(!1),a.origlist=e.list?e.list:null,a.origpath=e.path?e.path:null,a.children=[];for(g in h)"folder"==h[g].type&&c[h[g].filepath]?(c[h[g].filepath].fileinfo=h[g],a.children[a.children.length]=c[h[g].filepath]):i.view_files([h[g]]);null===b?a.refresh():b(),i.content_scrolled()}}},!1)},content_scrolled:function(b){setTimeout(a.bind(function(){if(!this.processingimages){this.processingimages=!0;var a=this,b=this.filemanager.one(".fp-content"),c=b.getY(),d=b.getStylePx("height"),e=function(a){var b=a.getY()-c;return b<=d&&(b>=0||b+a.getStylePx("height")>=0)};a.lazyloading&&b.all("img").each(function(b){b.get("id")&&a.lazyloading[b.get("id")]&&e(b)&&b.setImgRealSrc(a.lazyloading)}),this.processingimages=!1}},this),200)},view_files:function(b){if(this.filemanager.removeClass("fm-updating").removeClass("fm-noitems"),null===b&&(!this.options.list||0===this.options.list.length)&&2!=this.viewmode)return void this.filemanager.addClass("fm-noitems");var c,d=null!==b?b:this.options.list;2==this.viewmode||3==this.viewmode?c=a.Node.create(M.totara_form.element_filemanager.templates.listfilename):(this.viewmode=1,c=a.Node.create(M.totara_form.element_filemanager.templates.iconfilename));var e={viewmode:this.viewmode,appendonly:null!==b,filenode:c,callbackcontext:this,callback:function(a,b){a.preventDefault&&a.preventDefault(),"folder"==b.type?this.refresh(b.filepath):this.select_file(b)},rightclickcallback:function(a,b){a.preventDefault&&a.preventDefault(),this.select_file(b)},classnamecallback:function(b){var c="";return"folder"!=b.type&&(b.type||b.filename)||(c+=" fp-folder"),(b.filename||b.filepath||b.path&&"/"!=b.path)&&(c+=" fp-hascontextmenu"),b.isref&&(c+=" fp-isreference"),b.refcount&&(c+=" fp-hasreferences"),b.originalmissing&&(c+=" fp-originalmissing"),1==b.sortorder&&(c+=" fp-mainfile"),a.Lang.trim(c)}};2==this.viewmode&&(e.dynload=!0,e.filepath=this.options.path,e.treeview_dynload=this.treeview_dynload,e.norootrightclick=!0,e.callback=function(a,b){b.fullname&&("folder"!=b.type?(a.node.parent&&a.node.parent.origpath&&(this.options.path=a.node.parent.origpath,this.options.list=a.node.parent.origlist,this.print_path()),this.currentpath=b.filepath,this.select_file(b)):(this.options.path=a.node.origpath,this.options.list=a.node.origlist,this.currentpath=b.filepath,this.print_path()))}),this.lazyloading||(this.lazyloading={}),this.filemanager.one(".fp-content").fp_display_filelist(e,d,this.lazyloading),this.content_scrolled()},populate_licenses_select:function(b){if(b){b.setContent("");var c=this.options.licenses;for(var d in c){var e=a.Node.create("<option/>").set("value",c[d].shortname).setContent(a.Escape.html(c[d].fullname));b.appendChild(e)}}},set_current_tree:function(b){var c=function(a,b){if(b&&b.children&&b.children.length)for(var d in b.children)a[a.length]=b.children[d].filepath,c(a,b.children[d])},d=["/"];c(d,b);var e=this.selectnode,f=e.one(".fp-path select");f.setContent("");for(var g in d)f.appendChild(a.Node.create("<option/>").set("value",d[g]).setContent(a.Escape.html(d[g])))},update_file:function(b){if(this.is_disabled()||this.frozen())return void this.selectui.hide();var c,d,e=this.selectnode,f=this.selectui.fileinfo,g=a.Lang.trim(e.one(".fp-saveas input").get("value")),h=g&&g!=f.fullname,i=e.one(".fp-path select"),j=i.get("selectedIndex"),k=i.get("options").item(j).get("value"),l=k!=this.get_parent_folder_name(f),m=a.Lang.trim(e.one(".fp-author input").get("value")),n=m!=a.Lang.trim(f.author),o=e.one(".fp-license select"),p=o.get("selectedIndex"),q=o.get("options").item(p).get("value"),r=q!=f.license,s={callback:this.update_file,callbackargs:[!0],scope:this};if("folder"==f.type){if(!g)return void this.print_msg(M.util.get_string("entername","repository"),"error");if(h||l){if(!b)return s.message=M.util.get_string("confirmrenamefolder","repository"),void this.show_confirm_dialog(s);c={filepath:f.filepath,newdirname:g,newfilepath:k},d="updatedir"}}else{if(!g)return void this.print_msg(M.util.get_string("enternewname","repository"),"error");if((h||l)&&!b&&f.refcount)return s.message=M.util.get_string("confirmrenamefile","repository",f.refcount),void this.show_confirm_dialog(s);(h||l||r||n)&&(c={filepath:f.filepath,filename:f.fullname,newfilename:g,newfilepath:k,newlicense:q,newauthor:m},d="updatefile")}return d?(e.addClass("loading"),void this.request({action:d,scope:this,params:c,callback:function(a,b,c){b.error?(e.removeClass("loading"),c.scope.print_msg(b.error,"error")):(c.scope.selectui.hide(),c.scope.refresh(b&&b.filepath?b.filepath:"/"),"undefined"!=typeof M.core_formchangechecker&&M.core_formchangechecker.set_form_changed())}})):void this.selectui.hide()},show_confirm_dialog:function(b){if(!this.confirm_dlg){this.confirm_dlg_node=a.Node.createWithFilesSkin(M.totara_form.element_filemanager.templates.confirmdialog);var c=this.confirm_dlg_node;c.generateID(),this.confirm_dlg=new M.core.dialogue({draggable:!0,bodyContent:c,centered:!0,modal:!0,visible:!1,buttons:{}});var d=function(a){var b=this.confirm_dlg.dlgopt;a.preventDefault(),this.confirm_dlg.hide(),b.callback&&(b.callbackargs?b.callback.apply(b.scope||this,b.callbackargs):b.callback.apply(b.scope||this))},e=function(a){a.preventDefault(),this.confirm_dlg.hide()};c.one(".fp-dlg-butconfirm").on("click",d,this),c.one(".fp-dlg-butcancel").on("click",e,this)}this.confirm_dlg.dlgopt=b,this.confirm_dlg_node.one(".fp-dlg-text").setContent(b.message),this.confirm_dlg.show()},setup_select_file:function(){var b=this.selectnode;b.all(".fp-saveas,.fp-path,.fp-author,.fp-license").each(function(a){a.all("label").set("for",a.one("input,select").generateID())}),this.populate_licenses_select(b.one(".fp-license select"));var c=b.one(".fp-file-update"),d=b.one(".fp-file-download"),e=b.one(".fp-file-delete"),f=b.one(".fp-file-zip"),g=b.one(".fp-file-unzip"),h=b.one(".fp-file-setmain"),i=b.all(".fp-file-cancel");this.is_frozen()?(c&&c.hide(),e&&e.hide(),f&&f.hide(),g&&g.hide(),h&&h.hide(),b.all("form input").each(function(){this.setAttribute("readonly","readonly")}),b.all("form select").each(function(){this.setAttribute("disabled","disabled")})):(c.on("click",function(a){a.preventDefault(),this.update_file()},this),b.all("form").on("keydown",function(a){13==a.keyCode&&(a.preventDefault(),this.update_file())},this),e.on("click",function(a){a.preventDefault();var b={},c={},d=this.selectui.fileinfo;b.scope=this,c.filepath=d.filepath,"folder"==d.type?(c.filename=".",b.message=M.util.get_string("confirmdeletefolder","repository")):(c.filename=d.fullname,d.refcount?b.message=M.util.get_string("confirmdeletefilewithhref","repository",d.refcount):b.message=M.util.get_string("confirmdeletefile","repository")),b.callbackargs=[c],b.callback=function(a){this.request({action:"delete",scope:this,params:a,callback:function(a,b,c){c.scope.filecount--,c.scope.refresh(b.filepath),"undefined"!=typeof M.core_formchangechecker&&M.core_formchangechecker.set_form_changed()}})},this.selectui.hide(),this.show_confirm_dialog(b)},this),f.on("click",function(a){a.preventDefault();var c={},d=this.selectui.fileinfo;"folder"==d.type&&(c.filepath=d.filepath,c.filename=".",b.addClass("loading"),this.request({action:"zip",scope:this,params:c,callback:function(a,b,c){c.scope.selectui.hide(),c.scope.refresh(b.filepath)}}))},this),g.on("click",function(a){a.preventDefault();var c={},d=this.selectui.fileinfo;"zip"==d.type&&(c.filepath=d.filepath,c.filename=d.fullname,b.addClass("loading"),this.request({action:"unzip",scope:this,params:c,callback:function(a,b,c){c.scope.selectui.hide(),c.scope.refresh(b.filepath)}}))},this),h.on("click",function(a){a.preventDefault();var c={},d=this.selectui.fileinfo;this.enablemainfile&&"folder"!=d.type&&(c.filepath=d.filepath,c.filename=d.fullname,b.addClass("loading"),this.request({action:"setmainfile",scope:this,params:c,callback:function(a,b,c){c.scope.selectui.hide(),c.scope.refresh(d.filepath)}}))},this)),d.on("click",function(b){if(b.preventDefault(),"folder"!=this.selectui.fileinfo.type){var c=a.Node.create("<iframe></iframe>").setStyles({visibility:"hidden",width:"1px",height:"1px"});c.set("src",this.selectui.fileinfo.url),a.one("body").appendChild(c)}},this),i.on("click",function(a){a.preventDefault(),this.selectui.hide()},this)},get_parent_folder_name:function(a){if("folder"!=a.type||a.filepath.length<a.fullname.length+1)return a.filepath;var b=a.filepath.substr(0,a.filepath.length-a.fullname.length-1),c=a.filepath.substr(a.filepath.length-a.fullname.length-2);return c=="/"+a.fullname+"/"?b:a.filepath},select_file:function(b){if(!this.is_disabled()){var c=this.selectnode;c.removeClass("loading").removeClass("fp-folder").removeClass("fp-file").removeClass("fp-zip").removeClass("fp-cansetmain"),"folder"==b.type||"zip"==b.type?c.addClass("fp-"+b.type):c.addClass("fp-file"),this.enablemainfile&&1!=b.sortorder&&"file"==b.type&&c.addClass("fp-cansetmain"),this.selectui.fileinfo=b,c.one(".fp-saveas input").set("value",b.fullname);var d=this.get_parent_folder_name(b);c.all(".fp-author input").set("value",b.author?b.author:""),c.all(".fp-license select option[selected]").set("selected",!1),c.all(".fp-license select option[value="+b.license+"]").set("selected",!0),c.all(".fp-path select option[selected]").set("selected",!1),c.all(".fp-path select option").each(function(a){a.get("value")==d&&a.set("selected",!0)}),this.is_frozen()?(c.all(".fp-author input").setAttribute("readonly","readonly"),c.all(".fp-license select").setAttribute("disabled","disabled")):(c.all(".fp-author input").setAttribute("readonly","folder"==b.type?"readonly":""),c.all(".fp-license select").setAttribute("disabled","folder"==b.type?"disabled":""));var e=["datemodified","datecreated","size","dimensions","original","reflist"];for(var f in e)if(c.one(".fp-"+e[f])){var g=b[e[f]+"_f"]?b[e[f]+"_f"]:b[e[f]]?b[e[f]]:"";"reflist"!==e[f]&&(g=a.Escape.html(g)),c.one(".fp-"+e[f]).addClassIf("fp-unknown",""+g=="").one(".fp-value").setContent(g)}var h=a.Node.create("<img/>").set("src",b.realthumbnail?b.realthumbnail:b.thumbnail).setStyle("maxHeight",""+(b.thumbnail_height?b.thumbnail_height:90)+"px").setStyle("maxWidth",""+(b.thumbnail_width?b.thumbnail_width:90)+"px");c.one(".fp-thumbnail").setContent("").appendChild(h),b.isref&&!b.original&&(c.one(".fp-original").removeClass("fp-unknown").addClass("fp-loading"),this.request({action:"getoriginal",scope:this,params:{filepath:b.filepath,filename:b.fullname},callback:function(d,e,f){var g=f.scope;g.selectui.fileinfo&&b&&g.selectui.fileinfo.filepath==b.filepath&&g.selectui.fileinfo.fullname==b.fullname&&(c.one(".fp-original").removeClass("fp-loading"),e.original?(b.original=e.original,c.one(".fp-original .fp-value").setContent(a.Escape.html(b.original))):c.one(".fp-original .fp-value").setContent(M.util.get_string("unknownsource","repository")))}},!1)),c.one(".fp-refcount").setContent(b.refcount?M.util.get_string("referencesexist","repository",b.refcount):""),b.refcount&&!b.reflist&&(c.one(".fp-reflist").removeClass("fp-unknown").addClass("fp-loading"),this.request({action:"getreferences",scope:this,params:{filepath:b.filepath,filename:b.fullname},callback:function(d,e,f){var g=f.scope;if(g.selectui.fileinfo&&b&&g.selectui.fileinfo.filepath==b.filepath&&g.selectui.fileinfo.fullname==b.fullname)if(c.one(".fp-reflist").removeClass("fp-loading"),e.references){b.reflist="";for(var h in e.references)b.reflist+="<li>"+a.Escape.html(e.references[h])+"</li>";c.one(".fp-reflist .fp-value").setContent(b.reflist)}else c.one(".fp-reflist .fp-value").setContent("")}},!1));var i=b.fullname,j=50;i.length>j&&(i=i.substring(0,j)+"...");var k=M.util.get_string("edit","moodle")+" "+i;a.one("#fm-dialog-label_"+c.get("id")).setContent(a.Escape.html(k)),this.selectui.show(),a.one("#"+c.get("id")).focus()}},render:function(){this.print_path(),this.view_files(null)},has_folder:function(a){var b;for(var c in this.options.list)if(b=this.options.list[c],"folder"==b.type&&b.fullname==a)return!0;return!1}});var d=a.one("#filemanager-"+b.client_id);d.removeClass("fm-loading").addClass("fm-loaded");var e=new c(b);if(!b.frozen){var f={filemanager:e,acceptedtypes:b.filepicker.accepted_types,clientid:b.client_id,author:b.author,maxfiles:b.maxfiles,maxbytes:b.maxbytes,areamaxbytes:b.areamaxbytes,itemid:b.itemid,repositories:e.filepicker_options.repositories,containerid:e.dndcontainer.get("id"),contextid:b.context.id};M.form_dndupload.init(a,f)}},{init_filemanager:function(b){var d=[];d.push({key:"edit",component:"moodle"}),d.push({key:"invalidjson",component:"repository"}),d.push({key:"error",component:"moodle"}),d.push({key:"info",component:"moodle"}),d.push({key:"newfolder",component:"repository"}),d.push({key:"invalidjson",component:"repository"}),d.push({key:"draftareanofiles",component:"repository"}),d.push({key:"entername",component:"repository"}),d.push({key:"confirmrenamefolder",component:"repository"}),d.push({key:"enternewname",component:"repository"}),d.push({key:"confirmrenamefile",component:"repository"}),d.push({key:"confirmdeletefolder",component:"repository"}),d.push({key:"confirmdeletefilewithhref",component:"repository"}),d.push({key:"confirmdeletefile",component:"repository"}),d.push({key:"unknownsource",component:"repository"}),d.push({key:"referencesexist",component:"repository"}),d.push({key:"unknownsource",component:"repository"}),d.push({key:"unknownsource",component:"repository"}),c.get_strings(d).done(function(){var c=["moodle-core-notification-dialogue","core_filepicker","base","io-base","node","json","core_dndupload","panel","resize-plugin","dd-plugin"];a.use(c,function(a){M.core_filepicker.set_templates(a,b.filepicker.fptemplates),b.filepicker.fptemplates=null,M.totara_form.element_filemanager.templates=b.fmtemplates,b.fmtemplates=null,M.totara_form.element_filemanager.init(a,b)})})}}});
define('totara_form/form_element_select', ["jquery","totara_form/form"],function(a,b){function c(a,d,e,f){return this instanceof c?(b.Element.apply(this,arguments),this.input=null,void(this.validationerroradded=!1)):new c(a,d,e,f)}var d="totara_form-error-container",e="."+d;return c.prototype=Object.create(b.Element.prototype),c.prototype.constructor=c,c.prototype.toString=function(){return"[object SelectElement]"},c.prototype.init=function(b){var c=this.id,d=a("#"+c),e=this,f=a.Deferred(),g='input[type="submit"]:not([formnovalidate])';this.input=d,this.input.change(a.proxy(this.changed,this)),this.input.attr("required")?require(["totara_form/modernizr"],function(b){b.input.required||(d.change(a.proxy(e.polyFillValidate,e)),d.closest("form").find(g).click(a.proxy(e.polyFillValidate,e))),f.resolve()}):f.resolve(),f.done(b)},c.prototype.polyFillValidate=function(b){var c=!1,d=this.input;d.find("option").each(function(b,d){a(d).prop("selected")&&""!==a(d).val()&&(c=!0)}),c?(this.validationerroradded=!1,d.closest(".tf_element").find(e).remove()):(b.preventDefault(),this.validationerroradded||(this.validationerroradded=!0,require(["core/templates","core/str","core/config"],function(a,b,c){b.get_string("required","core").done(function(b){var e={errors_has_items:!0,errors:[{message:b}]};a.render("totara_form/validation_errors",e,c.theme).done(function(a){d.parent().prepend(a)})})})))},c.prototype.getValue=function(){return this.input.val()},c});
define('totara_hierarchy/mygoals', ["jquery","core/config"],function(a,b){var c={init_company:function(b,d){a("#companygoals").on("change",".company_scalevalue_selector",function(){c._update_goal(b,d,a(this).data("goalid"),a(this).val())})},init_personal:function(b,d){a("#personalgoals").on("change",".personal_scalevalue_selector",function(){c._update_goal(b,d,a(this).data("goalid"),a(this).val())})},init_single_personal:function(b,d){a("#page-totara-hierarchy-prefix-goal-item-view .personal_scalevalue_selector").change(function(){c._update_goal(b,d,a(this).data("goalid"),a(this).val())})},_update_goal:function(c,d,e,f){var g={scope:d,sesskey:b.sesskey,goalitemid:e,userid:c,scalevalueid:f};a.get(b.wwwroot+"/totara/hierarchy/prefix/goal/update-scalevalue.php",g)}};return c});
define('totara_hierarchy/competency_item', ["jquery","core/config","core/str"],function(a,b,c){var d=function(d,e){if(c.get_string("assignrelatedcompetencies","totara_hierarchy").done(function(a){var c=b.wwwroot+"/totara/hierarchy/prefix/competency/related/";totaraMultiSelectDialog("related",a,c+"find.php?id="+d,c+"save.php?id="+d+"&deleteexisting=1&add=")}),"undefined"!=typeof e&&e)totaraDialog_handler_assignEvidence=function(){},totaraDialog_handler_assignEvidence.prototype=new totaraDialog_handler_treeview,totaraDialog_handler_assignEvidence.prototype._handle_update_hierarchy=function(b){var c=this;a("span",b).click(function(){var b=a(this).parent(),d=b.attr("id").substr(10);"cat"!=d.substr(0,3)&&c._handle_course_click(d)})},totaraDialog_handler_assignEvidence.prototype._handle_course_click=function(a){var b=this.baseurl+"course.php?id="+a+"&competency="+d;this._dialog.showLoading(),this._dialog._request(b,{object:this,method:"_display_evidence"})},totaraDialog_handler_assignEvidence.prototype._display_evidence=function(b){this._dialog.hideLoading(),a(".selected",this._dialog.dialog).html(b);var c=this;a("#available-evidence",this._dialog.dialog).find(".addbutton").click(function(b){b.preventDefault();var e=a(this).parent().attr("type"),f=a(this).parent().attr("id"),g=c.baseurl+"add.php?competency="+d+"&type="+e+"&instance="+f;c._dialog._request(g,{object:c,method:"_update"})})};else{totaraDialog_handler_compEvidence=function(){},totaraDialog_handler_compEvidence.prototype=new totaraDialog_handler_treeview_multiselect,totaraDialog_handler_compEvidence.prototype._update=function(b){this._dialog.hide(),a(".noitems-"+this._title).remove();var c=a(b).find("#list-evidence"),d=a("#list-evidence");d.size()?d.replaceWith(c):a("div#evidence-list-container").append(c)};var f=b.wwwroot+"/totara/hierarchy/prefix/competency/evidenceitem/",g=f+"add.php?competency="+d+"&type=coursecompletion&instance=0&deleteexisting=1&update=",h={},i=new totaraDialog_handler_compEvidence;i.baseurl=f;var j=[];j.push({key:"save",component:"totara_core"}),j.push({key:"cancel",component:"moodle"}),j.push({key:"assigncoursecompletions",component:"totara_hierarchy"}),c.get_strings(j).done(function(a){for(var b=[],c=0;c<j.length;c++)b[j[c].key]=a[c];h[b.save]=function(){i._save(g)},h[b.cancel]=function(){i._cancel()},totaraDialogs.evidence=new totaraDialog("evidence","show-evidence-dialog",{buttons:h,title:"<h2>"+b.assigncoursecompletions+"</h2>"},f+"edit.php?id="+d,i)})}if("undefined"!=typeof e&&e){var j=[];j.push({key:"cancel",component:"moodle"}),j.push({key:"assignnewevidenceitem",component:"totara_hierarchy"}),c.get_strings(j).done(function(a){for(var c=[],e=0;e<j.length;e++)c[j[e].key]=a[e];var f=b.wwwroot+"/totara/hierarchy/prefix/competency/evidenceitem/",g={},h=new totaraDialog_handler_assignEvidence;h.baseurl=f,g[c.cancel]=function(){h._cancel()},totaraDialogs.evidence=new totaraDialog("evidence","show-evidence-dialog",{buttons:g,title:"<h2>"+c.assignnewevidenceitem+"</h2>"},f+"edit.php?id="+d,h)})}};return{item:function(b,c){var e=a.Deferred();e.done(function(){d(b,c)}),window.dialogsInited?e.resolve():(a.isArray(window.dialoginits)||(window.dialoginits=[]),window.dialoginits.push(e.resolve))},template:function(d){var e=a.Deferred();e.done(function(){var a=b.wwwroot+"/totara/hierarchy/prefix/competency/template/";c.get_string("assignnewcompetency","competency").done(function(b){totaraMultiSelectDialog("assignment","<h2>"+b+"</h2>",a+"find_competency.php?templateid="+d,a+"save_competency.php?templateid="+d+"&deleteexisting=1&add=")})}),window.dialogsInited?e.resolve():(a.isArray(window.dialoginits)||(window.dialoginits=[]),window.dialoginits.push(e.resolve))}}});
define('totara_hierarchy/hierarchyitems', ["jquery","core/config"],function(a,b){var c={init:function(b){var d=".list-assignedcompetencies .linktype, #list-evidence .linktype, #list-coursecompetency .linktype";a(document).on("change",d,function(){c._update_linktype(b,a(this).data("id"),a(this).val())})},_update_linktype:function(c,d,e){var f={type:c,c:d,sesskey:b.sesskey,t:e};a.get(b.wwwroot+"/totara/plan/update-linktype.php",f)}};return c});
define('totara_job/job_management_listing', ["jquery","core/ajax","core/notification","core/str"],function(a,b,c,d){function e(b){this.items=[],this.userid=b;var c=this;this.container=a('[data-enhance="job-management-listing"][data-enhanced="false"][data-userid="'+b+'"]'),this.container&&(this.container.attr("data-enhanced","true"),this.container.find("li a.editjoblink[data-id]").each(function(){var b=a(this),d=b.data("id"),e=b.data("sortorder");c.register_item(d,e,b)}),this.container.delegate("a[data-action]","click",function(b){b.preventDefault(),b.stopPropagation();var d=a(b.currentTarget),e=d.data("action"),f=d.data("id");"up"===e?c.move_item_up(f):"down"===e?c.move_item_down(f):"delete"===e&&c.confirm_delete(f)}))}return e.prototype.userid=null,e.prototype.items=[],e.prototype.container=null,e.prototype.register_item=function(b,c,d){a(d).parent("li").find("a[data-action]").each(function(){a(this).attr("data-id",b)}),this.items.push({id:b,sortorder:c})},e.prototype.confirm_delete=function(a){var b=this.container.find('a.editjoblink[data-id="'+a+'"]'),e=this,f=d.get_strings([{key:"deletejobassignment",component:"totara_job",param:null,lang:null},{key:"confirmdeletejobassignment",component:"totara_job",param:b.text(),lang:null},{key:"delete",component:"core",param:null,lang:null},{key:"cancel",component:"core",param:null,lang:null}]);f.done(function(b){b.push(function(){M.util.js_pending("totara_job-delete");var b=e.delete_job_assignment(a);b.done(function(){M.util.js_complete("totara_job-delete")})}),c.confirm.apply(c.confirm,b)})},e.prototype.delete_job_assignment=function(c){var d=[{methodname:"totara_job_external_delete_job_assignment",args:{userid:this.userid,jobassignmentid:c}}],e=a.Deferred(),f=this,g=b.call(d,!0,!0);return a.when.apply(null,g).done(function(){f.update_list(arguments[0]),e.resolve()}).fail(function(a){e.reject(a)}),e.promise()},e.prototype.move_item_up=function(b){var c=0,d=0,e=!1,f=this.get_item_by_id(b),g=this.container.find("ul");if(f===!1)return!1;for(c in this.items)this.items.hasOwnProperty(c)&&this.items[c].sortorder>=d&&this.items[c].sortorder<f.sortorder&&(e=this.items[c],d=this.items[c].sortorder);if(!e)return!1;M.util.js_pending("totara_job-move_item_up");var h=this.switch_items(e,f);h.done(function(){var b=a(g.find('a.editjoblink[data-id="'+f.id+'"]').parents("li")[0]);b.fadeOut(50,function(){b.css({backgroundColor:"#fefdb2"})}).fadeIn(500,function(){b.css({backgroundColor:"initial"})}),M.util.js_complete("totara_job-move_item_up")})},e.prototype.move_item_down=function(b){var c=0,d=2147483646,e=!1,f=this.get_item_by_id(b),g=this.container.find("ul");if(f===!1)return!1;for(c in this.items)this.items.hasOwnProperty(c)&&this.items[c].sortorder<=d&&this.items[c].sortorder>f.sortorder&&(e=this.items[c],d=this.items[c].sortorder);if(!e)return!1;M.util.js_pending("totara_job-move_item_down");var h=this.switch_items(e,f);h.done(function(){var b=a(g.find('a.editjoblink[data-id="'+f.id+'"]').parents("li")[0]);b.fadeOut(50,function(){b.css({backgroundColor:"#fefdb2"})}).fadeIn(500,function(){b.css({backgroundColor:"initial"})}),M.util.js_complete("totara_job-move_item_down")})},e.prototype.get_item_by_id=function(a){var b;for(b in this.items)if(this.items.hasOwnProperty(b)&&this.items[b].id==a)return this.items[b];return!1},e.prototype.switch_items=function(c,d){var e,f=!1,g=d.sortorder,h=!1,i=c.sortorder,j=[],k=a.Deferred(),l=this;for(e in this.items)this.items.hasOwnProperty(e)&&(this.items[e].id===c.id&&(this.items[e].sortorder=g,f=e),this.items[e].id===d.id&&(this.items[e].sortorder=i,h=e),j.push({jobassignid:this.items[e].id,sortorder:this.items[e].sortorder}));if(!f&&!h)return k.reject(),k.promise();var m=[{methodname:"totara_job_external_resort_job_assignments",args:{userid:this.userid,sort:j}}],n=b.call(m,!0,!0);return a.when.apply(null,n).done(function(){l.update_list(arguments[0]),k.resolve()}).fail(function(a){k.reject(a)}),k.promise()},e.prototype.update_list=function(a){var b,c,d,e,f,g,h,i=[],j=this.container.find("ul");for(b in a)if(a.hasOwnProperty(b)){d=a[b].jobassignid,e=a[b].sortorder,h=!1;for(c in this.items)if(this.items.hasOwnProperty(c)&&this.items[c].id==d){this.items[c].sortorder=e,h=!0;break}if(!h)continue;f=this.container.find('a[data-id="'+d+'"]'),f.attr("data-sortorder",e),g=f.parent("li"),i.push("<li>"+g.html()+"</li>")}j.empty(),j.append.apply(j,i),this.container.attr("data-jobcount",i.length)},{init:function(a){return new e(a)}}});
define('totara_plan/component', ["jquery","core/config"],function(a,b){var c={config:{},totaraDialog_handler_preRequisite:null,init:function(b){b&&("string"==typeof b&&(b=a.parseJSON(b)),c.config=b),c.add_handlers(),c.totaraDialog_handler_preRequisite=function(){},c.totaraDialog_handler_preRequisite.prototype=new totaraDialog_handler_treeview_multiselect,c.totaraDialog_handler_preRequisite.prototype._update=function(a){this._dialog.hide(),c.totara_totara_plan_update(a)}},add_handlers:function(){jQuery("table.dp-plan-component-items input, table.dp-plan-component-items select").change(function(){var d={updatesettings:"1",ajax:"1",sesskey:b.sesskey,page:c.config.page};d[a(this).attr("name")]=a(this).val(),a.post(b.wwwroot+"/totara/plan/component.php?id="+c.config.plan_id+"&c="+c.config.component_name+"&page="+c.config.page,d,c.totara_totara_plan_update)})},totara_totara_plan_update:function(b){a(".noitems-assign"+c.config.component_name).remove();var d=a(b).find("table.dp-plan-component-items"),e=a(b).filter(".plan_box"),f=a(b).filter(".paging")[0],g=a("form#dp-component-update table.dp-plan-component-items"),h=a(b).filter("span.noitems-assign"+c.config.component_name),i=a("div#dp-component-update-submit");h.size()?(a("form#dp-component-update div#dp-component-update-table").append(h),g.empty(),i.hide()):g.size()?(g.replaceWith(d),i.show()):(a("form#dp-component-update div#dp-component-update-table").append(d),i.show()),a("div.plan_box").replaceWith(e),a(".paging").replaceWith(f),c.add_handlers(),require(["core/str"],function(a){a.get_string("datepickerlongyeardisplayformat","totara_core").done(function(a){M.totara_core.build_datepicker(null,"[id^=duedate_"+c.config.component_name+"]",a)})})}};return c});
define('totara_plan/templates', ["jquery"],function(a){var b={templates:{},totaraDialog_handler_preRequisite:null,init:function(c){c&&(this.templates=c),a("select#id_templateid").change(function(){var c=a(this),d=c.val();a("input#id_name").val(b.templates[d].fullname);var e=b.templates[d].enddate;a("#id_enddate_day").val(e.mday),a("#id_enddate_month").val(e.mon),a("#id_enddate_year").val(e.year)})}};return b});
define('totara_program/check_completion', ["jquery","core/str","core/config","core/yui"],function(a,b,c,d){function e(a,b){var c=new M.core.confirm({title:M.util.get_string("fixconfirmtitle","totara_program"),question:M.util.get_string(b,"totara_program"),width:500});c.on("complete-yes",function(){window.location.href=a}),c.on("complete-no",function(a){a.preventDefault()}),c.show()}var f={init:function(b){d.use("moodle-core-notification-confirm",function(b){a(".problemaggregation a").on("click",function(b){b.preventDefault(),e(a(this).attr("href"),"fixconfirmsome")}),a(".problemsolution a").on("click",function(b){b.preventDefault(),e(a(this).attr("href"),"fixconfirmone")})})}};return f});
define('totara_reportbuilder/instantfilter', ["jquery","core/config","core/templates"],function(a,b,c){var d={xhr:null,init:function(){a(".rb-sidebar input:not(.ignoredirty), .rb-sidebar select").change(function(b){d.xhr&&d.xhr.abort(),0===a(b.target).siblings(".instantfilterwait").length&&c.renderIcon("loading","loading","instantfilterwait").done(function(c){a(c).insertAfter(a(b.target).parent().children().last())}),d.xhr=d.refresh_results()})},split_search:function(a){var b={};if(void 0===a||a.length<1)return b;for(var c=a.slice(1).split("&"),d=0;d<c.length;d++){var e=c[d].split("="),f=decodeURIComponent(e[0]).replace(/\+/g," "),g=decodeURIComponent(e[1]).replace(/\+/g," ");void 0===b[f]&&(b[f]=[]),b[f].push(g)}return b},remove_param:function(a,b){return a[b]&&delete a[b],a},build_search:function(a){var b="?";for(var c in a)for(var d=0;d<a[c].length;d++)b+="?"==b?"":"&",b+=encodeURIComponent(c)+"="+encodeURIComponent(a[c][d]);return b},refresh_results:function(c){var e=window.location.search,f=d.split_search(e);return f=d.remove_param(f,"spage"),f=d.remove_param(f,"ssort"),f=d.remove_param(f,"sid"),f=d.remove_param(f,"clearfilters"),e=d.build_search(f),a.post(b.wwwroot+"/totara/reportbuilder/ajax/instantreport.php"+e,a(".rb-sidebar").serialize()).done(function(b){var d=a(".instantfilterwait");d.siblings(".sr-only").remove(),d.remove(),a(".rb-display-table-container").replaceWith(a(b).find(".rb-display-table-container")),a(".rb-record-count").replaceWith(a(b).find(".rb-record-count")),a(b).find(".rb-sidebar.mform label").each(function(b,c){var d=a(c);d.attr("for")&&a('label[for="'+d.attr("for")+'"]').html(d.html())}),c&&c()})}};return d});
define('totara_reportbuilder/filter_dialogs', ["jquery","core/config","core/str"],function(a,b,c){var d={waitingitems:[],reportid:0,init:function(b,c,e,f,g){d.waitingitems.push({filter:b,value:c,hierarchytype:e,name:f}),d.reportid=g,window.dialogsInited?this.rb_init_filter_dialogs():(a.isArray(window.dialoginits)||(window.dialoginits=[]),1===this.waitingitems.length&&window.dialoginits.push(this.rb_init_filter_dialogs))},rb_init_filter_dialogs:function(){var b=a.extend(!0,[],d.waitingitems);d.waitingitems=[],a.each(b,function(){switch(this.filter){case"hierarchy":d.rb_load_hierarchy_filters(this);break;case"badge":d.rb_load_badge_filters(this);break;case"jobassign_multi":d.rb_load_jobassign_multi_filters();case"hierarchy_multi":d.rb_load_hierarchy_multi_filters();break;case"cohort":d.rb_load_cohort_filters();break;case"category":d.rb_load_category_filters();break;case"course_multi":d.rb_load_course_multi_filters()}}),a(document).on("click",".multiselect-selected-item a",function(b){b.preventDefault();var c=a(this).parents("div.multiselect-selected-item"),d=c.data("filtername"),e=c.data("id"),f=a("input[name="+d+"]"),g=f.val(),h=g.split(","),i=a.grep(h,function(a){return a!=e}),j=i.join(",");f.val(j),c.remove()})},rb_load_hierarchy_filters:function(d){if(d.name)var e="input#show-"+d.name+"-dialog";else var e="input";switch(d.hierarchytype){case"org":a(e+".rb-filter-choose-org").each(function(){var e=a(this).attr("id");e=e.substr(5,e.length-12);var f=b.wwwroot+"/totara/hierarchy/prefix/organisation/assign/";c.get_string("chooseorganisation","totara_hierarchy").done(function(a){totaraSingleSelectDialog(e,a+d.value,f+"find.php?",e,e+"title")}),"0"===a("select[name="+e+"_op]").val()&&(a("input[name="+e+"_rec]").prop("disabled",!0),a("#show-"+e+"-dialog").prop("disabled",!0))});break;case"pos":a(e+".rb-filter-choose-pos").each(function(){var e=a(this).attr("id");e=e.substr(5,e.length-12);var f=b.wwwroot+"/totara/hierarchy/prefix/position/assign/";c.get_string("chooseposition","totara_hierarchy").done(function(a){totaraSingleSelectDialog(e,a+d.value,f+"position.php?",e,e+"title")}),"0"===a("select[name="+e+"_op]").val()&&(a("input[name="+e+"_rec]").prop("disabled",!0),a("#show-"+e+"-dialog").prop("disabled",!0))});break;case"comp":a(e+".rb-filter-choose-comp").each(function(){var e=a(this).attr("id");e=e.substr(5,e.length-12);var f=b.wwwroot+"/totara/hierarchy/prefix/competency/assign/";c.get_string("selectcompetency","totara_hierarchy").done(function(a){totaraSingleSelectDialog(e,a+d.value,f+"find.php?",e,e+"title")}),"0"===a("select[name="+e+"_op]").val()&&(a("input[name="+e+"_rec]").prop("disabled",!0),a("#show-"+e+"-dialog").prop("disabled",!0))})}},rb_load_jobassign_multi_filters:function(){var d=this;a("div.rb-man-add-link a").each(function(){var e=a(this).attr("id");e=e.substr(5,e.length-12);var f=b.wwwroot+"/totara/job/assignfilter/manager/";c.get_string("choosemanplural","totara_reportbuilder").done(function(a){totaraMultiSelectDialogRbFilter(e,a,f+"find.php?reportid="+d.reportid,f+"save.php?reportid="+d.reportid+"&filtername="+e+"&ids=")})}),a("div.rb-app-add-link a").each(function(){var e=a(this).attr("id");e=e.substr(5,e.length-12);var f=b.wwwroot+"/totara/job/assignfilter/appraiser/";c.get_string("chooseappplural","totara_reportbuilder").done(function(a){totaraMultiSelectDialogRbFilter(e,a,f+"find.php?reportid="+d.reportid,f+"save.php?reportid="+d.reportid+"&filtername="+e+"&ids=")})})},rb_load_hierarchy_multi_filters:function(){a("div.rb-org-add-link a").each(function(){var d=a(this).attr("id");d=d.substr(5,d.length-12);var e=b.wwwroot+"/totara/hierarchy/prefix/organisation/assignfilter/";c.get_string("chooseorgplural","totara_reportbuilder").done(function(a){totaraMultiSelectDialogRbFilter(d,a,e+"find.php?",e+"save.php?filtername="+d+"&ids=")})}),a("div.rb-pos-add-link a").each(function(){var d=a(this).attr("id");d=d.substr(5,d.length-12);var e=b.wwwroot+"/totara/hierarchy/prefix/position/assignfilter/";c.get_string("chooseposplural","totara_reportbuilder").done(function(a){totaraMultiSelectDialogRbFilter(d,a,e+"find.php?",e+"save.php?filtername="+d+"&ids=")})}),a("div.rb-comp-add-link a").each(function(){var d=a(this).attr("id");d=d.substr(5,d.length-12);var e=b.wwwroot+"/totara/hierarchy/prefix/competency/assignfilter/";c.get_string("choosecompplural","totara_reportbuilder").done(function(a){totaraMultiSelectDialogRbFilter(d,a,e+"find.php?",e+"save.php?filtername="+d+"&ids=")})})},rb_load_cohort_filters:function(){a("div.rb-cohort-add-link a").each(function(){var d=a(this).attr("id");d=d.substr(5,d.length-12);var e=b.wwwroot+"/totara/reportbuilder/ajax/";c.get_string("choosecohorts","totara_cohort").done(function(a){totaraMultiSelectDialogRbFilter(d,a,e+"find_cohort.php?sesskey="+b.sesskey,e+"save_cohort.php?sesskey="+b.sesskey+"&filtername="+d+"&ids=")})})},rb_load_badge_filters:function(d){a("div.rb-badge-add-link a").each(function(){var e=a(this).attr("id");e=e.substr(5,e.length-12);var f=b.wwwroot+"/totara/reportbuilder/ajax/";c.get_string("choosebadges","badges").done(function(a){totaraMultiSelectDialogRbFilter(e,a,f+"find_badge.php?reportid="+d.value+"&sesskey="+b.sesskey,f+"save_badge.php?filtername="+e+"&sesskey="+b.sesskey+"&ids=")})})},rb_load_category_filters:function(){a(document).on("change","#id_course_category-path_op",function(b){b.preventDefault();var c=a(this).attr("name");c=c.substr(0,c.length-3),"0"===a(this).val()?(a("input[name="+c+"_rec]").prop("disabled",!0),a("#show-"+c+"-dialog").prop("disabled",!0)):(a("input[name="+c+"_rec]").prop("disabled",!1),a("#show-"+c+"-dialog").prop("disabled",!1))}),a("input.rb-filter-choose-category").each(function(){var d=a(this).attr("id");d=d.substr(5,d.length-12);var e=b.wwwroot+"/totara/reportbuilder/ajax/filter/category/";c.get_string("choosecatplural","totara_reportbuilder").done(function(a){totaraMultiSelectDialogRbFilter(d,a,e+"find.php?sesskey="+b.sesskey,e+"save.php?filtername="+d+"&sesskey="+b.sesskey+"&ids=")}),"0"===a("select[name="+d+"_op]").val()&&(a("input[name="+d+"_rec]").prop("disabled",!0),a("#show-"+d+"-dialog").prop("disabled",!0))})},rb_load_course_multi_filters:function(){a(document).on("change","#id_course-id_op",function(b){b.preventDefault();var c=a(this).attr("name");c=c.substr(0,c.length-3),"0"===a(this).val()?(a("input[name="+c+"_rec]").prop("disabled",!0),a("#show-"+c+"-dialog").prop("disabled",!0)):(a("input[name="+c+"_rec]").prop("disabled",!1),a("#show-"+c+"-dialog").prop("disabled",!1))}),a("input.rb-filter-choose-course").each(function(){var d=a(this).attr("id");d=d.substr(5,d.length-12);var e=b.wwwroot+"/totara/reportbuilder/ajax/filter/course_multi/";c.get_string("coursemultiitemchoose","totara_reportbuilder").done(function(a){totaraMultiSelectDialogRbFilter(d,a,e+"find.php?sesskey="+b.sesskey,e+"save.php?filtername="+d+"&sesskey="+b.sesskey+"&ids=")}),"0"===a("select[name="+d+"_op]").val()&&(a("input[name="+d+"_rec]").prop("disabled",!0),a("#show-"+d+"-dialog").prop("disabled",!0))})}};return d});
define('tool_templatelibrary/display', ["jquery","core/ajax","core/log","core/notification","core/templates","core/config","core/str"],function(a,b,c,d,e,f,g){var h=function(a,b){var c="@template "+b,d=0,e=[];if(e=a.match(/{{!([\s\S]*?)}}/g),null!==e)for(d=0;d<e.length;d++){var f=e[d],g=f.indexOf(c);if(g!==-1){var h=g+c.length+1;return f=f.substr(h,f.length-2-h)}}return!1},i=function(b,i,j){g.get_string("templateselected","tool_templatelibrary",b).done(function(b){a('[data-region="displaytemplateheader"]').text(b)}).fail(d.exception);var k=h(i,b);k===!1&&(k=h(j,b)),k&&(i=k),a('[data-region="displaytemplatesource"]').text(i);var l=i.match(/Example context \(json\):([\s\S]*)/),m=!1;if(l){var n=l[1].trim();n=n.replace(/__WWWROOT__/g,f.wwwroot),n=n.replace(/__THEME__/g,f.theme);try{m=a.parseJSON(n)}catch(o){c.debug("Could not parse json example context for template."),c.debug(o)}}m?e.render(b,m).done(function(b,c){e.replaceNodeContents(a('[data-region="displaytemplateexample"]'),b,c)}).fail(d.exception):g.get_string("templatehasnoexample","tool_templatelibrary").done(function(b){a('[data-region="displaytemplateexample"]').text(b)}).fail(d.exception)},j=function(c){var e=c.split("/"),g=e.shift(),h=e.shift(),j=b.call([{methodname:"core_output_load_template",args:{component:g,template:h,themename:f.theme}},{methodname:"tool_templatelibrary_load_canonical_template",args:{component:g,template:h}}],!0,!1);a.when.apply(a,j).done(function(a,b){i(c,a,b)}).fail(d.exception)};return a('[data-region="list-templates"]').on("click","[data-templatename]",function(b){var c=a(this).data("templatename");b.preventDefault(),j(c)}),{}});
define('tool_templatelibrary/search', ["jquery","core/ajax","core/log","core/notification","core/templates"],function(a,b,c,d,e){var f=function(b){e.render("tool_templatelibrary/search_results",{templates:b}).done(function(b,c){e.replaceNode(a('[data-region="searchresults"]'),b,c)}).fail(d.exception)},g=function(){var c=a('[data-field="component"]').val(),e=a('[data-field="search"]').val();b.call([{methodname:"tool_templatelibrary_list_templates",args:{component:c,search:e},done:f,fail:d.exception}],!0,!1)},h=null,i=function(a,b){null!==h&&window.clearTimeout(h),h=window.setTimeout(function(){a(),h=null},b)},j=function(){i(g,400)};return a('[data-region="list-templates"]').on("change",'[data-field="component"]',j),a('[data-region="list-templates"]').on("input",'[data-field="search"]',j),g(),{}});
define('theme_bootstrapbase/bootstrap', ["jquery"],function(a){function b(b){a(".dropdown-backdrop").remove(),a(k).each(function(){var d=c(a(this));void 0!=b&&0!=d.find(b).length||d.removeClass("open")})}function c(b){var c,d=b.attr("data-target");return d||(d=b.attr("href"),d=d&&/#/.test(d)&&d.replace(/.*(?=#[^\s]*$)/,"")),c=d&&a(d),c&&c.length||(c=b.parent()),c}function d(b,c){var d,e=a.proxy(this.process,this),f=a(a(b).is("body")?window:b);this.options=a.extend({},a.fn.scrollspy.defaults,c),this.$scrollElement=f.on("scroll.scroll-spy.data-api",e),this.selector=(this.options.target||(d=a(b).attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=a("body"),this.refresh(),this.process()}a(".h1").hide(),a(function(){a.support.transition=function(){var a=function(){var a,b=document.createElement("bootstrap"),c={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(a in c)if(void 0!==b.style[a])return c[a]}();return a&&{end:a}}()});var e='[data-dismiss="alert"]',f=function(b){a(b).on("click",e,this.close)};f.prototype.close=function(b){function c(){d.trigger("closed").remove()}var d,e=a(this),f=e.attr("data-target");f||(f=e.attr("href"),f=f&&f.replace(/.*(?=#[^\s]*$)/,"")),d=a(f),b&&b.preventDefault(),d.length||(d=e.hasClass("alert")?e:e.parent()),d.trigger(b=a.Event("close")),b.isDefaultPrevented()||(d.removeClass("in"),a.support.transition&&d.hasClass("fade")?d.on(a.support.transition.end,c):c())};var g=a.fn.alert;a.fn.alert=function(b){return this.each(function(){var c=a(this),d=c.data("alert");d||c.data("alert",d=new f(this)),"string"==typeof b&&d[b].call(c)})},a.fn.alert.Constructor=f,a.fn.alert.noConflict=function(){return a.fn.alert=g,this},a(document).on("click.alert.data-api",e,f.prototype.close);var h=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.button.defaults,c)};h.prototype.setState=function(a){var b="disabled",c=this.$element,d=c.data(),e=c.is("input")?"val":"html";a+="Text",d.resetText||c.data("resetText",c[e]()),c[e](d[a]||this.options[a]),setTimeout(function(){"loadingText"==a?c.addClass(b).attr(b,b):c.removeClass(b).removeAttr(b)},0)},h.prototype.toggle=function(){var a=this.$element.closest('[data-toggle="buttons-radio"]');a&&a.find(".active").removeClass("active"),this.$element.toggleClass("active")};var g=a.fn.button;a.fn.button=function(b){return this.each(function(){var c=a(this),d=c.data("button"),e="object"==typeof b&&b;d||c.data("button",d=new h(this,e)),"toggle"==b?d.toggle():b&&d.setState(b)})},a.fn.button.defaults={loadingText:"loading..."},a.fn.button.Constructor=h,a.fn.button.noConflict=function(){return a.fn.button=g,this},a(document).on("click.button.data-api","[data-toggle^=button]",function(b){var c=a(b.target);c.hasClass("btn")||(c=c.closest(".btn")),c.button("toggle")});var i=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,"hover"==this.options.pause&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this))};i.prototype={cycle:function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},getActiveIndex:function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},to:function(b){var c=this.getActiveIndex(),d=this;if(!(b>this.$items.length-1||b<0))return this.sliding?this.$element.one("slid",function(){d.to(b)}):c==b?this.pause().cycle():this.slide(b>c?"next":"prev",a(this.$items[b]))},pause:function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition.end&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),clearInterval(this.interval),this.interval=null,this},next:function(){if(!this.sliding)return this.slide("next")},prev:function(){if(!this.sliding)return this.slide("prev")},slide:function(b,c){var d,e=this.$element.find(".item.active"),f=c||e[b](),g=this.interval,h="next"==b?"left":"right",i="next"==b?"first":"last",j=this;if(this.sliding=!0,g&&this.pause(),f=f.length?f:this.$element.find(".item")[i](),d=a.Event("slide",{relatedTarget:f[0],direction:h}),!f.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var b=a(j.$indicators.children()[j.getActiveIndex()]);b&&b.addClass("active")})),a.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(d),d.isDefaultPrevented())return;f.addClass(b),f[0].offsetWidth,e.addClass(h),f.addClass(h),this.$element.one(a.support.transition.end,function(){f.removeClass([b,h].join(" ")).addClass("active"),e.removeClass(["active",h].join(" ")),j.sliding=!1,setTimeout(function(){j.$element.trigger("slid")},0)})}else{if(this.$element.trigger(d),d.isDefaultPrevented())return;e.removeClass("active"),f.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return g&&this.cycle(),this}}};var g=a.fn.carousel;a.fn.carousel=function(b){return this.each(function(){var c=a(this),d=c.data("carousel"),e=a.extend({},a.fn.carousel.defaults,"object"==typeof b&&b),f="string"==typeof b?b:e.slide;d||c.data("carousel",d=new i(this,e)),"number"==typeof b?d.to(b):f?d[f]():e.interval&&d.pause().cycle()})},a.fn.carousel.defaults={interval:5e3,pause:"hover"},a.fn.carousel.Constructor=i,a.fn.carousel.noConflict=function(){return a.fn.carousel=g,this},a(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(b){var c,d,e=a(this),f=a(e.attr("data-target")||(c=e.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"")),g=a.extend({},f.data(),e.data());f.carousel(g),(d=e.attr("data-slide-to"))&&f.data("carousel").pause().to(d).cycle(),b.preventDefault()});var j=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.collapse.defaults,c),this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};j.prototype={constructor:j,dimension:function(){var a=this.$element.hasClass("width");return a?"width":"height"},show:function(){var b,c,d,e;if(!this.transitioning&&!this.$element.hasClass("in")){if(b=this.dimension(),c=a.camelCase(["scroll",b].join("-")),d=this.$parent&&this.$parent.find("> .accordion-group > .in"),d&&d.length){if(e=d.data("collapse"),e&&e.transitioning)return;d.collapse("hide"),e||d.data("collapse",null)}this.$element[b](0),this.transition("addClass",a.Event("show"),"shown"),a.support.transition&&this.$element[b](this.$element[0][c])}},hide:function(){var b;!this.transitioning&&this.$element.hasClass("in")&&(b=this.dimension(),this.reset(this.$element[b]()),this.transition("removeClass",a.Event("hide"),"hidden"),this.$element[b](0))},reset:function(a){var b=this.dimension();return this.$element.removeClass("collapse")[b](a||"auto")[0].offsetWidth,this.$element[null!==a?"addClass":"removeClass"]("collapse"),this},transition:function(b,c,d){var e=this,f=function(){"show"==c.type&&e.reset(),e.transitioning=0,e.$element.trigger(d)};this.$element.trigger(c),c.isDefaultPrevented()||(this.transitioning=1,this.$element[b]("in"),a.support.transition&&this.$element.hasClass("collapse")?this.$element.one(a.support.transition.end,f):f())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var g=a.fn.collapse;a.fn.collapse=function(b){return this.each(function(){var c=a(this),d=c.data("collapse"),e=a.extend({},a.fn.collapse.defaults,c.data(),"object"==typeof b&&b);d||c.data("collapse",d=new j(this,e)),"string"==typeof b&&d[b]()})},a.fn.collapse.defaults={toggle:!0},a.fn.collapse.Constructor=j,a.fn.collapse.noConflict=function(){return a.fn.collapse=g,this},a(document).on("click.collapse.data-api","[data-toggle=collapse]",function(b){var c,d=a(this),e=d.attr("data-target")||b.preventDefault()||(c=d.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,""),f=a(e).data("collapse")?"toggle":d.data();d[a(e).hasClass("in")?"addClass":"removeClass"]("collapsed"),a(e).collapse(f)});var k="[data-toggle=dropdown]",l=function(b){var c=a(b).on("click.dropdown.data-api",this.toggle);a("html").on("click.dropdown.data-api",function(){c.parent().removeClass("open")})};l.prototype={constructor:l,toggle:function(d){var e,f,g=a(this);if(!g.is(".disabled, :disabled"))return e=c(g),f=e.hasClass("open"),b(g),f||"ontouchstart"in document.documentElement&&a('<div class="dropdown-backdrop"/>').insertBefore(a(this)).on("click",b),e.toggleClass("open"),g.focus(),!1},keydown:function(b){var d,e,f,g,h;if(/(38|40|27)/.test(b.keyCode)&&(d=a(this),b.preventDefault(),b.stopPropagation(),!d.is(".disabled, :disabled"))){if(f=c(d),g=f.hasClass("open"),!g||g&&27==b.keyCode)return 27==b.which&&f.find(k).focus(),d.click();e=a("[role=menu] li:not(.divider):visible a",f),e.length&&(h=e.index(e.filter(":focus")),38==b.keyCode&&h>0&&h--,40==b.keyCode&&h<e.length-1&&h++,~h||(h=0),e.eq(h).focus())}}};var g=a.fn.dropdown;a.fn.dropdown=function(b){return this.each(function(){var c=a(this),d=c.data("dropdown");d||c.data("dropdown",d=new l(this)),"string"==typeof b&&d[b].call(c)})},a.fn.dropdown.Constructor=l,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=g,this},a(document).on("click.dropdown.data-api",b).on("click.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.dropdown.data-api",k,l.prototype.toggle).on("keydown.dropdown.data-api",k+", [role=menu]",l.prototype.keydown);var m=function(b,c){this.options=c,this.$element=a(b).delegate('[data-dismiss="modal"]',"click.dismiss.modal",a.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};m.prototype={constructor:m,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var b=this,c=a.Event("show");this.$element.trigger(c),this.isShown||c.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var c=a.support.transition&&b.$element.hasClass("fade");b.$element.parent().length||b.$element.appendTo(document.body),b.$element.show(),c&&b.$element[0].offsetWidth,b.$element.addClass("in").attr("aria-hidden",!1),b.enforceFocus(),c?b.$element.one(a.support.transition.end,function(){b.$element.focus().trigger("shown")}):b.$element.focus().trigger("shown")}))},hide:function(b){b&&b.preventDefault();b=a.Event("hide"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),a(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),a.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var b=this;a(document).on("focusin.modal",function(a){b.$element[0]===a.target||b.$element.has(a.target).length||b.$element.focus()})},escape:function(){var a=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(b){27==b.which&&a.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var b=this,c=setTimeout(function(){b.$element.off(a.support.transition.end),b.hideModal()},500);this.$element.one(a.support.transition.end,function(){clearTimeout(c),b.hideModal()})},hideModal:function(){var a=this;this.$element.hide(),this.backdrop(function(){a.removeBackdrop(),a.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(b){var c=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var d=a.support.transition&&c;if(this.$backdrop=a('<div class="modal-backdrop '+c+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?a.proxy(this.$element[0].focus,this.$element[0]):a.proxy(this.hide,this)),d&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;d?this.$backdrop.one(a.support.transition.end,b):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,b):b()):b&&b()}};var g=a.fn.modal;a.fn.modal=function(b){return this.each(function(){var c=a(this),d=c.data("modal"),e=a.extend({},a.fn.modal.defaults,c.data(),"object"==typeof b&&b);d||c.data("modal",d=new m(this,e)),"string"==typeof b?d[b]():e.show&&d.show()})},a.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},a.fn.modal.Constructor=m,a.fn.modal.noConflict=function(){return a.fn.modal=g,this},a(document).on("click.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d=c.attr("href"),e=a(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("modal")?"toggle":a.extend({remote:!/#/.test(d)&&d},e.data(),c.data());b.preventDefault(),e.modal(f).one("hide",function(){c.focus()})});var n=function(a,b){this.init("tooltip",a,b)};n.prototype={constructor:n,init:function(b,c,d){var e,f,g,h,i;for(this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.enabled=!0,g=this.options.trigger.split(" "),i=g.length;i--;)h=g[i],"click"==h?this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this)):"manual"!=h&&(e="hover"==h?"mouseenter":"focus",f="hover"==h?"mouseleave":"blur",this.$element.on(e+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(f+"."+this.type,this.options.selector,a.proxy(this.leave,this)));this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(b){return b=a.extend({},a.fn[this.type].defaults,this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},enter:function(b){var c,d=a.fn[this.type].defaults,e={};return this._options&&a.each(this._options,function(a,b){d[a]!=b&&(e[a]=b)},this),c=a(b.currentTarget)[this.type](e).data(this.type),c.options.delay&&c.options.delay.show?(clearTimeout(this.timeout),c.hoverState="in",void(this.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show))):c.show()},leave:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),c.options.delay&&c.options.delay.hide?(c.hoverState="out",void(this.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide))):c.hide()},show:function(){var b,c,d,e,f,g,h=a.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(h),h.isDefaultPrevented())return;switch(b=this.tip(),this.setContent(),this.options.animation&&b.addClass("fade"),f="function"==typeof this.options.placement?this.options.placement.call(this,b[0],this.$element[0]):this.options.placement,b.detach().css({top:0,left:0,display:"block"}),this.options.container?b.appendTo(this.options.container):b.insertAfter(this.$element),c=this.getPosition(),d=b[0].offsetWidth,e=b[0].offsetHeight,f){case"bottom":g={top:c.top+c.height,left:c.left+c.width/2-d/2};break;case"top":g={top:c.top-e,left:c.left+c.width/2-d/2};break;case"left":g={top:c.top+c.height/2-e/2,left:c.left-d};break;case"right":g={top:c.top+c.height/2-e/2,left:c.left+c.width}}this.applyPlacement(g,f),this.$element.trigger("shown")}},applyPlacement:function(a,b){var c,d,e,f,g=this.tip(),h=g[0].offsetWidth,i=g[0].offsetHeight;g.offset(a).addClass(b).addClass("in"),c=g[0].offsetWidth,d=g[0].offsetHeight,"top"==b&&d!=i&&(a.top=a.top+i-d,f=!0),"bottom"==b||"top"==b?(e=0,a.left<0&&(e=a.left*-2,a.left=0,g.offset(a),c=g[0].offsetWidth,d=g[0].offsetHeight),this.replaceArrow(e-h+c,c,"left")):this.replaceArrow(d-i,d,"top"),f&&g.offset(a)},replaceArrow:function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},setContent:function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},hide:function(){function b(){var b=setTimeout(function(){c.off(a.support.transition.end).detach()},500);c.one(a.support.transition.end,function(){clearTimeout(b),c.detach()})}var c=this.tip(),d=a.Event("hide");if(this.$element.trigger(d),!d.isDefaultPrevented())return c.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?b():c.detach(),this.$element.trigger("hidden"),this},fixTitle:function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var b=this.$element[0];return a.extend({},"function"==typeof b.getBoundingClientRect?b.getBoundingClientRect():{width:b.offsetWidth,height:b.offsetHeight},this.$element.offset())},getTitle:function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},tip:function(){return this.$tip=this.$tip||a(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(b){var c=b?a(b.currentTarget)[this.type](this._options).data(this.type):this;c.tip().hasClass("in")?c.hide():c.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var g=a.fn.tooltip;a.fn.tooltip=function(b){return this.each(function(){var c=a(this),d=c.data("tooltip"),e="object"==typeof b&&b;d||c.data("tooltip",d=new n(this,e)),"string"==typeof b&&d[b]()})},a.fn.tooltip.Constructor=n,a.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},a.fn.tooltip.noConflict=function(){return a.fn.tooltip=g,this};var o=function(a,b){this.init("popover",a,b)};o.prototype=a.extend({},a.fn.tooltip.Constructor.prototype,{constructor:o,setContent:function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content")[this.options.html?"html":"text"](c),a.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var a,b=this.$element,c=this.options;return a=("function"==typeof c.content?c.content.call(b[0]):c.content)||b.attr("data-content")},tip:function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var g=a.fn.popover;a.fn.popover=function(b){return this.each(function(){var c=a(this),d=c.data("popover"),e="object"==typeof b&&b;d||c.data("popover",d=new o(this,e)),"string"==typeof b&&d[b]()})},a.fn.popover.Constructor=o,a.fn.popover.defaults=a.extend({},a.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),a.fn.popover.noConflict=function(){return a.fn.popover=g,this},d.prototype={constructor:d,refresh:function(){var b,c=this;this.offsets=a([]),this.targets=a([]),b=this.$body.find(this.selector).map(function(){var b=a(this),d=b.data("target")||b.attr("href"),e=/^#\w/.test(d)&&a(d);return e&&e.length&&[[e.position().top+(!a.isWindow(c.$scrollElement.get(0))&&c.$scrollElement.scrollTop()),d]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){c.offsets.push(this[0]),c.targets.push(this[1])})},process:function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,d=c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(b>=d)return g!=(a=f.last()[0])&&this.activate(a);for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(!e[a+1]||b<=e[a+1])&&this.activate(f[a])},activate:function(b){var c,d;this.activeTarget=b,a(this.selector).parent(".active").removeClass("active"),d=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',c=a(d).parent("li").addClass("active"),c.parent(".dropdown-menu").length&&(c=c.closest("li.dropdown").addClass("active")),c.trigger("activate")}};var g=a.fn.scrollspy;a.fn.scrollspy=function(b){return this.each(function(){var c=a(this),e=c.data("scrollspy"),f="object"==typeof b&&b;e||c.data("scrollspy",e=new d(this,f)),"string"==typeof b&&e[b]()})},a.fn.scrollspy.Constructor=d,a.fn.scrollspy.defaults={offset:10},a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=g,this},a(window).on("load",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);b.scrollspy(b.data())})});var p=function(b){this.element=a(b)};p.prototype={constructor:p,show:function(){var b,c,d,e=this.element,f=e.closest("ul:not(.dropdown-menu)"),g=e.attr("data-target");g||(g=e.attr("href"),g=g&&g.replace(/.*(?=#[^\s]*$)/,"")),e.parent("li").hasClass("active")||(b=f.find(".active:last a")[0],d=a.Event("show",{relatedTarget:b}),e.trigger(d),d.isDefaultPrevented()||(c=a(g),this.activate(e.parent("li"),f),this.activate(c,c.parent(),function(){e.trigger({type:"shown",relatedTarget:b})})))},activate:function(b,c,d){function e(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),g?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var f=c.find("> .active"),g=d&&a.support.transition&&f.hasClass("fade");g?f.one(a.support.transition.end,e):e(),f.removeClass("in")}};var g=a.fn.tab;a.fn.tab=function(b){return this.each(function(){var c=a(this),d=c.data("tab");d||c.data("tab",d=new p(this)),"string"==typeof b&&d[b]()})},a.fn.tab.Constructor=p,a.fn.tab.noConflict=function(){return a.fn.tab=g,this},a(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault(),a(this).tab("show")});var q=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.typeahead.defaults,c),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=a(this.options.menu),this.shown=!1,this.listen()};q.prototype={constructor:q,select:function(){var a=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(a)).change(),this.hide()},updater:function(a){return a},show:function(){var b=a.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:b.top+b.height,left:b.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(b){var c;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(c=a.isFunction(this.source)?this.source(this.query,a.proxy(this.process,this)):this.source,c?this.process(c):this)},process:function(b){var c=this;return b=a.grep(b,function(a){return c.matcher(a)}),b=this.sorter(b),b.length?this.render(b.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(a){return~a.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(a){for(var b,c=[],d=[],e=[];b=a.shift();)b.toLowerCase().indexOf(this.query.toLowerCase())?~b.indexOf(this.query)?d.push(b):e.push(b):c.push(b);return c.concat(d,e)},highlighter:function(a){var b=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return a.replace(new RegExp("("+b+")","ig"),function(a,b){return"<strong>"+b+"</strong>"})},render:function(b){var c=this;return b=a(b).map(function(b,d){return b=a(c.options.item).attr("data-value",d),b.find("a").html(c.highlighter(d)),b[0]}),b.first().addClass("active"),this.$menu.html(b),this},next:function(b){var c=this.$menu.find(".active").removeClass("active"),d=c.next();d.length||(d=a(this.$menu.find("li")[0])),d.addClass("active")},prev:function(a){var b=this.$menu.find(".active").removeClass("active"),c=b.prev();c.length||(c=this.$menu.find("li").last()),c.addClass("active")},listen:function(){this.$element.on("focus",a.proxy(this.focus,this)).on("blur",a.proxy(this.blur,this)).on("keypress",a.proxy(this.keypress,this)).on("keyup",a.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",a.proxy(this.keydown,this)),this.$menu.on("click",a.proxy(this.click,this)).on("mouseenter","li",a.proxy(this.mouseenter,this)).on("mouseleave","li",a.proxy(this.mouseleave,this))},eventSupported:function(a){var b=a in this.$element;return b||(this.$element.setAttribute(a,"return;"),b="function"==typeof this.$element[a]),b},move:function(a){if(this.shown){switch(a.keyCode){case 9:case 13:case 27:a.preventDefault();break;case 38:a.preventDefault(),this.prev();break;case 40:a.preventDefault(),this.next()}a.stopPropagation()}},keydown:function(b){this.suppressKeyPressRepeat=~a.inArray(b.keyCode,[40,38,9,13,27]),this.move(b)},keypress:function(a){this.suppressKeyPressRepeat||this.move(a)},keyup:function(a){switch(a.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}a.stopPropagation(),a.preventDefault()},focus:function(a){this.focused=!0},blur:function(a){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(a){a.stopPropagation(),a.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(b){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),a(b.currentTarget).addClass("active")},mouseleave:function(a){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var g=a.fn.typeahead;a.fn.typeahead=function(b){return this.each(function(){var c=a(this),d=c.data("typeahead"),e="object"==typeof b&&b;d||c.data("typeahead",d=new q(this,e)),"string"==typeof b&&d[b]()})},a.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},a.fn.typeahead.Constructor=q,a.fn.typeahead.noConflict=function(){return a.fn.typeahead=g,this},a(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(b){var c=a(this);c.data("typeahead")||c.typeahead(c.data())});var r=function(b,c){this.options=a.extend({},a.fn.affix.defaults,c),this.$window=a(window).on("scroll.affix.data-api",a.proxy(this.checkPosition,this)).on("click.affix.data-api",a.proxy(function(){setTimeout(a.proxy(this.checkPosition,this),1)},this)),this.$element=a(b),this.checkPosition()};r.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b,c=a(document).height(),d=this.$window.scrollTop(),e=this.$element.offset(),f=this.options.offset,g=f.bottom,h=f.top,i="affix affix-top affix-bottom";"object"!=typeof f&&(g=h=f),"function"==typeof h&&(h=f.top()),"function"==typeof g&&(g=f.bottom()),b=!(null!=this.unpin&&d+this.unpin<=e.top)&&(null!=g&&e.top+this.$element.height()>=c-g?"bottom":null!=h&&d<=h&&"top"),this.affixed!==b&&(this.affixed=b,this.unpin="bottom"==b?e.top-d:null,this.$element.removeClass(i).addClass("affix"+(b?"-"+b:"")))}};var g=a.fn.affix;a.fn.affix=function(b){return this.each(function(){var c=a(this),d=c.data("affix"),e="object"==typeof b&&b;d||c.data("affix",d=new r(this,e)),"string"==typeof b&&d[b]()})},a.fn.affix.Constructor=r,a.fn.affix.defaults={offset:0},a.fn.affix.noConflict=function(){return a.fn.affix=g,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var b=a(this),c=b.data();c.offset=c.offset||{},c.offsetBottom&&(c.offset.bottom=c.offsetBottom),c.offsetTop&&(c.offset.top=c.offsetTop),b.affix(c)})})});
define('theme_roots/bootstrap', ["jquery","core/log"],function(a,b){function c(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.alert");d||c.data("bs.alert",d=new t(this)),"string"==typeof b&&d[b].call(c)})}function e(b){return this.each(function(){var c=a(this),d=c.data("bs.button"),e="object"==typeof b&&b;d||c.data("bs.button",d=new v(this,e)),"toggle"==b?d.toggle():b&&d.setState(b)})}function f(b){return this.each(function(){var c=a(this),d=c.data("bs.carousel"),e=a.extend({},w.DEFAULTS,c.data(),"object"==typeof b&&b),f="string"==typeof b?b:e.slide;d||c.data("bs.carousel",d=new w(this,e)),"number"==typeof b?d.to(b):f?d[f]():e.interval&&d.pause().cycle()})}function g(b){var c,d=b.attr("data-target")||(c=b.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");return a(d)}function h(b){return this.each(function(){var c=a(this),d=c.data("bs.collapse"),e=a.extend({},y.DEFAULTS,c.data(),"object"==typeof b&&b);!d&&e.toggle&&/show|hide/.test(b)&&(e.toggle=!1),d||c.data("bs.collapse",d=new y(this,e)),"string"==typeof b&&d[b]()})}function i(b){b&&3===b.which||(a(z).remove(),a(A).each(function(){var c=a(this),d=j(c),e={relatedTarget:this};d.hasClass("open")&&(b&&"click"==b.type&&/input|textarea/i.test(b.target.tagName)&&a.contains(d[0],b.target)||(d.trigger(b=a.Event("hide.bs.dropdown",e)),b.isDefaultPrevented()||(c.attr("aria-expanded","false"),d.removeClass("open").trigger("hidden.bs.dropdown",e))))}))}function j(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}function k(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new B(this)),"string"==typeof b&&d[b].call(c)})}function l(b,c){return this.each(function(){var d=a(this),e=d.data("bs.modal"),f=a.extend({},C.DEFAULTS,d.data(),"object"==typeof b&&b);e||d.data("bs.modal",e=new C(this,f)),"string"==typeof b?e[b](c):f.show&&e.show(c)})}function m(b){return this.each(function(){var c=a(this),d=c.data("bs.tooltip"),e="object"==typeof b&&b;!d&&/destroy|hide/.test(b)||(d||c.data("bs.tooltip",d=new D(this,e)),"string"==typeof b&&d[b]())})}function n(b){return this.each(function(){var c=a(this),d=c.data("bs.popover"),e="object"==typeof b&&b;!d&&/destroy|hide/.test(b)||(d||c.data("bs.popover",d=new E(this,e)),"string"==typeof b&&d[b]())})}function o(b,c){this.$body=a(document.body),this.$scrollElement=a(a(b).is(document.body)?window:b),this.options=a.extend({},o.DEFAULTS,c),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",a.proxy(this.process,this)),this.refresh(),this.process()}function p(b){return this.each(function(){var c=a(this),d=c.data("bs.scrollspy"),e="object"==typeof b&&b;d||c.data("bs.scrollspy",d=new o(this,e)),"string"==typeof b&&d[b]()})}function q(b){return this.each(function(){var c=a(this),d=c.data("bs.tab");d||c.data("bs.tab",d=new F(this)),"string"==typeof b&&d[b]()})}function r(b){return this.each(function(){var c=a(this),d=c.data("bs.affix"),e="object"==typeof b&&b;d||c.data("bs.affix",d=new G(this,e)),"string"==typeof b&&d[b]()})}a(".h1").hide(),b.debug("Bootstrap AMD initialised"),a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one("bsTransitionEnd",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=c(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){if(a(b.target).is(this))return b.handleObj.handler.apply(this,arguments)}})});var s='[data-dismiss="alert"]',t=function(b){a(b).on("click",s,this.close)};t.VERSION="3.3.4",t.TRANSITION_DURATION=150,t.prototype.close=function(b){function c(){f.detach().trigger("closed.bs.alert").remove()}var d=a(this),e=d.attr("data-target");e||(e=d.attr("href"),e=e&&e.replace(/.*(?=#[^\s]*$)/,""));var f=a(e);b&&b.preventDefault(),f.length||(f=d.closest(".alert")),f.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one("bsTransitionEnd",c).emulateTransitionEnd(t.TRANSITION_DURATION):c())};var u=a.fn.alert;a.fn.alert=d,a.fn.alert.Constructor=t,a.fn.alert.noConflict=function(){return a.fn.alert=u,this},a(document).on("click.bs.alert.data-api",s,t.prototype.close);var v=function(b,c){this.$element=a(b),this.options=a.extend({},v.DEFAULTS,c),this.isLoading=!1};v.VERSION="3.3.4",v.DEFAULTS={loadingText:"loading..."},v.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text",null==f.resetText&&d.data("resetText",d[e]()),setTimeout(a.proxy(function(){d[e](null==f[b]?this.options[b]:f[b]),"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c))},this),0)},v.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")&&(c.prop("checked")&&this.$element.hasClass("active")?a=!1:b.find(".active").removeClass("active")),a&&c.prop("checked",!this.$element.hasClass("active")).trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));a&&this.$element.toggleClass("active")};var u=a.fn.button;a.fn.button=e,a.fn.button.Constructor=v,a.fn.button.noConflict=function(){return a.fn.button=u,this},a(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(b){var c=a(b.target);c.hasClass("btn")||(c=c.closest(".btn")),e.call(c,"toggle"),b.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(b){a(b.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(b.type))});var w=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",a.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",a.proxy(this.pause,this)).on("mouseleave.bs.carousel",a.proxy(this.cycle,this))};w.VERSION="3.3.4",w.TRANSITION_DURATION=600,w.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},w.prototype.keydown=function(a){if(!/input|textarea/i.test(a.target.tagName)){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()}},w.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},w.prototype.getItemIndex=function(a){return this.$items=a.parent().children(".item"),this.$items.index(a||this.$active)},w.prototype.getItemForDirection=function(a,b){var c=this.getItemIndex(b),d="prev"==a&&0===c||"next"==a&&c==this.$items.length-1;if(d&&!this.options.wrap)return b;var e="prev"==a?-1:1,f=(c+e)%this.$items.length;return this.$items.eq(f)},w.prototype.to=function(a){var b=this,c=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(a>this.$items.length-1||a<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){b.to(a)}):c==a?this.pause().cycle():this.slide(a>c?"next":"prev",this.$items.eq(a))},w.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},w.prototype.next=function(){if(!this.sliding)return this.slide("next")},w.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},w.prototype.slide=function(b,c){var d=this.$element.find(".item.active"),e=c||this.getItemForDirection(b,d),f=this.interval,g="next"==b?"left":"right",h=this;if(e.hasClass("active"))return this.sliding=!1;var i=e[0],j=a.Event("slide.bs.carousel",{relatedTarget:i,direction:g});if(this.$element.trigger(j),!j.isDefaultPrevented()){if(this.sliding=!0,f&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var k=a(this.$indicators.children()[this.getItemIndex(e)]);k&&k.addClass("active")}var l=a.Event("slid.bs.carousel",{relatedTarget:i,direction:g});return a.support.transition&&this.$element.hasClass("slide")?(e.addClass(b),e[0].offsetWidth,d.addClass(g),e.addClass(g),d.one("bsTransitionEnd",function(){e.removeClass([b,g].join(" ")).addClass("active"),d.removeClass(["active",g].join(" ")),h.sliding=!1,setTimeout(function(){h.$element.trigger(l)},0)}).emulateTransitionEnd(w.TRANSITION_DURATION)):(d.removeClass("active"),e.addClass("active"),this.sliding=!1,this.$element.trigger(l)),f&&this.cycle(),this}};var u=a.fn.carousel;a.fn.carousel=f,a.fn.carousel.Constructor=w,a.fn.carousel.noConflict=function(){return a.fn.carousel=u,this};var x=function(b){var c,d=a(this),e=a(d.attr("data-target")||(c=d.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,""));if(e.hasClass("carousel")){var g=a.extend({},e.data(),d.data()),h=d.attr("data-slide-to");h&&(g.interval=!1),f.call(e,g),h&&e.data("bs.carousel").to(h),b.preventDefault()}};a(document).on("click.bs.carousel.data-api","[data-slide]",x).on("click.bs.carousel.data-api","[data-slide-to]",x),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var b=a(this);f.call(b,b.data())})});var y=function(b,c){this.$element=a(b),this.options=a.extend({},y.DEFAULTS,c),this.$trigger=a('[data-toggle="collapse"][href="#'+b.id+'"],[data-toggle="collapse"][data-target="#'+b.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};y.VERSION="3.3.4",y.TRANSITION_DURATION=350,y.DEFAULTS={toggle:!0},y.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},y.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b,c=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(c&&c.length&&(b=c.data("bs.collapse"),b&&b.transitioning))){var d=a.Event("show.bs.collapse");if(this.$element.trigger(d),!d.isDefaultPrevented()){c&&c.length&&(h.call(c,"hide"),b||c.data("bs.collapse",null));var e=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[e](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var f=function(){this.$element.removeClass("collapsing").addClass("collapse in")[e](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return f.call(this);var g=a.camelCase(["scroll",e].join("-"));this.$element.one("bsTransitionEnd",a.proxy(f,this)).emulateTransitionEnd(y.TRANSITION_DURATION)[e](this.$element[0][g])}}}},y.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var d=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return a.support.transition?void this.$element[c](0).one("bsTransitionEnd",a.proxy(d,this)).emulateTransitionEnd(y.TRANSITION_DURATION):d.call(this)}}},y.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},y.prototype.getParent=function(){return a(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(a.proxy(function(b,c){var d=a(c);this.addAriaAndCollapsedClass(g(d),d)},this)).end()},y.prototype.addAriaAndCollapsedClass=function(a,b){var c=a.hasClass("in");a.attr("aria-expanded",c),b.toggleClass("collapsed",!c).attr("aria-expanded",c)};var u=a.fn.collapse;a.fn.collapse=h,a.fn.collapse.Constructor=y,a.fn.collapse.noConflict=function(){return a.fn.collapse=u,this},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(b){var c=a(this);c.attr("data-target")||b.preventDefault();var d=g(c),e=d.data("bs.collapse"),f=e?"toggle":c.data();h.call(d,f)});var z=".dropdown-backdrop",A='[data-toggle="dropdown"]',B=function(b){a(b).on("click.bs.dropdown",this.toggle)};B.VERSION="3.3.4",B.prototype.toggle=function(b){var c=a(this);if(!c.is(".disabled, :disabled")){var d=j(c),e=d.hasClass("open");if(i(),!e){"ontouchstart"in document.documentElement&&!d.closest(".navbar-nav").length&&a(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(a(this)).on("click",i);var f={relatedTarget:this};if(d.trigger(b=a.Event("show.bs.dropdown",f)),b.isDefaultPrevented())return;c.trigger("focus").attr("aria-expanded","true"),d.toggleClass("open").trigger("shown.bs.dropdown",f)}return!1}},B.prototype.keydown=function(b){if(/(38|40|27|32)/.test(b.which)&&!/input|textarea/i.test(b.target.tagName)){var c=a(this);if(b.preventDefault(),b.stopPropagation(),!c.is(".disabled, :disabled")){var d=j(c),e=d.hasClass("open");if(!e&&27!=b.which||e&&27==b.which)return 27==b.which&&d.find(A).trigger("focus"),c.trigger("click");var f=" li:not(.disabled):visible a",g=d.find('[role="menu"]'+f+', [role="listbox"]'+f);if(g.length){var h=g.index(b.target);38==b.which&&h>0&&h--,40==b.which&&h<g.length-1&&h++,~h||(h=0),g.eq(h).trigger("focus")}}}};var u=a.fn.dropdown;a.fn.dropdown=k,a.fn.dropdown.Constructor=B,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=u,this},a(document).on("click.bs.dropdown.data-api",i).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",A,B.prototype.toggle).on("keydown.bs.dropdown.data-api",A,B.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',B.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',B.prototype.keydown);var C=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};C.VERSION="3.3.4",C.TRANSITION_DURATION=300,C.BACKDROP_TRANSITION_DURATION=150,C.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},C.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},C.prototype.show=function(b){var c=this,d=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(d),this.isShown||d.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){c.$element.one("mouseup.dismiss.bs.modal",function(b){a(b.target).is(c.$element)&&(c.ignoreBackdropClick=!0)})}),this.backdrop(function(){var d=a.support.transition&&c.$element.hasClass("fade");c.$element.parent().length||c.$element.appendTo(c.$body),c.$element.show().scrollTop(0),c.adjustDialog(),d&&c.$element[0].offsetWidth,c.$element.addClass("in").attr("aria-hidden",!1),c.enforceFocus();var e=a.Event("shown.bs.modal",{relatedTarget:b});d?c.$dialog.one("bsTransitionEnd",function(){c.$element.trigger("focus").trigger(e)}).emulateTransitionEnd(C.TRANSITION_DURATION):c.$element.trigger("focus").trigger(e)}))},C.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(C.TRANSITION_DURATION):this.hideModal())},C.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},C.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},C.prototype.resize=function(){this.isShown?a(window).on("resize.bs.modal",a.proxy(this.handleUpdate,this)):a(window).off("resize.bs.modal")},C.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$body.removeClass("modal-open"),a.resetAdjustments(),a.resetScrollbar(),a.$element.trigger("hidden.bs.modal")})},C.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},C.prototype.backdrop=function(b){var c=this,d=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var e=a.support.transition&&d;if(this.$backdrop=a(document.createElement("div")).addClass("modal-backdrop "+d).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),e&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;e?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(C.BACKDROP_TRANSITION_DURATION):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var f=function(){c.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",f).emulateTransitionEnd(C.BACKDROP_TRANSITION_DURATION):f()}else b&&b()},C.prototype.handleUpdate=function(){this.adjustDialog()},C.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:""})},C.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},C.prototype.checkScrollbar=function(){var a=window.innerWidth;if(!a){var b=document.documentElement.getBoundingClientRect();a=b.right-Math.abs(b.left)}this.bodyIsOverflowing=document.body.clientWidth<a,this.scrollbarWidth=this.measureScrollbar()},C.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",a+this.scrollbarWidth)},C.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},C.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var u=a.fn.modal;a.fn.modal=l,a.fn.modal.Constructor=C,a.fn.modal.noConflict=function(){return a.fn.modal=u,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d=c.attr("href"),e=a(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(d)&&d},e.data(),c.data());c.is("a")&&b.preventDefault(),e.one("show.bs.modal",function(a){a.isDefaultPrevented()||e.one("hidden.bs.modal",function(){c.is(":visible")&&c.trigger("focus")})}),l.call(e,f,this)});var D=function(a,b){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.init("tooltip",a,b)};D.VERSION="3.3.4",D.TRANSITION_DURATION=150,D.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},D.prototype.init=function(b,c,d){if(this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(this.options.viewport.selector||this.options.viewport),this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},D.prototype.getDefaults=function(){return D.DEFAULTS},D.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},D.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},D.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c&&c.$tip&&c.$tip.is(":visible")?void(c.hoverState="in"):(c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show())},D.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()},D.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var c=a.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!c)return;var d=this,e=this.tip(),f=this.getUID(this.type);this.setContent(),e.attr("id",f),this.$element.attr("aria-describedby",f),this.options.animation&&e.addClass("fade");var g="function"==typeof this.options.placement?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,h=/\s?auto?\s?/i,i=h.test(g);i&&(g=g.replace(h,"")||"top"),e.detach().css({top:0,left:0,display:"block"}).addClass(g).data("bs."+this.type,this),this.options.container?e.appendTo(this.options.container):e.insertAfter(this.$element);var j=this.getPosition(),k=e[0].offsetWidth,l=e[0].offsetHeight;if(i){var m=g,n=this.options.container?a(this.options.container):this.$element.parent(),o=this.getPosition(n);g="bottom"==g&&j.bottom+l>o.bottom?"top":"top"==g&&j.top-l<o.top?"bottom":"right"==g&&j.right+k>o.width?"left":"left"==g&&j.left-k<o.left?"right":g,e.removeClass(m).addClass(g)}var p=this.getCalculatedOffset(g,j,k,l);this.applyPlacement(p,g);var q=function(){var a=d.hoverState;d.$element.trigger("shown.bs."+d.type),d.hoverState=null,"out"==a&&d.leave(d)};a.support.transition&&this.$tip.hasClass("fade")?e.one("bsTransitionEnd",q).emulateTransitionEnd(D.TRANSITION_DURATION):q()}},D.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top=b.top+g,b.left=b.left+h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=/top|bottom/.test(c),m=l?2*k.left-e+i:2*k.top-f+j,n=l?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(m,d[0][n],l)},D.prototype.replaceArrow=function(a,b,c){this.arrow().css(c?"left":"top",50*(1-a/b)+"%").css(c?"top":"left","")},D.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},D.prototype.hide=function(b){function c(){"in"!=d.hoverState&&e.detach(),d.$element.removeAttr("aria-describedby").trigger("hidden.bs."+d.type),b&&b()}var d=this,e=a(this.$tip),f=a.Event("hide.bs."+this.type);if(this.$element.trigger(f),!f.isDefaultPrevented())return e.removeClass("in"),a.support.transition&&e.hasClass("fade")?e.one("bsTransitionEnd",c).emulateTransitionEnd(D.TRANSITION_DURATION):c(),this.hoverState=null,this},D.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},D.prototype.hasContent=function(){return this.getTitle()},D.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName,e=c.getBoundingClientRect();null==e.width&&(e=a.extend({},e,{width:e.right-e.left,height:e.bottom-e.top}));var f=d?{top:0,left:0}:b.offset(),g={scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop()},h=d?{width:a(window).width(),height:a(window).height()}:null;return a.extend({},e,g,h,f)},D.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},D.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.width&&(e.left=g.left+g.width-k)}return e},D.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},D.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},D.prototype.tip=function(){return this.$tip=this.$tip||a(this.options.template)},D.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},D.prototype.enable=function(){this.enabled=!0},D.prototype.disable=function(){this.enabled=!1},D.prototype.toggleEnabled=function(){this.enabled=!this.enabled},D.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),c.tip().hasClass("in")?c.leave(c):c.enter(c)},D.prototype.destroy=function(){var a=this;clearTimeout(this.timeout),this.hide(function(){a.$element.off("."+a.type).removeData("bs."+a.type)})};var u=a.fn.tooltip;a.fn.tooltip=m,a.fn.tooltip.Constructor=D,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=u,this};var E=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");E.VERSION="3.3.4",E.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),E.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),E.prototype.constructor=E,E.prototype.getDefaults=function(){return E.DEFAULTS},E.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},E.prototype.hasContent=function(){return this.getTitle()||this.getContent()},E.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},E.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var u=a.fn.popover;a.fn.popover=n,a.fn.popover.Constructor=E,a.fn.popover.noConflict=function(){return a.fn.popover=u,this},o.VERSION="3.3.4",o.DEFAULTS={offset:10},o.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},o.prototype.refresh=function(){var b=this,c="offset",d=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),a.isWindow(this.$scrollElement[0])||(c="position",d=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var b=a(this),e=b.data("target")||b.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[c]().top+d,e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]),b.targets.push(this[1])})},o.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.getScrollHeight(),d=this.options.offset+c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(this.scrollHeight!=c&&this.refresh(),b>=d)return g!=(a=f[f.length-1])&&this.activate(a);if(g&&b<e[0])return this.activeTarget=null,this.clear();for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(void 0===e[a+1]||b<e[a+1])&&this.activate(f[a])},o.prototype.activate=function(b){this.activeTarget=b,this.clear();var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")},o.prototype.clear=function(){a(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var u=a.fn.scrollspy;a.fn.scrollspy=p,a.fn.scrollspy.Constructor=o,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=u,this},a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);p.call(b,b.data())})});var F=function(b){this.element=a(b)};F.VERSION="3.3.4",F.TRANSITION_DURATION=150,F.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a"),f=a.Event("hide.bs.tab",{relatedTarget:b[0]}),g=a.Event("show.bs.tab",{relatedTarget:e[0]});if(e.trigger(f),b.trigger(g),!g.isDefaultPrevented()&&!f.isDefaultPrevented()){var h=a(d);this.activate(b.closest("li"),c),this.activate(h,h.parent(),function(){
e.trigger({type:"hidden.bs.tab",relatedTarget:b[0]}),b.trigger({type:"shown.bs.tab",relatedTarget:e[0]})})}}},F.prototype.activate=function(b,c,d){function e(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),b.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),g?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu").length&&b.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),d&&d()}var f=c.find("> .active"),g=d&&a.support.transition&&(f.length&&f.hasClass("fade")||!!c.find("> .fade").length);f.length&&g?f.one("bsTransitionEnd",e).emulateTransitionEnd(F.TRANSITION_DURATION):e(),f.removeClass("in")};var u=a.fn.tab;a.fn.tab=q,a.fn.tab.Constructor=F,a.fn.tab.noConflict=function(){return a.fn.tab=u,this};var x=function(b){b.preventDefault(),q.call(a(this),"show")};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',x).on("click.bs.tab.data-api",'[data-toggle="pill"]',x);var G=function(b,c){this.options=a.extend({},G.DEFAULTS,c),this.$target=a(this.options.target).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(b),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};G.VERSION="3.3.4",G.RESET="affix affix-top affix-bottom",G.DEFAULTS={offset:0,target:window},G.prototype.getState=function(a,b,c,d){var e=this.$target.scrollTop(),f=this.$element.offset(),g=this.$target.height();if(null!=c&&"top"==this.affixed)return e<c&&"top";if("bottom"==this.affixed)return null!=c?!(e+this.unpin<=f.top)&&"bottom":!(e+g<=a-d)&&"bottom";var h=null==this.affixed,i=h?e:f.top,j=h?g:b;return null!=c&&e<=c?"top":null!=d&&i+j>=a-d&&"bottom"},G.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(G.RESET).addClass("affix");var a=this.$target.scrollTop(),b=this.$element.offset();return this.pinnedOffset=b.top-a},G.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},G.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b=this.$element.height(),c=this.options.offset,d=c.top,e=c.bottom,f=a(document.body).height();"object"!=typeof c&&(e=d=c),"function"==typeof d&&(d=c.top(this.$element)),"function"==typeof e&&(e=c.bottom(this.$element));var g=this.getState(f,b,d,e);if(this.affixed!=g){null!=this.unpin&&this.$element.css("top","");var h="affix"+(g?"-"+g:""),i=a.Event(h+".bs.affix");if(this.$element.trigger(i),i.isDefaultPrevented())return;this.affixed=g,this.unpin="bottom"==g?this.getPinnedOffset():null,this.$element.removeClass(G.RESET).addClass(h).trigger(h.replace("affix","affixed")+".bs.affix")}"bottom"==g&&this.$element.offset({top:f-b-e})}};var u=a.fn.affix;a.fn.affix=r,a.fn.affix.Constructor=G,a.fn.affix.noConflict=function(){return a.fn.affix=u,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var b=a(this),c=b.data();c.offset=c.offset||{},null!=c.offsetBottom&&(c.offset.bottom=c.offsetBottom),null!=c.offsetTop&&(c.offset.top=c.offsetTop),r.call(b,c)})})});
